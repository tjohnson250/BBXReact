<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Todd R. Johnson">
<meta name="dcterms.date" content="2026-01-19">
<meta name="keywords" content="large language models, diagnostic reasoning, hidden state identification, medical diagnosis, benchmark">

<title>Black Box as a Diagnostic Reasoning Benchmark for LLMs</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="blackbox_llm_study_files/libs/clipboard/clipboard.min.js"></script>
<script src="blackbox_llm_study_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="blackbox_llm_study_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="blackbox_llm_study_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="blackbox_llm_study_files/libs/quarto-html/popper.min.js"></script>
<script src="blackbox_llm_study_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="blackbox_llm_study_files/libs/quarto-html/anchor.min.js"></script>
<link href="blackbox_llm_study_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="blackbox_llm_study_files/libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="blackbox_llm_study_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="blackbox_llm_study_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="blackbox_llm_study_files/libs/bootstrap/bootstrap-a74871fe4945b66d259aafc266475145.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a>
  <ul class="collapse">
  <li><a href="#the-deployment-reality" id="toc-the-deployment-reality" class="nav-link" data-scroll-target="#the-deployment-reality"><span class="header-section-number">1.1</span> The Deployment Reality</a></li>
  <li><a href="#the-evaluation-crisis" id="toc-the-evaluation-crisis" class="nav-link" data-scroll-target="#the-evaluation-crisis"><span class="header-section-number">1.2</span> The Evaluation Crisis</a></li>
  <li><a href="#what-is-diagnostic-reasoning" id="toc-what-is-diagnostic-reasoning" class="nav-link" data-scroll-target="#what-is-diagnostic-reasoning"><span class="header-section-number">1.3</span> What is Diagnostic Reasoning?</a></li>
  <li><a href="#black-box-as-a-diagnostic-instrument" id="toc-black-box-as-a-diagnostic-instrument" class="nav-link" data-scroll-target="#black-box-as-a-diagnostic-instrument"><span class="header-section-number">1.4</span> Black Box as a Diagnostic Instrument</a></li>
  <li><a href="#addressing-the-spatial-reasoning-confound" id="toc-addressing-the-spatial-reasoning-confound" class="nav-link" data-scroll-target="#addressing-the-spatial-reasoning-confound"><span class="header-section-number">1.5</span> Addressing the Spatial Reasoning Confound</a></li>
  <li><a href="#research-questions" id="toc-research-questions" class="nav-link" data-scroll-target="#research-questions"><span class="header-section-number">1.6</span> Research Questions</a></li>
  </ul></li>
  <li><a href="#literature-review" id="toc-literature-review" class="nav-link" data-scroll-target="#literature-review"><span class="header-section-number">2</span> Literature Review</a>
  <ul class="collapse">
  <li><a href="#constraint-satisfaction-and-llms" id="toc-constraint-satisfaction-and-llms" class="nav-link" data-scroll-target="#constraint-satisfaction-and-llms"><span class="header-section-number">2.1</span> Constraint Satisfaction and LLMs</a></li>
  <li><a href="#spatial-reasoning-limitations" id="toc-spatial-reasoning-limitations" class="nav-link" data-scroll-target="#spatial-reasoning-limitations"><span class="header-section-number">2.2</span> Spatial Reasoning Limitations</a></li>
  <li><a href="#reasoning-complexity-and-performance-collapse" id="toc-reasoning-complexity-and-performance-collapse" class="nav-link" data-scroll-target="#reasoning-complexity-and-performance-collapse"><span class="header-section-number">2.3</span> Reasoning Complexity and Performance Collapse</a></li>
  <li><a href="#world-models-and-mental-simulation" id="toc-world-models-and-mental-simulation" class="nav-link" data-scroll-target="#world-models-and-mental-simulation"><span class="header-section-number">2.4</span> World Models and Mental Simulation</a></li>
  <li><a href="#abductive-reasoning-and-hypothesis-generation" id="toc-abductive-reasoning-and-hypothesis-generation" class="nav-link" data-scroll-target="#abductive-reasoning-and-hypothesis-generation"><span class="header-section-number">2.5</span> Abductive Reasoning and Hypothesis Generation</a></li>
  <li><a href="#test-selection-in-diagnostic-reasoning" id="toc-test-selection-in-diagnostic-reasoning" class="nav-link" data-scroll-target="#test-selection-in-diagnostic-reasoning"><span class="header-section-number">2.6</span> Test Selection in Diagnostic Reasoning</a></li>
  <li><a href="#base-rate-neglect-in-clinical-diagnosis" id="toc-base-rate-neglect-in-clinical-diagnosis" class="nav-link" data-scroll-target="#base-rate-neglect-in-clinical-diagnosis"><span class="header-section-number">2.7</span> Base Rate Neglect in Clinical Diagnosis</a></li>
  <li><a href="#implications-for-diagnostic-ai-systems" id="toc-implications-for-diagnostic-ai-systems" class="nav-link" data-scroll-target="#implications-for-diagnostic-ai-systems"><span class="header-section-number">2.8</span> Implications for Diagnostic AI Systems</a></li>
  <li><a href="#summary-predictions-for-diagnostic-reasoning-in-black-box" id="toc-summary-predictions-for-diagnostic-reasoning-in-black-box" class="nav-link" data-scroll-target="#summary-predictions-for-diagnostic-reasoning-in-black-box"><span class="header-section-number">2.9</span> Summary: Predictions for Diagnostic Reasoning in Black Box</a></li>
  </ul></li>
  <li><a href="#methods" id="toc-methods" class="nav-link" data-scroll-target="#methods"><span class="header-section-number">3</span> Methods</a>
  <ul class="collapse">
  <li><a href="#the-black-box-game-implementation" id="toc-the-black-box-game-implementation" class="nav-link" data-scroll-target="#the-black-box-game-implementation"><span class="header-section-number">3.1</span> The Black Box Game Implementation</a></li>
  <li><a href="#task-modes" id="toc-task-modes" class="nav-link" data-scroll-target="#task-modes"><span class="header-section-number">3.2</span> Task Modes</a>
  <ul class="collapse">
  <li><a href="#predict-mode-forward-reasoning" id="toc-predict-mode-forward-reasoning" class="nav-link" data-scroll-target="#predict-mode-forward-reasoning"><span class="header-section-number">3.2.1</span> Predict Mode (Forward Reasoning)</a></li>
  <li><a href="#play-mode-inverse-reasoning" id="toc-play-mode-inverse-reasoning" class="nav-link" data-scroll-target="#play-mode-inverse-reasoning"><span class="header-section-number">3.2.2</span> Play Mode (Inverse Reasoning)</a></li>
  </ul></li>
  <li><a href="#prompt-conditions" id="toc-prompt-conditions" class="nav-link" data-scroll-target="#prompt-conditions"><span class="header-section-number">3.3</span> Prompt Conditions</a>
  <ul class="collapse">
  <li><a href="#baseline-human-equivalent" id="toc-baseline-human-equivalent" class="nav-link" data-scroll-target="#baseline-human-equivalent"><span class="header-section-number">3.3.1</span> Baseline (Human-Equivalent)</a></li>
  <li><a href="#augmented" id="toc-augmented" class="nav-link" data-scroll-target="#augmented"><span class="header-section-number">3.3.2</span> Augmented</a></li>
  <li><a href="#visualization-options" id="toc-visualization-options" class="nav-link" data-scroll-target="#visualization-options"><span class="header-section-number">3.3.3</span> Visualization Options</a></li>
  </ul></li>
  <li><a href="#models" id="toc-models" class="nav-link" data-scroll-target="#models"><span class="header-section-number">3.4</span> Models</a></li>
  <li><a href="#experimental-design" id="toc-experimental-design" class="nav-link" data-scroll-target="#experimental-design"><span class="header-section-number">3.5</span> Experimental Design</a>
  <ul class="collapse">
  <li><a href="#predict-mode-factors" id="toc-predict-mode-factors" class="nav-link" data-scroll-target="#predict-mode-factors"><span class="header-section-number">3.5.1</span> Predict Mode Factors</a></li>
  <li><a href="#play-mode-factors" id="toc-play-mode-factors" class="nav-link" data-scroll-target="#play-mode-factors"><span class="header-section-number">3.5.2</span> Play Mode Factors</a></li>
  <li><a href="#atom-configurations" id="toc-atom-configurations" class="nav-link" data-scroll-target="#atom-configurations"><span class="header-section-number">3.5.3</span> Atom Configurations</a></li>
  <li><a href="#predict-mode-procedure" id="toc-predict-mode-procedure" class="nav-link" data-scroll-target="#predict-mode-procedure"><span class="header-section-number">3.5.4</span> Predict Mode Procedure</a></li>
  <li><a href="#play-mode-procedure" id="toc-play-mode-procedure" class="nav-link" data-scroll-target="#play-mode-procedure"><span class="header-section-number">3.5.5</span> Play Mode Procedure</a></li>
  </ul></li>
  <li><a href="#dependent-variables" id="toc-dependent-variables" class="nav-link" data-scroll-target="#dependent-variables"><span class="header-section-number">3.6</span> Dependent Variables</a>
  <ul class="collapse">
  <li><a href="#predict-mode" id="toc-predict-mode" class="nav-link" data-scroll-target="#predict-mode"><span class="header-section-number">3.6.1</span> Predict Mode</a></li>
  <li><a href="#play-mode" id="toc-play-mode" class="nav-link" data-scroll-target="#play-mode"><span class="header-section-number">3.6.2</span> Play Mode</a></li>
  <li><a href="#process-measures-from-extended-thinking" id="toc-process-measures-from-extended-thinking" class="nav-link" data-scroll-target="#process-measures-from-extended-thinking"><span class="header-section-number">3.6.3</span> Process Measures (from Extended Thinking)</a></li>
  </ul></li>
  <li><a href="#analysis-plan" id="toc-analysis-plan" class="nav-link" data-scroll-target="#analysis-plan"><span class="header-section-number">3.7</span> Analysis Plan</a>
  <ul class="collapse">
  <li><a href="#statistical-approach" id="toc-statistical-approach" class="nav-link" data-scroll-target="#statistical-approach"><span class="header-section-number">3.7.1</span> Statistical Approach</a></li>
  <li><a href="#primary-analyses" id="toc-primary-analyses" class="nav-link" data-scroll-target="#primary-analyses"><span class="header-section-number">3.7.2</span> Primary Analyses</a></li>
  <li><a href="#effect-size-interpretation-guidelines" id="toc-effect-size-interpretation-guidelines" class="nav-link" data-scroll-target="#effect-size-interpretation-guidelines"><span class="header-section-number">3.7.3</span> Effect Size Interpretation Guidelines</a></li>
  <li><a href="#qualitative-analysis" id="toc-qualitative-analysis" class="nav-link" data-scroll-target="#qualitative-analysis"><span class="header-section-number">3.7.4</span> Qualitative Analysis</a></li>
  <li><a href="#spatial-inferential-decomposition-analysis" id="toc-spatial-inferential-decomposition-analysis" class="nav-link" data-scroll-target="#spatial-inferential-decomposition-analysis"><span class="header-section-number">3.7.5</span> Spatial-Inferential Decomposition Analysis</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results"><span class="header-section-number">4</span> Results</a>
  <ul class="collapse">
  <li><a href="#predict-mode-results" id="toc-predict-mode-results" class="nav-link" data-scroll-target="#predict-mode-results"><span class="header-section-number">4.1</span> Predict Mode Results</a>
  <ul class="collapse">
  <li><a href="#predict-mode-leaderboard" id="toc-predict-mode-leaderboard" class="nav-link" data-scroll-target="#predict-mode-leaderboard"><span class="header-section-number">4.1.1</span> Predict Mode Leaderboard</a></li>
  <li><a href="#forest-plot-all-configurations" id="toc-forest-plot-all-configurations" class="nav-link" data-scroll-target="#forest-plot-all-configurations"><span class="header-section-number">4.1.2</span> Forest Plot: All Configurations</a></li>
  <li><a href="#factor-level-comparisons" id="toc-factor-level-comparisons" class="nav-link" data-scroll-target="#factor-level-comparisons"><span class="header-section-number">4.1.3</span> Factor-Level Comparisons</a></li>
  <li><a href="#anova-prediction-accuracy" id="toc-anova-prediction-accuracy" class="nav-link" data-scroll-target="#anova-prediction-accuracy"><span class="header-section-number">4.1.4</span> ANOVA: Prediction Accuracy</a></li>
  <li><a href="#effect-modification-by-path-complexity" id="toc-effect-modification-by-path-complexity" class="nav-link" data-scroll-target="#effect-modification-by-path-complexity"><span class="header-section-number">4.1.5</span> Effect Modification by Path Complexity</a></li>
  <li><a href="#effect-modification-by-atom-density" id="toc-effect-modification-by-atom-density" class="nav-link" data-scroll-target="#effect-modification-by-atom-density"><span class="header-section-number">4.1.6</span> Effect Modification by Atom Density</a></li>
  <li><a href="#ray-path-complexity-analysis" id="toc-ray-path-complexity-analysis" class="nav-link" data-scroll-target="#ray-path-complexity-analysis"><span class="header-section-number">4.1.7</span> Ray Path Complexity Analysis</a></li>
  </ul></li>
  <li><a href="#play-mode-results" id="toc-play-mode-results" class="nav-link" data-scroll-target="#play-mode-results"><span class="header-section-number">4.2</span> Play Mode Results</a>
  <ul class="collapse">
  <li><a href="#play-mode-leaderboard" id="toc-play-mode-leaderboard" class="nav-link" data-scroll-target="#play-mode-leaderboard"><span class="header-section-number">4.2.1</span> Play Mode Leaderboard</a></li>
  <li><a href="#anova-play-mode-performance" id="toc-anova-play-mode-performance" class="nav-link" data-scroll-target="#anova-play-mode-performance"><span class="header-section-number">4.2.2</span> ANOVA: Play Mode Performance</a></li>
  <li><a href="#regression-analysis-play-mode" id="toc-regression-analysis-play-mode" class="nav-link" data-scroll-target="#regression-analysis-play-mode"><span class="header-section-number">4.2.3</span> Regression Analysis: Play Mode</a></li>
  <li><a href="#interpretation-why-configuration-random-effects" id="toc-interpretation-why-configuration-random-effects" class="nav-link" data-scroll-target="#interpretation-why-configuration-random-effects"><span class="header-section-number">4.2.4</span> Interpretation: Why Configuration Random Effects?</a></li>
  </ul></li>
  <li><a href="#error-analysis" id="toc-error-analysis" class="nav-link" data-scroll-target="#error-analysis"><span class="header-section-number">4.3</span> Error Analysis</a></li>
  </ul></li>
  <li><a href="#discussion" id="toc-discussion" class="nav-link" data-scroll-target="#discussion"><span class="header-section-number">5</span> Discussion</a>
  <ul class="collapse">
  <li><a href="#summary-of-findings" id="toc-summary-of-findings" class="nav-link" data-scroll-target="#summary-of-findings"><span class="header-section-number">5.1</span> Summary of Findings</a></li>
  <li><a href="#relation-to-literature" id="toc-relation-to-literature" class="nav-link" data-scroll-target="#relation-to-literature"><span class="header-section-number">5.2</span> Relation to Literature</a>
  <ul class="collapse">
  <li><a href="#constraint-satisfaction" id="toc-constraint-satisfaction" class="nav-link" data-scroll-target="#constraint-satisfaction"><span class="header-section-number">5.2.1</span> Constraint Satisfaction</a></li>
  <li><a href="#spatial-reasoning" id="toc-spatial-reasoning" class="nav-link" data-scroll-target="#spatial-reasoning"><span class="header-section-number">5.2.2</span> Spatial Reasoning</a></li>
  <li><a href="#world-models" id="toc-world-models" class="nav-link" data-scroll-target="#world-models"><span class="header-section-number">5.2.3</span> World Models</a></li>
  <li><a href="#abductive-reasoning" id="toc-abductive-reasoning" class="nav-link" data-scroll-target="#abductive-reasoning"><span class="header-section-number">5.2.4</span> Abductive Reasoning</a></li>
  </ul></li>
  <li><a href="#implications" id="toc-implications" class="nav-link" data-scroll-target="#implications"><span class="header-section-number">5.3</span> Implications</a>
  <ul class="collapse">
  <li><a href="#for-llm-deployment-in-diagnostic-domains" id="toc-for-llm-deployment-in-diagnostic-domains" class="nav-link" data-scroll-target="#for-llm-deployment-in-diagnostic-domains"><span class="header-section-number">5.3.1</span> For LLM Deployment in Diagnostic Domains</a></li>
  <li><a href="#for-llm-modulo-architectures" id="toc-for-llm-modulo-architectures" class="nav-link" data-scroll-target="#for-llm-modulo-architectures"><span class="header-section-number">5.3.2</span> For LLM-Modulo Architectures</a></li>
  <li><a href="#for-benchmark-development" id="toc-for-benchmark-development" class="nav-link" data-scroll-target="#for-benchmark-development"><span class="header-section-number">5.3.3</span> For Benchmark Development</a></li>
  </ul></li>
  <li><a href="#limitations" id="toc-limitations" class="nav-link" data-scroll-target="#limitations"><span class="header-section-number">5.4</span> Limitations</a></li>
  <li><a href="#future-directions" id="toc-future-directions" class="nav-link" data-scroll-target="#future-directions"><span class="header-section-number">5.5</span> Future Directions</a></li>
  </ul></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion"><span class="header-section-number">6</span> Conclusion</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references"><span class="header-section-number">7</span> References</a></li>
  
  
  
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="blackbox_llm_study.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Black Box as a Diagnostic Reasoning Benchmark for LLMs</h1>
<p class="subtitle lead">Assessing Hidden State Identification Through Test Selection, Constraint Tracking, and Belief Updating</p>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Todd R. Johnson <a href="mailto:todd.r.johnson@uth.tmc.edu" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            University of Texas Health Science Center at Houston
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 19, 2026</p>
    </div>
  </div>
  
    
  </div>
  
<div>
  <div class="abstract">
    <div class="block-title">Abstract</div>
    <p>Diagnostic reasoning—identifying hidden states from observable evidence under a known causal model—is fundamental to medical diagnosis, fault detection, and troubleshooting. This study uses the classic Black Box game as a benchmark to assess LLM capabilities in diagnostic reasoning. Black Box requires the core processes of diagnosis: generating hypotheses about hidden states, selecting informative tests, tracking constraints as evidence accumulates, and updating beliefs appropriately. Unlike medical benchmarks that may reward pattern matching to training data, Black Box provides out-of-distribution problems with verifiable ground truth. We present baseline results comparing Claude model variants (Haiku, Sonnet, Opus) across prompt conditions. Our findings reveal systematic limitations in the component processes of diagnostic reasoning that persist despite scaling and prompt engineering, with implications for the deployment of LLMs in medical diagnosis and other domains requiring hidden state identification.</p>
  </div>
</div>

<div>
  <div class="keywords">
    <div class="block-title">Keywords</div>
    <p>large language models, diagnostic reasoning, hidden state identification, medical diagnosis, benchmark</p>
  </div>
</div>

</header>


<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<section id="the-deployment-reality" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="the-deployment-reality"><span class="header-section-number">1.1</span> The Deployment Reality</h2>
<p>AI systems are increasingly deployed for diagnostic tasks—identifying hidden states or conditions from observable evidence. Medical AI tools assist with diagnosis from imaging, lab results, and symptoms. Industrial systems perform fault diagnosis on complex machinery. Customer service agents troubleshoot technical problems through iterative questioning.</p>
<p>Yet deployment has outpaced our understanding of whether these systems actually perform diagnostic <em>reasoning</em> or sophisticated pattern matching. <span class="citation" data-cites="wen2025context">Wen et al. (<a href="#ref-wen2025context" role="doc-biblioref">2025</a>)</span> demonstrate that high performance on medical benchmarks—the multiple-choice question answering (MCQA) format derived from clinical licensing examinations—may reflect “context matching” rather than clinical reasoning. Their analysis invalidates three assumptions underlying MCQA-based assessment: that knowledge is applied rather than memorized, that semantic consistency leads to consistent answers, and that models can recognize situations with no valid answer.</p>
<p>If LLMs achieve high scores on medical board examinations through pattern matching rather than inference, benchmark performance provides false assurance about deployment readiness for genuine diagnostic tasks.</p>
</section>
<section id="the-evaluation-crisis" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="the-evaluation-crisis"><span class="header-section-number">1.2</span> The Evaluation Crisis</h2>
<p>The fundamental problem is that current benchmarks may not test diagnostic reasoning at all. Most medical AI benchmarks use static question-answering formats: given a case description, select the correct diagnosis from options. This tests recognition, not the iterative process of gathering evidence and refining hypotheses that characterizes actual diagnosis.</p>
<p>We need benchmarks that test the <em>process</em> of diagnostic reasoning, not just its end product. But creating such benchmarks in medical or industrial domains is difficult: cases are complex, ground truth is often uncertain, and training data contamination is hard to control. We need controlled environments where the component processes of diagnostic reasoning can be isolated and measured.</p>
</section>
<section id="what-is-diagnostic-reasoning" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="what-is-diagnostic-reasoning"><span class="header-section-number">1.3</span> What is Diagnostic Reasoning?</h2>
<p>Diagnostic reasoning is the cognitive process of identifying which hidden state (or states) is present based on observable evidence, given a known or partially known model of how hidden states produce observations.</p>
<p><strong>The structure of diagnostic reasoning:</strong></p>
<ul>
<li><strong>Given</strong>: A causal model mapping hidden states to observations (diseases cause symptoms; faults cause error codes; atom configurations cause ray behaviors)</li>
<li><strong>Task</strong>: Identify which hidden state is present based on observations</li>
<li><strong>Process</strong>: Iteratively gather evidence and refine hypotheses until confident</li>
</ul>
<p><strong>Diagnostic reasoning is distinct from:</strong></p>
<ul>
<li><strong>Causal structure discovery</strong>: Learning <em>what causes what</em> (the causal graph itself)</li>
<li><strong>Causal effect estimation</strong>: Measuring <em>how much</em> an intervention affects an outcome</li>
<li><strong>Mechanism discovery</strong>: Understanding <em>how</em> a cause produces its effect</li>
</ul>
<p>In diagnostic reasoning, we typically know (or assume) the causal structure—we know that certain diseases cause certain symptoms, or that certain faults produce certain error patterns. The challenge is identifying <em>which</em> specific state from a known set is present.</p>
<p><strong>Component processes of diagnostic reasoning:</strong></p>
<table class="caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Process</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Hypothesis Generation</strong></td>
<td>Generate candidate hidden states that could explain observations</td>
</tr>
<tr class="even">
<td><strong>Forward Reasoning</strong></td>
<td>Predict what observations would occur under each hypothesis</td>
</tr>
<tr class="odd">
<td><strong>Test Selection</strong></td>
<td>Choose which observation to gather next to best discriminate among hypotheses</td>
</tr>
<tr class="even">
<td><strong>Constraint Tracking</strong></td>
<td>Maintain which hidden states have been ruled in or out</td>
</tr>
<tr class="odd">
<td><strong>Belief Updating</strong></td>
<td>Revise hypothesis probabilities when new evidence arrives</td>
</tr>
<tr class="even">
<td><strong>Stopping Decision</strong></td>
<td>Decide when evidence is sufficient to commit to a diagnosis</td>
</tr>
</tbody>
</table>
<p>These processes must be <em>integrated</em>: test selection depends on current hypotheses; hypotheses depend on accumulated evidence; the decision to stop depends on confidence in the leading hypothesis. Failures in any component can cascade through the diagnostic process.</p>
</section>
<section id="black-box-as-a-diagnostic-instrument" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="black-box-as-a-diagnostic-instrument"><span class="header-section-number">1.4</span> Black Box as a Diagnostic Instrument</h2>
<p>We propose the Black Box game as a diagnostic instrument for understanding LLM reasoning limitations. Black Box is a classic deduction game designed by Eric Solomon in 1978 <span class="citation" data-cites="blackbox1978">(<a href="#ref-blackbox1978" role="doc-biblioref">Wikipedia contributors 2024</a>)</span>. Players face an 8×8 grid containing four hidden “atoms” at unknown locations. By firing rays into the grid and observing their behavior—absorption, deflection, or reflection—players must infer the atom positions.</p>
<p>Black Box is not merely another game benchmark. It is a <em>minimal realization of diagnostic reasoning</em>—requiring all six component processes in an integrated task:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Diagnostic Process</th>
<th>Black Box Analog</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Hypothesis Generation</strong></td>
<td>Consider which atom configurations could explain observations</td>
</tr>
<tr class="even">
<td><strong>Forward Reasoning</strong></td>
<td>Predict ray behavior under a hypothesized configuration</td>
</tr>
<tr class="odd">
<td><strong>Test Selection</strong></td>
<td>Choose which ray to fire next to discriminate among hypotheses</td>
</tr>
<tr class="even">
<td><strong>Constraint Tracking</strong></td>
<td>Maintain which cells are ruled out by accumulated evidence</td>
</tr>
<tr class="odd">
<td><strong>Belief Updating</strong></td>
<td>Revise candidate configurations when new ray results arrive</td>
</tr>
<tr class="even">
<td><strong>Stopping Decision</strong></td>
<td>Decide: fire more rays or commit to a guess?</td>
</tr>
</tbody>
</table>
<p>This structural correspondence makes Black Box findings informative about diagnostic reasoning generally, while providing advantages that clinical or scientific domains lack:</p>
<ol type="1">
<li><strong>Out-of-distribution</strong>: While the rules are simple and fully specifiable, any particular game configuration is almost certainly not in training data</li>
<li><strong>Ground truth</strong>: We know the correct atom positions and can precisely measure both forward reasoning accuracy (Predict mode) and inverse reasoning accuracy (Play mode)</li>
<li><strong>Decomposable errors</strong>: We can analyze extended thinking traces to categorize failures as occurring in experiment design, world model simulation, constraint tracking, or belief updating</li>
</ol>
</section>
<section id="addressing-the-spatial-reasoning-confound" class="level2" data-number="1.5">
<h2 data-number="1.5" class="anchored" data-anchor-id="addressing-the-spatial-reasoning-confound"><span class="header-section-number">1.5</span> Addressing the Spatial Reasoning Confound</h2>
<p>A methodological concern is whether Black Box’s spatial reasoning requirements confound interpretation. Many diagnostic reasoning problems—medical diagnosis, fault detection, troubleshooting—do not involve spatial relationships, so spatial failures on Black Box might not predict failures on non-spatial diagnostic tasks.</p>
<p>We address this through experimental design. Our two-mode structure allows partial decomposition:</p>
<ul>
<li><strong>Predict mode</strong> tests forward reasoning (heavily spatial): given atom positions, trace the ray’s path</li>
<li><strong>Play mode</strong> tests the full diagnostic loop: spatial reasoning is one input, but experiment design, abductive inference, and constraint tracking are the primary challenges</li>
</ul>
<p>Comparing performance across modes provides diagnostic information: good Predict performance with poor Play performance would implicate non-spatial reasoning limitations (abduction, constraint tracking, experiment design), while poor performance on both would suggest spatial reasoning is at least partly responsible.</p>
<p>Additionally, we use <em>mean atoms per ray</em>—a measure of spatial complexity—as a moderator variable. If treatment effects (model, prompt style, extended thinking) are constant across spatial complexity, the limitations lie in inferential machinery rather than spatial processing. If effects are moderated by spatial complexity, spatial reasoning contributes to observed failures.</p>
<p>Finally, we analyze extended thinking traces to categorize errors:</p>
<ul>
<li><strong>Spatial errors</strong>: Ray path traced incorrectly</li>
<li><strong>Constraint errors</strong>: Failed to track ruled-out positions</li>
<li><strong>Experiment design errors</strong>: Fired uninformative rays</li>
<li><strong>Belief updating errors</strong>: Did not revise hypotheses when evidence contradicted them</li>
</ul>
<p>Black Box alone cannot fully separate spatial from non-spatial limitations. However, our findings can be triangulated with non-spatial benchmarks (ZebraLogic for constraint satisfaction, LogicGame for rule-based planning) to identify common factors. If LLMs fail on Black Box <em>and</em> on non-spatial reasoning benchmarks, the shared limitation is inferential machinery, not spatial processing specifically.</p>
</section>
<section id="research-questions" class="level2" data-number="1.6">
<h2 data-number="1.6" class="anchored" data-anchor-id="research-questions"><span class="header-section-number">1.6</span> Research Questions</h2>
<p>This study addresses the following questions:</p>
<ol type="1">
<li><p><strong>Diagnostic Reasoning Capability</strong>: Can LLMs perform the integrated reasoning loop required for diagnostic inference on novel problems?</p></li>
<li><p><strong>Forward vs.&nbsp;Inverse Reasoning</strong>: Do limitations arise primarily in world model simulation (Predict mode) or in the inferential machinery of hypothesis generation and updating (Play mode)?</p></li>
<li><p><strong>Decomposition of Failures</strong>: What proportion of errors reflect spatial reasoning failures versus non-spatial failures (constraint tracking, experiment design, belief updating)?</p></li>
<li><p><strong>Prompt and Scaffold Effects</strong>: Do augmented instructions, visualizations, or extended thinking improve performance, and do these effects interact with spatial complexity?</p></li>
<li><p><strong>Scaling Effects</strong>: Do larger models show improved diagnostic reasoning, and if so, is improvement sufficient to approach human-level competence?</p></li>
<li><p><strong>Implications for Deployment</strong>: What do the observed limitations suggest about the readiness of LLMs for medical diagnosis, fault detection, and other diagnostic tasks?</p></li>
</ol>
</section>
</section>
<section id="literature-review" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Literature Review</h1>
<p>The case for Black Box as a diagnostic instrument rests on documented limitations in each component capability required for diagnostic reasoning. If LLMs struggle with constraint satisfaction, spatial reasoning, world model simulation, and abductive inference <em>in isolation</em>, we should expect compounding failures when these capabilities must be integrated. The literature reviewed below provides this supporting evidence, organized by the component capabilities Black Box requires.</p>
<p>A comprehensive survey by <span class="citation" data-cites="giadikiaroglou2024puzzlesurvey">Giadikiaroglou et al. (<a href="#ref-giadikiaroglou2024puzzlesurvey" role="doc-biblioref">2024</a>)</span> provides a useful taxonomy for understanding LLM puzzle-solving capabilities. They distinguish between <em>rule-based puzzles</em> (with explicit victory conditions and game rules, including deterministic puzzles like Sudoku and Chess, and stochastic puzzles like Minesweeper and Poker) and <em>rule-less puzzles</em> (requiring world knowledge and inference, such as riddles and commonsense reasoning). Black Box falls squarely in the rule-based deterministic category, making findings from this literature directly relevant. The survey notes that advanced prompting methods like Tree-of-Thoughts and Everything-of-Thoughts yield improvements of 26-70% over basic Chain-of-Thought on deterministic puzzles, yet “significant challenges in complex puzzle scenarios” persist, revealing gaps between LLM capabilities and human-like reasoning.</p>
<section id="constraint-satisfaction-and-llms" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="constraint-satisfaction-and-llms"><span class="header-section-number">2.1</span> Constraint Satisfaction and LLMs</h2>
<p>Constraint satisfaction problems (CSPs) require finding values for variables that satisfy a set of constraints. Classic examples include Sudoku, scheduling problems, and logic puzzles. Recent research has systematically evaluated LLM performance on such tasks.</p>
<p>The ZebraLogic benchmark <span class="citation" data-cites="lin2024zebralogic">(<a href="#ref-lin2024zebralogic" role="doc-biblioref">Lin et al. 2024</a>)</span> evaluates LLMs on logic grid puzzles (also known as Zebra puzzles), a well-established CSP format used in standardized tests like the LSAT. Results indicate that while LLMs show some capability on simple puzzles, performance degrades substantially as problem complexity increases. The benchmark reveals that LLMs lack several abilities required for complex logical reasoning, including counterfactual thinking, reflective reasoning, and compositional generalization.</p>
<p><span class="citation" data-cites="bonlarron2024gencp">Bonlarron, Régin, and De Maria (<a href="#ref-bonlarron2024gencp" role="doc-biblioref">2024</a>)</span> demonstrate that LLMs “excel at generating fluent text but struggle to enforce external constraints because they generate tokens sequentially without explicit control mechanisms.” Their GenCP framework addresses this by combining LLM predictions with constraint programming (CP) reasoning, treating text generation as a CSP. This hybrid approach significantly outperforms pure LLM methods, suggesting that constraint satisfaction may require symbolic reasoning components that LLMs lack.</p>
<p><span class="citation" data-cites="michailidis2024constraint">Michailidis, Tsouros, and Guns (<a href="#ref-michailidis2024constraint" role="doc-biblioref">2024</a>)</span> evaluated LLMs on translating natural language problem descriptions into formal constraint models. They found that zero-shot prompting yields essentially no success, and even few-shot prompting produces inconsistent results. This aligns with <span class="citation" data-cites="freuder2024conversational">Freuder (<a href="#ref-freuder2024conversational" role="doc-biblioref">2024</a>)</span>’s observation that successful constraint satisfaction often requires iterative refinement through dialogue, not single-shot generation.</p>
<p>The LogicGame benchmark <span class="citation" data-cites="gui2024logicgame">(<a href="#ref-gui2024logicgame" role="doc-biblioref">Gui et al. 2024</a>)</span> directly evaluates rule-based reasoning—the ability to understand, execute, and plan according to predefined rules. Using game scenarios at varying difficulty levels, they found that even the best-performing model (claude-3.5-sonnet) achieves only 19.15% overall accuracy, with performance falling below 20% on complex tasks requiring multi-step planning. Critically, they observed that while execution tasks improve modestly with few-shot examples, planning tasks often <em>deteriorate</em> with additional demonstrations, and any improvements diminish substantially at higher difficulty levels. This suggests that LLMs struggle not just with constraint tracking but with the multi-step planning required to design informative experiments.</p>
<p>The implications for Black Box are direct: tracking which cell locations are ruled out by each ray observation is fundamentally a constraint satisfaction problem. If LLMs struggle with CSPs generally, they should struggle with the constraint-tracking aspect of Black Box.</p>
</section>
<section id="spatial-reasoning-limitations" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="spatial-reasoning-limitations"><span class="header-section-number">2.2</span> Spatial Reasoning Limitations</h2>
<p>Spatial reasoning—the ability to mentally represent and manipulate spatial relationships—is a well-documented weakness of current LLMs.</p>
<p>The PLUGH benchmark <span class="citation" data-cites="tikhonov2024plugh">(<a href="#ref-tikhonov2024plugh" role="doc-biblioref">Tikhonov et al. 2024</a>)</span> evaluates spatial understanding and reasoning using text adventure game scenarios that require building mental maps from textual descriptions. Results show that while some commercial LLMs exhibit moderate reasoning abilities, “all models still have significant room for improvement.” The benchmark identifies typical failure modes including difficulty maintaining consistent spatial representations across multiple textual updates.</p>
<p><span class="citation" data-cites="chen2024spatial">Chen et al. (<a href="#ref-chen2024spatial" role="doc-biblioref">2024</a>)</span> conducted an empirical analysis of spatial reasoning in large multimodal models, finding that even GPT-4o achieves only 27.5% accuracy on questions requiring reasoning from a human’s viewpoint in an image. Performance degrades further on multi-hop spatial reasoning questions that require integrating multiple spatial relationships.</p>
<p><span class="citation" data-cites="bos2024spatial">Bos (<a href="#ref-bos2024spatial" role="doc-biblioref">2024</a>)</span> provides a practitioner’s perspective on LLM spatial reasoning, noting that “all of the LLMs failed immediately on the easiest problems” involving mental box folding—a standard spatial reasoning task in human cognitive assessments. Interestingly, LLMs performed better on reasoning about objects in photographs than on abstract spatial diagrams, suggesting reliance on statistical patterns from image-caption training data rather than genuine spatial reasoning.</p>
<p>A synthesis of spatial reasoning research <span class="citation" data-cites="quan2025stark">(<a href="#ref-quan2025stark" role="doc-biblioref">Quan et al. 2025</a>)</span> notes that “empirical assessments consistently show a characteristic pattern: models exhibit moderate competence in simple, direct spatial tasks but rapidly deteriorate as the problem scale or compositional/geometric complexity increases, with performance losses ranging from 42% to over 80% as task complexity grows.”</p>
<p>The BALROG benchmark <span class="citation" data-cites="paglieri2024balrog">(<a href="#ref-paglieri2024balrog" role="doc-biblioref">Paglieri et al. 2024</a>)</span> evaluates LLMs and vision language models on diverse game environments ranging from tasks “solvable by non-experts in seconds to extremely difficult challenges like NetHack requiring years to master.” Their findings reveal that current models achieve only partial success on simpler games but “struggle significantly with more challenging tasks.” Most striking is their discovery of “severe deficiencies in vision-based decision-making”—several models actually perform <em>worse</em> when given visual representations of environments compared to text-only descriptions. This counterintuitive result suggests that visual processing may introduce noise rather than helpful spatial information.</p>
<p><span class="citation" data-cites="wang2025crosswordbench">J. Wang et al. (<a href="#ref-wang2025crosswordbench" role="doc-biblioref">2025</a>)</span> addresses a related challenge: tasks requiring both semantic understanding and adherence to visual grid constraints. Using crossword puzzles as a benchmark, they demonstrate that “mathematical reasoning training doesn’t necessarily generalize to tasks requiring linguistic and spatial integration.” This finding is particularly relevant to Black Box, which similarly requires integrating rule-based reasoning (ray physics) with spatial constraint tracking (grid positions).</p>
<p>For Black Box, ray tracing requires understanding how rays move through 2D space and how they deflect upon encountering atoms. The documented limitations in spatial reasoning suggest LLMs will struggle with accurate ray path simulation.</p>
</section>
<section id="reasoning-complexity-and-performance-collapse" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="reasoning-complexity-and-performance-collapse"><span class="header-section-number">2.3</span> Reasoning Complexity and Performance Collapse</h2>
<p>A critical question for evaluating LLM reasoning is how performance scales with problem complexity. <span class="citation" data-cites="shojaee2025illusion">Shojaee et al. (<a href="#ref-shojaee2025illusion" role="doc-biblioref">2025</a>)</span> provide a systematic investigation using controllable puzzle environments that allow precise manipulation of compositional complexity while maintaining consistent logical structures.</p>
<p>Their findings reveal three distinct performance regimes. In low-complexity tasks, standard models surprisingly outperform reasoning models (those using extended thinking or chain-of-thought), suggesting that extended reasoning can introduce unnecessary complexity for simple problems. In medium-complexity tasks, extended thinking provides clear advantages, demonstrating the intended benefit of reasoning-augmented models. However, in high-complexity tasks, both standard and reasoning models exhibit complete accuracy collapse—a fundamental ceiling that persists regardless of model capability or available computational resources.</p>
<p>Particularly striking is their observation that reasoning models exhibit <em>declining effort</em> at higher complexity levels despite adequate token budgets. Rather than leveraging available computational resources more intensively when problems become harder, models show inconsistent reasoning patterns across similar problems. This suggests that current reasoning mechanisms are not genuinely algorithmic but rather approximate heuristics that fail when problems exceed certain complexity thresholds.</p>
<p>The PuzzlePlex benchmark <span class="citation" data-cites="puzzleplex2025">(<a href="#ref-puzzleplex2025" role="doc-biblioref">Authors 2025b</a>)</span> extends this analysis to multi-turn adversarial environments, evaluating LLM reasoning and planning across 24 diverse puzzles including both deterministic and stochastic games. Their findings are sobering: “LLMs still significantly lag behind even simple heuristics in puzzles.” This result suggests that the limitations are not merely about single-step reasoning accuracy but extend to the sequential decision-making and strategic planning that characterizes game play. For tasks requiring iterative hypothesis refinement based on accumulated evidence—like Black Box—this predicts systematic failures in experiment design and belief updating.</p>
<p>For Black Box, these findings predict a non-linear relationship between game difficulty (determined by atom configurations, number of atoms, and observation ambiguity) and model performance. Simple configurations may be solved adequately, but complex configurations requiring deep inference chains should trigger the same “reasoning collapse” observed across other puzzle domains.</p>
</section>
<section id="world-models-and-mental-simulation" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="world-models-and-mental-simulation"><span class="header-section-number">2.4</span> World Models and Mental Simulation</h2>
<p>A “world model” refers to an internal representation that can be used to simulate how states evolve over time. The question of whether LLMs possess genuine world models—versus sophisticated pattern matching—is actively debated.</p>
<p><span class="citation" data-cites="harig2025worldmodels">Harig et al. (<a href="#ref-harig2025worldmodels" role="doc-biblioref">2025</a>)</span> investigated this question using mechanical reasoning about pulley systems. Their findings are striking: while LLMs showed some ability to estimate mechanical advantage, they appeared to use a “pulley counting heuristic” rather than genuine simulation. The best model (GPT-4o) achieved only 26.1% accuracy on exact predictions. When problems were modified to be superficially similar but mechanically different, performance collapsed, suggesting “abilities are often fragile and dependent on superficial features rather than deep understanding.”</p>
<p><span class="citation" data-cites="wang2024bytesized">R. Wang et al. (<a href="#ref-wang2024bytesized" role="doc-biblioref">2024</a>)</span> directly tested whether LLMs can serve as text-based world simulators. Using a benchmark of 76,369 state transitions from text adventure games, they found that GPT-4’s best single-step accuracy was 59.9%. Because simulation errors accumulate, after 10 steps the expected accuracy drops to less than 1% (<span class="math inline">\(0.599^{10}\)</span>). They conclude that “LLMs are not yet able to reliably act as text world simulators.”</p>
<p>This literature suggests that LLMs may appear to reason about world dynamics but are actually relying on heuristic shortcuts that fail when problems require genuine simulation. For Black Box’s “Predict” mode—where the model must trace a ray’s path given known atom positions—we should expect systematic errors reflecting heuristic approximation rather than accurate simulation.</p>
<p>However, recent work suggests that targeted post-training on decision-making games can substantially improve LLM reasoning in those specific domains. <span class="citation" data-cites="wang2025mastermind">Y. Wang et al. (<a href="#ref-wang2025mastermind" role="doc-biblioref">2025</a>)</span> developed data synthesis strategies for training LLMs on Doudizhu (a Chinese card game) and Go, demonstrating that game-based training data can complement traditional code and mathematics datasets for reasoning enhancement. Their “Mastermind” models achieved 90% action accuracy matching expert data and 98% similarity in thought processes for Doudizhu. Critically, this approach uses hierarchical training pipelines that decompose complex decisions into subtasks—possible action prediction, opponent strategy modeling, and final action selection—rather than relying on direct policy learning.</p>
<p>For our purposes, this work highlights an important distinction: Black Box is designed as an <em>out-of-distribution</em> benchmark that tests zero-shot reasoning capabilities on novel configurations. The success of task-specific training reported by <span class="citation" data-cites="wang2025mastermind">Y. Wang et al. (<a href="#ref-wang2025mastermind" role="doc-biblioref">2025</a>)</span> does not contradict predictions of poor zero-shot performance; rather, it suggests that observed limitations may reflect training distribution gaps rather than fundamental architectural constraints. Whether fine-tuning on Black Box traces would improve performance—and whether such improvement would generalize to other spatial reasoning tasks—remains an empirical question addressed in our future directions.</p>
</section>
<section id="abductive-reasoning-and-hypothesis-generation" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="abductive-reasoning-and-hypothesis-generation"><span class="header-section-number">2.5</span> Abductive Reasoning and Hypothesis Generation</h2>
<p>Abductive reasoning—inferring the most plausible explanation for observations—is the core inferential process in diagnostic reasoning. A growing body of research examines LLM capabilities in this domain.</p>
<p><span class="citation" data-cites="yang2025survey">Yang et al. (<a href="#ref-yang2025survey" role="doc-biblioref">2025</a>)</span> provides a comprehensive framework for understanding LLM hypothesis discovery, organizing methods according to Peirce’s reasoning paradigm: abduction (hypothesis generation), deduction (hypothesis application), and induction (hypothesis validation). They note that “most existing work assessing LLM reasoning centers almost exclusively on multi-step deductive tasks, leaving abduction and induction, the engines of hypothesis discovery, largely unexplored.”</p>
<p><span class="citation" data-cites="wang2025occam">Z. Wang et al. (<a href="#ref-wang2025occam" role="doc-biblioref">2025</a>)</span> directly tests whether LLMs follow Occam’s Razor—the principle of preferring simpler explanations. Using a synthetic benchmark (InAbHyD) designed to test inductive and abductive reasoning, they find that “current LLMs can’t generate high-quality hypotheses that match human-level intelligence.” LLMs frequently produce overly complex explanations when simpler ones suffice, failing a fundamental principle of diagnostic reasoning.</p>
<p><span class="citation" data-cites="liu2024incomplete">Liu, Neubig, and Andreas (<a href="#ref-liu2024incomplete" role="doc-biblioref">2024</a>)</span> characterizes the current state as “an incomplete loop,” arguing that while LLMs can perform some aspects of each reasoning type, they fail to integrate abduction, deduction, and induction into a coherent reasoning cycle. This fragmentation prevents genuine hypothesis-driven inquiry.</p>
<p><span class="citation" data-cites="rodriguez2025analogical">Rodriguez et al. (<a href="#ref-rodriguez2025analogical" role="doc-biblioref">2025</a>)</span> argues from a theoretical perspective that LLMs face fundamental limitations in abductive reasoning: “(1) They cannot work with counterfactuals, relying only on correlational datasets. (2) They are unable to perform true abductive reasoning.” While LLMs may appear to generate hypotheses, this reflects parameter-controlled variation rather than genuine inference to the best explanation.</p>
<p>For Black Box, the inverse problem—inferring atom locations from ray observations—is quintessentially abductive. The literature predicts systematic failures in generating parsimonious hypotheses and in appropriately updating beliefs as evidence accumulates.</p>
</section>
<section id="test-selection-in-diagnostic-reasoning" class="level2" data-number="2.6">
<h2 data-number="2.6" class="anchored" data-anchor-id="test-selection-in-diagnostic-reasoning"><span class="header-section-number">2.6</span> Test Selection in Diagnostic Reasoning</h2>
<p>A distinguishing feature of diagnostic reasoning is <em>active</em> test selection—choosing which observations to gather based on current hypotheses to maximally discriminate among candidate diagnoses. Most LLM benchmarks present static problems where all information is provided upfront. Few benchmarks test the ability to strategically select tests and iteratively refine hypotheses.</p>
<p>Auto-Bench <span class="citation" data-cites="autobench2025">(<a href="#ref-autobench2025" role="doc-biblioref">Authors 2025a</a>)</span> evaluates LLMs on a task structurally similar to diagnosis: discovering hidden graph structures through iterative experimentation. The task proceeds in cycles: the model receives previous observations, proposes a hypothesis about the hidden structure, and designs an intervention to test that hypothesis. An oracle executes the intervention and returns new observations, continuing until the hypothesis matches ground truth or a limit is reached. This directly parallels diagnostic reasoning: observe effects, hypothesize hidden states, select tests to discriminate. The key finding is that LLMs struggle with strategic test selection—they often propose uninformative experiments that fail to disambiguate among hypotheses.</p>
<p>This finding is particularly relevant for Black Box. Effective play requires selecting rays that maximally constrain the hypothesis space— firing into regions where different candidate configurations would produce different outcomes. Random or poorly-chosen rays waste resources and may never converge on the correct answer. The documented failures in Auto-Bench predict that LLMs will struggle with strategic ray selection in Black Box’s Play mode.</p>
</section>
<section id="base-rate-neglect-in-clinical-diagnosis" class="level2" data-number="2.7">
<h2 data-number="2.7" class="anchored" data-anchor-id="base-rate-neglect-in-clinical-diagnosis"><span class="header-section-number">2.7</span> Base Rate Neglect in Clinical Diagnosis</h2>
<p>A particularly consequential manifestation of abductive reasoning failure is base rate neglect—the tendency to overweight salient observations while underweighting prior probabilities. <span class="citation" data-cites="omar2025zebras">Omar et al. (<a href="#ref-omar2025zebras" role="doc-biblioref">2025</a>)</span> provide the first large-scale demonstration of this phenomenon in LLMs applied to clinical diagnosis.</p>
<p>Using 300 synthetic clinical vignettes tested across 20 LLMs with approximately 1.8 million responses, they found that models systematically selected rare “zebra” diagnoses linked to salient but non-decisive cues (such as travel history or animal exposure) more often than epidemiologically correct diagnoses (49.8% vs 37.7%). This pattern persisted even when models were explicitly asked to identify the “most likely” diagnosis. Critically, prompts that explicitly invoked base rates and epidemiology reduced but did not eliminate this saliency bias.</p>
<p>The implications are profound: LLMs that achieve high performance on medical board examinations—demonstrating factual knowledge of disease prevalence and diagnostic criteria—nevertheless fail to appropriately weight this knowledge when salient distractors are present. As the authors note, this represents “associative pattern matching rather than stable probabilistic reasoning.” Training on medical literature, which overrepresents rare and dramatic conditions in case reports and teaching materials, may systematically bias models toward zebra diagnoses.</p>
<p>For Black Box, this finding suggests that even when LLMs possess accurate knowledge of ray physics, they may be systematically distracted by salient features of observations (e.g., absorption events, unusual deflection patterns) at the expense of systematic constraint tracking and hypothesis evaluation. The base rate neglect documented in clinical diagnosis may manifest as premature hypothesis commitment or failure to consider the full space of configurations consistent with accumulated evidence.</p>
</section>
<section id="implications-for-diagnostic-ai-systems" class="level2" data-number="2.8">
<h2 data-number="2.8" class="anchored" data-anchor-id="implications-for-diagnostic-ai-systems"><span class="header-section-number">2.8</span> Implications for Diagnostic AI Systems</h2>
<p>The limitations documented above converge on a concerning picture for LLM deployment in diagnostic contexts.</p>
<p>The LLM-Modulo framework <span class="citation" data-cites="kambhampati2024llmmodulo valmeekam2023planning">(<a href="#ref-kambhampati2024llmmodulo" role="doc-biblioref">Kambhampati et al. 2024</a>; <a href="#ref-valmeekam2023planning" role="doc-biblioref">Valmeekam et al. 2023</a>)</span> proposes a pragmatic response: accept that LLMs cannot plan or reason reliably, but use them as components within hybrid systems that include external verifiers and symbolic reasoners. Under this view, the LLM’s role is translation and suggestion, not autonomous diagnostic reasoning. A physician might use an LLM to suggest differential diagnoses, but should not rely on it to track constraints or select optimal tests.</p>
<p>This matters because AI diagnostic systems are already being deployed. Medical AI tools assist with diagnosis from imaging, lab results, and symptoms. Industrial systems perform fault diagnosis on complex machinery. The failure modes documented throughout this review—failure to track constraints, inability to select informative tests, base rate neglect, and premature hypothesis commitment—map directly onto the requirements of diagnostic reasoning.</p>
<p>Diagnostic benchmarks that can characterize <em>when</em> and <em>why</em> these failures occur are needed before broader deployment in high-stakes diagnostic domains.</p>
</section>
<section id="summary-predictions-for-diagnostic-reasoning-in-black-box" class="level2" data-number="2.9">
<h2 data-number="2.9" class="anchored" data-anchor-id="summary-predictions-for-diagnostic-reasoning-in-black-box"><span class="header-section-number">2.9</span> Summary: Predictions for Diagnostic Reasoning in Black Box</h2>
<p>Based on the documented limitations in component processes of diagnostic reasoning, we derive the following predictions:</p>
<ol type="1">
<li><p><strong>Forward reasoning (Predict mode)</strong> will show substantial errors, consistent with documented failures in spatial reasoning and world model simulation.</p></li>
<li><p><strong>Inverse reasoning (Play mode)</strong> will show even greater errors, as it compounds spatial reasoning with abductive inference and constraint satisfaction.</p></li>
<li><p><strong>Prompt engineering</strong> will provide modest improvements but will not overcome fundamental limitations.</p></li>
<li><p><strong>Scaling</strong> (larger models) will show improvement but not to human-level performance.</p></li>
<li><p><strong>Error patterns</strong> will reveal heuristic approximation rather than systematic reasoning—e.g., over-reliance on surface features, failure to track constraints, non-parsimonious hypotheses.</p></li>
<li><p><strong>Tool augmentation</strong> (e.g., giving the LLM a ray-tracing verifier) will help with verification but not with hypothesis generation, as the limitation is in search/inference, not just simulation.</p></li>
<li><p><strong>Uninformative test selection</strong>: Following findings from Auto-Bench <span class="citation" data-cites="autobench2025">(<a href="#ref-autobench2025" role="doc-biblioref">Authors 2025a</a>)</span>, models will frequently choose rays that fail to disambiguate among hypotheses—firing into already-constrained regions or missing opportunities for informative observations. Strategic test selection requires anticipating which observations would most reduce uncertainty, a capability that current models lack.</p></li>
<li><p><strong>Complexity-dependent collapse</strong>: Following <span class="citation" data-cites="shojaee2025illusion">Shojaee et al. (<a href="#ref-shojaee2025illusion" role="doc-biblioref">2025</a>)</span>, performance will show a non-linear pattern—adequate performance on simple configurations but catastrophic failure on complex configurations requiring extended inference chains, regardless of available thinking budget.</p></li>
<li><p><strong>Saliency-driven distraction</strong>: Following <span class="citation" data-cites="omar2025zebras">Omar et al. (<a href="#ref-omar2025zebras" role="doc-biblioref">2025</a>)</span>, models will be systematically distracted by salient observations (e.g., absorption events, dramatic deflections) and may anchor prematurely on hypotheses suggested by striking but non-decisive evidence, even when simpler explanations are more consistent with the full observation set.</p></li>
<li><p><strong>Spatial-inferential decomposition</strong>: If spatial reasoning is the primary bottleneck, we expect: (a) poor Predict mode performance,</p>
<ol start="2" type="a">
<li>treatment effects moderated by spatial complexity (mean atoms per ray), and (c) error traces dominated by ray path miscalculations. If inferential machinery is the primary bottleneck, we expect:</li>
<li>relatively better Predict than Play performance, (b) treatment effects constant across spatial complexity, and (c) error traces showing constraint tracking failures, uninformative experiment choices, and belief updating errors.</li>
</ol></li>
<li><p><strong>Convergent validity</strong>: If Black Box limitations reflect general diagnostic reasoning failures rather than spatial-specific failures, we expect correlations with findings from non-spatial benchmarks (ZebraLogic, LogicGame). Models that perform poorly on constraint satisfaction and rule-based planning should also perform poorly on Black Box’s non-spatial components.</p></li>
</ol>
</section>
</section>
<section id="methods" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Methods</h1>
<section id="the-black-box-game-implementation" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="the-black-box-game-implementation"><span class="header-section-number">3.1</span> The Black Box Game Implementation</h2>
<p>We implemented Black Box as a web-based application using React, allowing both human play and automated LLM interaction through the Anthropic API. The implementation follows standard Black Box rules:</p>
<ul>
<li><strong>Grid</strong>: 8×8 cells, with 4 randomly placed atoms (non-adjacent placement enforced)</li>
<li><strong>Rays</strong>: Fired from any of 32 edge positions (8 per side)</li>
<li><strong>Ray behavior</strong>:
<ul>
<li>Direct hit on atom: <strong>Absorbed</strong> (marked “H” for hit)</li>
<li>Atom diagonally adjacent to entry cell: <strong>Reflected</strong> (marked “R”)</li>
<li>Atom diagonally adjacent to path: <strong>Deflected</strong> 90° away from atom</li>
<li>Atoms on both sides of path: <strong>Reflected</strong> (reverses direction)</li>
<li>Clear path: Ray exits at opposite edge</li>
</ul></li>
</ul>
</section>
<section id="task-modes" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="task-modes"><span class="header-section-number">3.2</span> Task Modes</h2>
<section id="predict-mode-forward-reasoning" class="level3" data-number="3.2.1">
<h3 data-number="3.2.1" class="anchored" data-anchor-id="predict-mode-forward-reasoning"><span class="header-section-number">3.2.1</span> Predict Mode (Forward Reasoning)</h3>
<p>In Predict mode, the LLM is shown: - The 8×8 grid with atom positions marked - A ray entry point (e.g., “NORTH-4”)</p>
<p>The LLM must predict the ray’s outcome: exit position, absorption, or reflection. This tests world model accuracy—can the LLM correctly simulate ray physics?</p>
</section>
<section id="play-mode-inverse-reasoning" class="level3" data-number="3.2.2">
<h3 data-number="3.2.2" class="anchored" data-anchor-id="play-mode-inverse-reasoning"><span class="header-section-number">3.2.2</span> Play Mode (Inverse Reasoning)</h3>
<p>In Play mode, the LLM: - Receives the game rules - Chooses which rays to fire (up to 20) - Receives feedback after each ray (exit position, absorption, or reflection) - Must guess all 4 atom positions</p>
<p>This tests the full reasoning pipeline: experiment design, observation integration, constraint tracking, and abductive inference.</p>
</section>
</section>
<section id="prompt-conditions" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="prompt-conditions"><span class="header-section-number">3.3</span> Prompt Conditions</h2>
<p>We developed two prompt styles with optional visualization augmentation:</p>
<section id="baseline-human-equivalent" class="level3" data-number="3.3.1">
<h3 data-number="3.3.1" class="anchored" data-anchor-id="baseline-human-equivalent"><span class="header-section-number">3.3.1</span> Baseline (Human-Equivalent)</h3>
<p>Comprehensive instructions adapted from the traditional Emacs Black Box rules, comparable to what a human player would receive. The prompt includes:</p>
<ul>
<li>Complete rules with ASCII diagram examples showing deflection, reflection, and absorption</li>
<li>Scoring information (rays cost points, missed atoms cost 5 points each)</li>
<li>JSON response format specification</li>
</ul>
<p>Key excerpt:</p>
<pre><code>Your opponent has hidden 4 balls within this box. By shooting rays into
the box and observing where they emerge, it is possible to deduce the
positions of the hidden balls.

There are three possible outcomes for each ray you send into the box:
- DETOUR: The ray is deflected and emerges somewhere other than where
  you sent it in.
- REFLECTION (R): The ray is reflected and emerges in the same place
  it was sent in.
- HIT (H): The ray strikes a ball directly and is absorbed.</code></pre>
</section>
<section id="augmented" class="level3" data-number="3.3.2">
<h3 data-number="3.3.2" class="anchored" data-anchor-id="augmented"><span class="header-section-number">3.3.2</span> Augmented</h3>
<p>Extended instructions including:</p>
<ul>
<li>Explicit coordinate system explanation</li>
<li>Detailed deflection geometry with worked examples</li>
<li>Strategy guidance (triangulation, multiple rays)</li>
<li>Common error warnings</li>
<li>Explicit note that single observations are typically ambiguous</li>
</ul>
</section>
<section id="visualization-options" class="level3" data-number="3.3.3">
<h3 data-number="3.3.3" class="anchored" data-anchor-id="visualization-options"><span class="header-section-number">3.3.3</span> Visualization Options</h3>
<p>Either prompt style can be combined with:</p>
<ul>
<li><strong>Include Visualization</strong>: Text-based board visualization showing current state</li>
<li><strong>VoT (Visualization of Thought) Options</strong>:
<ul>
<li>Grid State (Play only): Shows current board state in prompt</li>
<li>Ray Trace: Shows ray path visualization</li>
<li>Hypothesis (Play only): Shows marked hypothesis positions</li>
</ul></li>
</ul>
</section>
</section>
<section id="models" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="models"><span class="header-section-number">3.4</span> Models</h2>
<p>We evaluated three Claude 4.5 model variants:</p>
<ul>
<li><strong>Claude Haiku 4.5</strong> (<code>claude-haiku-4-5-20251001</code>): Smallest, fastest</li>
<li><strong>Claude Sonnet 4.5</strong> (<code>claude-sonnet-4-5-20250929</code>): Mid-tier</li>
<li><strong>Claude Opus 4.5</strong> (<code>claude-opus-4-5-20251101</code>): Largest, most capable</li>
</ul>
<p>All models were accessed through the Anthropic API with extended thinking enabled to capture reasoning processes.</p>
</section>
<section id="experimental-design" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="experimental-design"><span class="header-section-number">3.5</span> Experimental Design</h2>
<p>The experiment uses a factorial design with factors that differ slightly between Predict and Play modes. Ten fixed atom configurations ensure reproducibility across conditions.</p>
<section id="predict-mode-factors" class="level3" data-number="3.5.1">
<h3 data-number="3.5.1" class="anchored" data-anchor-id="predict-mode-factors"><span class="header-section-number">3.5.1</span> Predict Mode Factors</h3>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 18%">
<col style="width: 31%">
<col style="width: 49%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Factor</th>
<th style="text-align: left;">Levels</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Model</td>
<td style="text-align: left;">Haiku 4.5, Sonnet 4.5, Opus 4.5</td>
<td style="text-align: left;">Model variant</td>
</tr>
<tr class="even">
<td style="text-align: left;">Prompt Style</td>
<td style="text-align: left;">Baseline, Augmented</td>
<td style="text-align: left;">Human-equivalent vs.&nbsp;detailed strategy guidance</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Extended Thinking</td>
<td style="text-align: left;">Yes (with budget), No</td>
<td style="text-align: left;">Enable extended thinking with token budget</td>
</tr>
<tr class="even">
<td style="text-align: left;">VoT Ray Trace</td>
<td style="text-align: left;">Yes, No</td>
<td style="text-align: left;">Include ray trace visualization in prompt</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Atom Configuration</td>
<td style="text-align: left;">10 fixed configurations</td>
<td style="text-align: left;">Predetermined atom placements for reproducibility</td>
</tr>
</tbody>
</table>
</div>
</div>
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th>Model</th>
<th>Prompt</th>
<th>Extended Thinking</th>
<th>Vot (None, B Ray Trace)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Haiku 4.5, Sonnet 4.5, Opus 4.5</strong></td>
<td><strong>baseline</strong></td>
<td><strong>No</strong></td>
<td><strong>None</strong></td>
</tr>
<tr class="even">
<td><strong>*Haiku 4.5, Sonnet 4.5, Opus 4.5</strong></td>
<td><strong>baseline</strong></td>
<td><strong>No</strong></td>
<td><strong>VoT B Ray Trace Visualization</strong></td>
</tr>
<tr class="odd">
<td><strong>*Haiku 4.5, Sonnet 4.5, Opus 4.5</strong></td>
<td><strong>baseline</strong></td>
<td><strong>10K</strong></td>
<td><strong>None</strong></td>
</tr>
<tr class="even">
<td><strong>*Haiku 4.5, Sonnet 4.5, Opus 4.5</strong></td>
<td><strong>baseline</strong></td>
<td><strong>10K</strong></td>
<td><strong>VoT B Ray Trace Visualization</strong></td>
</tr>
<tr class="odd">
<td><strong>*Haiku 4.5, Sonnet 4.5, Opus 4.5</strong></td>
<td><strong>augmented</strong></td>
<td><strong>No</strong></td>
<td><strong>None</strong></td>
</tr>
<tr class="even">
<td><strong>*Haiku 4.5, Sonnet 4.5, Opus 4.5</strong></td>
<td><strong>augmented</strong></td>
<td><strong>No</strong></td>
<td><strong>VoT B Ray Trace Visualization</strong></td>
</tr>
<tr class="odd">
<td><strong>*Haiku 4.5, Sonnet 4.5, Opus 4.5</strong></td>
<td><strong>augmented</strong></td>
<td><strong>10K</strong></td>
<td><strong>None</strong></td>
</tr>
<tr class="even">
<td><strong>*Haiku 4.5, Sonnet 4.5, Opus 4.5</strong></td>
<td><strong>augmented</strong></td>
<td><strong>10K</strong></td>
<td><strong>VoT B Ray Trace Visualization</strong></td>
</tr>
</tbody>
</table>
</section>
<section id="play-mode-factors" class="level3" data-number="3.5.2">
<h3 data-number="3.5.2" class="anchored" data-anchor-id="play-mode-factors"><span class="header-section-number">3.5.2</span> Play Mode Factors</h3>
<p>Play Mode Experiment Log</p>
<table class="caption-top table">
<caption>Play Mode Experiment Log</caption>
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th>Model</th>
<th>Prompt</th>
<th>Extended Thinking</th>
<th>VoT (None, A, B, or C)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Haiku 4.5, Sonnet 4.5, Opus 4.5</strong></td>
<td><strong>baseline</strong></td>
<td><strong>No</strong></td>
<td><strong>None</strong></td>
</tr>
<tr class="even">
<td><strong>Haiku 4.5, Sonnet 4.5, Opus 4.5</strong></td>
<td><strong>baseline</strong></td>
<td><strong>No</strong></td>
<td><strong>VoT A Grid State Tracking</strong></td>
</tr>
<tr class="odd">
<td><strong>Haiku 4.5, Sonnet 4.5, Opus 4.5</strong></td>
<td><strong>baseline</strong></td>
<td><strong>No</strong></td>
<td><strong>VoT B Ray Trace Visualization</strong></td>
</tr>
<tr class="even">
<td><strong>Haiku 4.5, Sonnet 4.5, Opus 4.5</strong></td>
<td><strong>baseline</strong></td>
<td><strong>No</strong></td>
<td><strong>VoT C Hypothesis Verification</strong></td>
</tr>
<tr class="odd">
<td><strong>Haiku 4.5, Sonnet 4.5, Opus 4.5</strong></td>
<td><strong>baseline</strong></td>
<td><strong>10K</strong></td>
<td><strong>None</strong></td>
</tr>
<tr class="even">
<td><strong>Haiku 4.5, Sonnet 4.5, Opus 4.5</strong></td>
<td><strong>baseline</strong></td>
<td><strong>10K</strong></td>
<td><strong>VoT A Grid State Tracking</strong></td>
</tr>
<tr class="odd">
<td><strong>Haiku 4.5, Sonnet 4.5, Opus 4.5</strong></td>
<td><strong>baseline</strong></td>
<td><strong>10K</strong></td>
<td><strong>VoT B Ray Trace Visualization</strong></td>
</tr>
<tr class="even">
<td><strong>Haiku 4.5, Sonnet 4.5, Opus 4.5</strong></td>
<td><strong>baseline</strong></td>
<td><strong>10K</strong></td>
<td><strong>VoT C Hypothesis Verification</strong></td>
</tr>
<tr class="odd">
<td><strong>Haiku 4.5, Sonnet 4.5, Opus 4.5</strong></td>
<td><strong>augmented</strong></td>
<td><strong>No</strong></td>
<td><strong>None</strong></td>
</tr>
<tr class="even">
<td><strong>Haiku 4.5, Sonnet 4.5, Opus 4.5</strong></td>
<td><strong>augmented</strong></td>
<td><strong>No</strong></td>
<td><strong>VoT A Grid State Tracking</strong></td>
</tr>
<tr class="odd">
<td><strong>Haiku 4.5, Sonnet 4.5, Opus 4.5</strong></td>
<td><strong>augmented</strong></td>
<td><strong>No</strong></td>
<td><strong>VoT B Ray Trace Visualization</strong></td>
</tr>
<tr class="even">
<td><strong>Haiku 4.5, Sonnet 4.5, Opus 4.5</strong></td>
<td><strong>augmented</strong></td>
<td><strong>No</strong></td>
<td><strong>VoT C Ray Trace Visualization</strong></td>
</tr>
<tr class="odd">
<td><strong>Haiku 4.5, Sonnet 4.5, Opus 4.5</strong></td>
<td><strong>augmented</strong></td>
<td><strong>10K</strong></td>
<td><strong>None</strong></td>
</tr>
<tr class="even">
<td><strong>Haiku 4.5, Sonnet 4.5, Opus 4.5</strong></td>
<td><strong>augmented</strong></td>
<td><strong>10K</strong></td>
<td><strong>VoT A Grid State Tracking</strong></td>
</tr>
<tr class="odd">
<td><strong>Haiku 4.5, Sonnet 4.5, Opus 4.5</strong></td>
<td><strong>augmented</strong></td>
<td><strong>10K</strong></td>
<td><strong>VoT B Ray Trace Visualization</strong></td>
</tr>
<tr class="even">
<td><strong>Haiku 4.5, Sonnet 4.5, Opus 4.5</strong></td>
<td><strong>augmented</strong></td>
<td><strong>10K</strong></td>
<td><strong>VoT B Ray Trace Visualization</strong></td>
</tr>
</tbody>
</table>
<p>Play mode includes all Predict mode factors plus additional factors for hypothesis management:</p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 19%">
<col style="width: 28%">
<col style="width: 51%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Factor</th>
<th style="text-align: left;">Levels</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Model</td>
<td style="text-align: left;">Haiku 4.5, Sonnet 4.5, Opus 4.5</td>
<td style="text-align: left;">Model variant</td>
</tr>
<tr class="even">
<td style="text-align: left;">Prompt Style</td>
<td style="text-align: left;">Baseline, Augmented</td>
<td style="text-align: left;">Human-equivalent vs.&nbsp;detailed strategy guidance</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Include Visualization</td>
<td style="text-align: left;">Yes, No</td>
<td style="text-align: left;">Text board visualization in prompt</td>
</tr>
<tr class="even">
<td style="text-align: left;">Extended Thinking</td>
<td style="text-align: left;">Yes (with budget), No</td>
<td style="text-align: left;">Enable extended thinking with token budget</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Allow Hypotheses</td>
<td style="text-align: left;">Yes, No</td>
<td style="text-align: left;">Enable mark/unmark/check actions for hypothesis tracking</td>
</tr>
<tr class="even">
<td style="text-align: left;">VoT Grid State</td>
<td style="text-align: left;">Yes, No</td>
<td style="text-align: left;">Show current grid state in prompt (VoT Option A)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">VoT Ray Trace</td>
<td style="text-align: left;">Yes, No</td>
<td style="text-align: left;">Include ray trace visualization (VoT Option B)</td>
</tr>
<tr class="even">
<td style="text-align: left;">VoT Hypothesis</td>
<td style="text-align: left;">Yes, No</td>
<td style="text-align: left;">Show hypothesized atom positions (VoT Option C)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Atom Configuration</td>
<td style="text-align: left;">10 fixed configurations</td>
<td style="text-align: left;">Predetermined atom placements for reproducibility</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="atom-configurations" class="level3" data-number="3.5.3">
<h3 data-number="3.5.3" class="anchored" data-anchor-id="atom-configurations"><span class="header-section-number">3.5.3</span> Atom Configurations</h3>
<p>Ten fixed atom configurations are used for reproducible experiments:</p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">Config</th>
<th style="text-align: left;">Pattern</th>
<th style="text-align: left;">Positions</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">Spread</td>
<td style="text-align: left;">(2,3), (3,6), (6,2), (7,7)</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">Cluster in corner</td>
<td style="text-align: left;">(1,1), (1,3), (2,2), (5,6)</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">Diagonal</td>
<td style="text-align: left;">(2,2), (4,4), (6,6), (8,8)</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: left;">Edge-heavy</td>
<td style="text-align: left;">(1,4), (4,8), (8,5), (5,1)</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: left;">Central cluster</td>
<td style="text-align: left;">(3,4), (4,3), (4,5), (5,4)</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td style="text-align: left;">L-shape</td>
<td style="text-align: left;">(2,2), (2,3), (2,4), (4,2)</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7</td>
<td style="text-align: left;">Corners</td>
<td style="text-align: left;">(1,1), (1,8), (8,1), (8,8)</td>
</tr>
<tr class="even">
<td style="text-align: right;">8</td>
<td style="text-align: left;">Asymmetric</td>
<td style="text-align: left;">(2,7), (3,2), (6,5), (7,3)</td>
</tr>
<tr class="odd">
<td style="text-align: right;">9</td>
<td style="text-align: left;">Row cluster</td>
<td style="text-align: left;">(4,2), (4,4), (4,6), (4,8)</td>
</tr>
<tr class="even">
<td style="text-align: right;">10</td>
<td style="text-align: left;">Mixed</td>
<td style="text-align: left;">(1,5), (3,3), (5,7), (8,2)</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="predict-mode-procedure" class="level3" data-number="3.5.4">
<h3 data-number="3.5.4" class="anchored" data-anchor-id="predict-mode-procedure"><span class="header-section-number">3.5.4</span> Predict Mode Procedure</h3>
<p>For each experimental condition (model × prompt style × visualization × thinking × VoT):</p>
<ol type="1">
<li>For each of the 10 fixed atom configurations:
<ol type="a">
<li>For each of 32 possible ray entry points:
<ul>
<li>Present atom positions and ray entry to LLM</li>
<li>Record predicted outcome (exit position, absorption, or reflection)</li>
<li>Compare to ground-truth ray trace</li>
</ul></li>
<li>Compute accuracy metrics for this configuration</li>
</ol></li>
<li>Aggregate accuracy across configurations</li>
</ol>
</section>
<section id="play-mode-procedure" class="level3" data-number="3.5.5">
<h3 data-number="3.5.5" class="anchored" data-anchor-id="play-mode-procedure"><span class="header-section-number">3.5.5</span> Play Mode Procedure</h3>
<p>For each experimental condition (model × prompt style × visualization × thinking × hypotheses × VoT options):</p>
<ol type="1">
<li>For each of the 10 fixed atom configurations:
<ol type="a">
<li>Initialize game with hidden atom positions</li>
<li>LLM selects rays iteratively (max 20)</li>
<li>After each ray, provide outcome feedback</li>
<li>If hypotheses enabled, LLM can mark/unmark suspected positions</li>
<li>LLM submits final guess of 4 atom positions (via guess or check action)</li>
<li>Record: rays used, invalid moves, atoms correct, reasoning trace, thinking</li>
</ol></li>
<li>Aggregate performance metrics across configurations</li>
</ol>
</section>
</section>
<section id="dependent-variables" class="level2" data-number="3.6">
<h2 data-number="3.6" class="anchored" data-anchor-id="dependent-variables"><span class="header-section-number">3.6</span> Dependent Variables</h2>
<section id="predict-mode" class="level3" data-number="3.6.1">
<h3 data-number="3.6.1" class="anchored" data-anchor-id="predict-mode"><span class="header-section-number">3.6.1</span> Predict Mode</h3>
<ul>
<li><strong>Accuracy</strong>: Proportion of rays with correct outcome prediction</li>
<li><strong>Error types</strong>: Absorption/deflection/reflection confusion patterns</li>
<li><strong>Response time</strong>: API response latency (ms)</li>
<li><strong>Token usage</strong>: Input and output tokens per prediction</li>
</ul>
</section>
<section id="play-mode" class="level3" data-number="3.6.2">
<h3 data-number="3.6.2" class="anchored" data-anchor-id="play-mode"><span class="header-section-number">3.6.2</span> Play Mode</h3>
<ul>
<li><strong>Atoms correct</strong>: 0-4 atoms in correct positions</li>
<li><strong>Rays used</strong>: Number of rays before guessing</li>
<li><strong>Invalid moves</strong>: Attempts to fire into used positions</li>
<li><strong>Efficiency</strong>: Atoms correct / rays used</li>
<li><strong>Score</strong>: Game score (lower is better: ray costs + 5 × missed atoms)</li>
<li><strong>Response time</strong>: Total API response time (ms)</li>
<li><strong>Token usage</strong>: Total input and output tokens</li>
</ul>
</section>
<section id="process-measures-from-extended-thinking" class="level3" data-number="3.6.3">
<h3 data-number="3.6.3" class="anchored" data-anchor-id="process-measures-from-extended-thinking"><span class="header-section-number">3.6.3</span> Process Measures (from Extended Thinking)</h3>
<ul>
<li><strong>Thinking traces</strong>: Full extended thinking content when enabled</li>
<li><strong>Reasoning explanations</strong>: Model’s stated reasoning for each action</li>
<li><strong>Hypothesis tracking</strong>: Marked positions over time (when enabled)</li>
<li><strong>Constraint tracking accuracy</strong>: Quality of constraint maintenance</li>
<li><strong>Hypothesis revision patterns</strong>: How beliefs change with new evidence</li>
</ul>
</section>
</section>
<section id="analysis-plan" class="level2" data-number="3.7">
<h2 data-number="3.7" class="anchored" data-anchor-id="analysis-plan"><span class="header-section-number">3.7</span> Analysis Plan</h2>
<section id="statistical-approach" class="level3" data-number="3.7.1">
<h3 data-number="3.7.1" class="anchored" data-anchor-id="statistical-approach"><span class="header-section-number">3.7.1</span> Statistical Approach</h3>
<p>Unlike most LLM benchmarks that report only accuracy rankings, we employ factorial ANOVA with effect size estimation to quantify the unique contribution of each experimental factor. This approach allows us to determine not just <em>which</em> conditions produce better performance, but <em>how much</em> each factor contributes and whether effects depend on problem complexity (interaction effects). While less common in LLM evaluation, this statistical framework is standard in experimental psychology and provides stronger inferences about the mechanisms underlying diagnostic reasoning failures.</p>
<p>We complement ANOVA with regression analysis to provide interpretable effect magnitudes:</p>
<ul>
<li><strong>ANOVA</strong>: Tests omnibus hypotheses (does model matter? does prompt style matter?) and interaction effects</li>
<li><strong>Regression</strong>: Quantifies effect magnitudes (how much does Opus improve over Haiku?) and allows inclusion of continuous covariates (spatial complexity)</li>
<li><strong>Effect sizes</strong>: Standardized metrics (η², Cohen’s d, odds ratios) allow comparison across studies and DVs</li>
</ul>
</section>
<section id="primary-analyses" class="level3" data-number="3.7.2">
<h3 data-number="3.7.2" class="anchored" data-anchor-id="primary-analyses"><span class="header-section-number">3.7.2</span> Primary Analyses</h3>
<ol type="1">
<li><strong>Predict Mode</strong>: Logistic regression with Type III ANOVA on prediction accuracy (binary outcome)</li>
<li><strong>Play Mode</strong>: Linear regression with Type III ANOVA on atoms correct (continuous outcome)</li>
<li><strong>Scaling analysis</strong>: Linear trend across model sizes</li>
<li><strong>Effect modification</strong>: Test whether treatment effects vary with spatial complexity (mean atoms per ray)</li>
</ol>
</section>
<section id="effect-size-interpretation-guidelines" class="level3" data-number="3.7.3">
<h3 data-number="3.7.3" class="anchored" data-anchor-id="effect-size-interpretation-guidelines"><span class="header-section-number">3.7.3</span> Effect Size Interpretation Guidelines</h3>
<p>Following Cohen (1988), we interpret effect sizes using conventional benchmarks:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th>Measure</th>
<th>Small</th>
<th>Medium</th>
<th>Large</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>η² (Eta-squared)</td>
<td>0.01</td>
<td>0.06</td>
<td>0.14</td>
<td>Total variance explained</td>
</tr>
<tr class="even">
<td>η²p (Partial eta-squared)</td>
<td>0.01</td>
<td>0.06</td>
<td>0.14</td>
<td>Variance explained controlling for other factors</td>
</tr>
<tr class="odd">
<td>ω² (Omega-squared)</td>
<td>0.01</td>
<td>0.06</td>
<td>0.14</td>
<td>Unbiased estimate (preferred over η²)</td>
</tr>
<tr class="even">
<td>Cohen’s d</td>
<td>0.20</td>
<td>0.50</td>
<td>0.80</td>
<td>Standardized mean difference</td>
</tr>
<tr class="odd">
<td>Cohen’s f</td>
<td>0.10</td>
<td>0.25</td>
<td>0.40</td>
<td>Effect size for ANOVA (f = √[η²/(1-η²)])</td>
</tr>
<tr class="even">
<td>Cramér’s V</td>
<td>0.10</td>
<td>0.30</td>
<td>0.50</td>
<td>Association strength for categorical variables</td>
</tr>
<tr class="odd">
<td>Odds Ratio</td>
<td>1.5</td>
<td>3.0</td>
<td>9.0</td>
<td>OR = 1 means no effect; &gt; 1 increases odds</td>
</tr>
</tbody>
</table>
<p>Note: These are heuristics, not absolute cutoffs. Practical significance depends on context and cost-benefit considerations.</p>
</section>
<section id="qualitative-analysis" class="level3" data-number="3.7.4">
<h3 data-number="3.7.4" class="anchored" data-anchor-id="qualitative-analysis"><span class="header-section-number">3.7.4</span> Qualitative Analysis</h3>
<p>Systematic coding of extended thinking traces to identify: - Constraint tracking errors - Spatial reasoning errors - Hypothesis generation patterns - Response to contradictory evidence</p>
</section>
<section id="spatial-inferential-decomposition-analysis" class="level3" data-number="3.7.5">
<h3 data-number="3.7.5" class="anchored" data-anchor-id="spatial-inferential-decomposition-analysis"><span class="header-section-number">3.7.5</span> Spatial-Inferential Decomposition Analysis</h3>
<p>To address the concern that spatial reasoning requirements may confound interpretation for non-spatial diagnostic tasks, we employ three complementary analytical strategies:</p>
<p><strong>1. Mode Comparison</strong></p>
<p>Comparing Predict mode (forward reasoning, heavily spatial) to Play mode (full diagnostic loop) performance provides diagnostic information:</p>
<ul>
<li><em>Good Predict + Poor Play</em>: Implicates non-spatial limitations (abductive inference, constraint tracking, experiment design)</li>
<li><em>Poor Predict + Poor Play</em>: Implicates spatial/world model limitations as at least partly responsible</li>
<li><em>Performance delta</em> (Play accuracy conditional on Predict accuracy): Isolates the contribution of inferential machinery</li>
</ul>
<p><strong>2. Spatial Complexity Moderation</strong></p>
<p>We use two complementary measures of spatial complexity:</p>
<ul>
<li><strong>Predict mode</strong>: <em>Cells traveled</em>—the total number of cells a ray traverses (entry cell + internal path + exit cell). This measures path length complexity.</li>
<li><strong>Play mode</strong>: <em>Mean atoms per ray</em>—the average number of atoms affecting each ray’s path in a game. This measures interaction complexity.</li>
</ul>
<p>Moderation analysis tests whether treatment effects (model, prompt style, extended thinking) interact with spatial complexity:</p>
<ul>
<li><em>Constant effects across complexity</em>: Limitations lie in inferential machinery, not spatial processing</li>
<li><em>Effects moderated by complexity</em>: Spatial reasoning contributes to observed failures</li>
</ul>
<p><strong>3. Error Taxonomy from Thinking Traces</strong></p>
<p>We classify errors from extended thinking traces into categories:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th>Error Type</th>
<th>Spatial?</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Ray path error</td>
<td>Yes</td>
<td>Path traced incorrectly through grid</td>
</tr>
<tr class="even">
<td>Deflection geometry error</td>
<td>Yes</td>
<td>Misunderstood deflection rules</td>
</tr>
<tr class="odd">
<td>Constraint tracking error</td>
<td>No</td>
<td>Failed to update ruled-out positions</td>
</tr>
<tr class="even">
<td>Experiment design error</td>
<td>No</td>
<td>Fired uninformative/redundant rays</td>
</tr>
<tr class="odd">
<td>Belief updating error</td>
<td>No</td>
<td>Did not revise hypothesis when contradicted</td>
</tr>
<tr class="even">
<td>Premature commitment</td>
<td>No</td>
<td>Anchored on hypothesis before sufficient evidence</td>
</tr>
</tbody>
</table>
<p>The proportion of spatial vs.&nbsp;non-spatial errors indicates which component capabilities drive overall performance.</p>
</section>
</section>
</section>
<section id="results" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Results</h1>
<section id="predict-mode-results" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="predict-mode-results"><span class="header-section-number">4.1</span> Predict Mode Results</h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load all Predict mode experiment JSON files from Experiment 1/Predict/</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>predict_json_files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">path =</span> <span class="st">"Experiment 1/Predict"</span>,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">.json$"</span>,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">full.names =</span> <span class="cn">TRUE</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Helper function to count cells traveled by a ray</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Entry cell (outside box) + internal path cells + exit cell (outside box)</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>count_ray_cells <span class="ot">&lt;-</span> <span class="cf">function</span>(rayResult) {</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.null</span>(rayResult) <span class="sc">||</span> <span class="fu">is.null</span>(rayResult<span class="sc">$</span>path)) {</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">NA_real_</span>)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>  path <span class="ot">&lt;-</span> rayResult<span class="sc">$</span>path</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.matrix</span>(path) <span class="sc">||</span> <span class="fu">nrow</span>(path) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">NA_real_</span>)</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Start with entry cell (outside box) + all internal path cells</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>  cells <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">+</span> <span class="fu">nrow</span>(path)</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add exit cell (outside box) for rays that exit (not absorbed)</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Absorbed rays have absorbed=TRUE and no exit field</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Deflected/reflected rays have absorbed=FALSE and an exit field</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(rayResult<span class="sc">$</span>absorbed) <span class="sc">&amp;&amp;</span> <span class="sc">!</span>rayResult<span class="sc">$</span>absorbed) {</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>    cells <span class="ot">&lt;-</span> cells <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(cells)</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Helper function: count atoms adjacent (within 1 cell) to any cell in ray path</span></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Note: jsonlite parses arrays as matrices, so atom_config is 4x2 and path is Nx2</span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>count_atoms_affecting <span class="ot">&lt;-</span> <span class="cf">function</span>(path, atom_config) {</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.null</span>(path) <span class="sc">||</span> <span class="fu">length</span>(path) <span class="sc">==</span> <span class="dv">0</span>) <span class="fu">return</span>(<span class="dv">0</span>)</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.matrix</span>(path)) <span class="fu">return</span>(<span class="dv">0</span>)</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>  affected <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>  n_atoms <span class="ot">&lt;-</span> <span class="fu">nrow</span>(atom_config)</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>  n_cells <span class="ot">&lt;-</span> <span class="fu">nrow</span>(path)</span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_len</span>(n_atoms)) {</span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>    atom_row <span class="ot">&lt;-</span> atom_config[i, <span class="dv">1</span>]</span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>    atom_col <span class="ot">&lt;-</span> atom_config[i, <span class="dv">2</span>]</span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (j <span class="cf">in</span> <span class="fu">seq_len</span>(n_cells)) {</span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>      cell_row <span class="ot">&lt;-</span> path[j, <span class="dv">1</span>]</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>      cell_col <span class="ot">&lt;-</span> path[j, <span class="dv">2</span>]</span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="fu">abs</span>(atom_row <span class="sc">-</span> cell_row) <span class="sc">&lt;=</span> <span class="dv">1</span> <span class="sc">&amp;&amp;</span> <span class="fu">abs</span>(atom_col <span class="sc">-</span> cell_col) <span class="sc">&lt;=</span> <span class="dv">1</span>) {</span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>        affected <span class="ot">&lt;-</span> affected <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span>  <span class="co"># Count each atom only once per ray</span></span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>  affected</span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to extract results from a single Predict JSON file</span></span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>extract_predict_results <span class="ot">&lt;-</span> <span class="cf">function</span>(json_file) {</span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(json_file, <span class="at">simplifyDataFrame =</span> <span class="cn">FALSE</span>)</span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract results array</span></span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a>  results <span class="ot">&lt;-</span> data<span class="sc">$</span>results</span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Convert each result to prediction-level rows</span></span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_dfr</span>(results, <span class="cf">function</span>(r) {</span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Each result has a predictions array</span></span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a>    predictions <span class="ot">&lt;-</span> r<span class="sc">$</span>predictions</span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">is.null</span>(predictions) <span class="sc">||</span> <span class="fu">length</span>(predictions) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a>      <span class="fu">return</span>(<span class="fu">tibble</span>())</span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract each prediction</span></span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a>    <span class="fu">map_dfr</span>(predictions, <span class="cf">function</span>(p) {</span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Calculate path complexity metrics</span></span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a>      cells_traveled <span class="ot">&lt;-</span> <span class="fu">count_ray_cells</span>(p<span class="sc">$</span>rayResult)</span>
<span id="cb2-78"><a href="#cb2-78" aria-hidden="true" tabindex="-1"></a>      atoms_affecting <span class="ot">&lt;-</span> <span class="fu">count_atoms_affecting</span>(p<span class="sc">$</span>rayResult<span class="sc">$</span>path, r<span class="sc">$</span>atomConfig)</span>
<span id="cb2-79"><a href="#cb2-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a>      <span class="fu">tibble</span>(</span>
<span id="cb2-81"><a href="#cb2-81" aria-hidden="true" tabindex="-1"></a>        <span class="at">experiment_id =</span> r<span class="sc">$</span>experimentId,</span>
<span id="cb2-82"><a href="#cb2-82" aria-hidden="true" tabindex="-1"></a>        <span class="at">model =</span> r<span class="sc">$</span>model,</span>
<span id="cb2-83"><a href="#cb2-83" aria-hidden="true" tabindex="-1"></a>        <span class="at">model_name =</span> r<span class="sc">$</span>modelName,</span>
<span id="cb2-84"><a href="#cb2-84" aria-hidden="true" tabindex="-1"></a>        <span class="at">prompt_style =</span> r<span class="sc">$</span>promptStyle,</span>
<span id="cb2-85"><a href="#cb2-85" aria-hidden="true" tabindex="-1"></a>        <span class="at">prompt_condition =</span> r<span class="sc">$</span>promptCondition,</span>
<span id="cb2-86"><a href="#cb2-86" aria-hidden="true" tabindex="-1"></a>        <span class="at">config_index =</span> r<span class="sc">$</span>configIndex,</span>
<span id="cb2-87"><a href="#cb2-87" aria-hidden="true" tabindex="-1"></a>        <span class="at">include_visualization =</span> r<span class="sc">$</span>includeVisualization,</span>
<span id="cb2-88"><a href="#cb2-88" aria-hidden="true" tabindex="-1"></a>        <span class="at">enable_thinking =</span> r<span class="sc">$</span>enableThinking,</span>
<span id="cb2-89"><a href="#cb2-89" aria-hidden="true" tabindex="-1"></a>        <span class="at">thinking_budget =</span> r<span class="sc">$</span>thinkingBudget,</span>
<span id="cb2-90"><a href="#cb2-90" aria-hidden="true" tabindex="-1"></a>        <span class="at">vot_ray_trace =</span> r<span class="sc">$</span>votRayTrace,</span>
<span id="cb2-91"><a href="#cb2-91" aria-hidden="true" tabindex="-1"></a>        <span class="at">ray_entry =</span> p<span class="sc">$</span>rayEntry,</span>
<span id="cb2-92"><a href="#cb2-92" aria-hidden="true" tabindex="-1"></a>        <span class="at">predicted =</span> p<span class="sc">$</span>predicted,</span>
<span id="cb2-93"><a href="#cb2-93" aria-hidden="true" tabindex="-1"></a>        <span class="at">actual =</span> p<span class="sc">$</span>actual,</span>
<span id="cb2-94"><a href="#cb2-94" aria-hidden="true" tabindex="-1"></a>        <span class="at">correct =</span> p<span class="sc">$</span>correct,</span>
<span id="cb2-95"><a href="#cb2-95" aria-hidden="true" tabindex="-1"></a>        <span class="at">reasoning =</span> p<span class="sc">$</span>reasoning,</span>
<span id="cb2-96"><a href="#cb2-96" aria-hidden="true" tabindex="-1"></a>        <span class="at">response_time_ms =</span> p<span class="sc">$</span>responseTimeMs,</span>
<span id="cb2-97"><a href="#cb2-97" aria-hidden="true" tabindex="-1"></a>        <span class="at">input_tokens =</span> p<span class="sc">$</span>inputTokens,</span>
<span id="cb2-98"><a href="#cb2-98" aria-hidden="true" tabindex="-1"></a>        <span class="at">output_tokens =</span> p<span class="sc">$</span>outputTokens,</span>
<span id="cb2-99"><a href="#cb2-99" aria-hidden="true" tabindex="-1"></a>        <span class="at">cells_traveled =</span> cells_traveled,</span>
<span id="cb2-100"><a href="#cb2-100" aria-hidden="true" tabindex="-1"></a>        <span class="at">atoms_affecting =</span> atoms_affecting,</span>
<span id="cb2-101"><a href="#cb2-101" aria-hidden="true" tabindex="-1"></a>        <span class="at">source_file =</span> <span class="fu">basename</span>(json_file)</span>
<span id="cb2-102"><a href="#cb2-102" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb2-103"><a href="#cb2-103" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb2-104"><a href="#cb2-104" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb2-105"><a href="#cb2-105" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-106"><a href="#cb2-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-107"><a href="#cb2-107" aria-hidden="true" tabindex="-1"></a><span class="co"># Load all results into a single long-format tibble</span></span>
<span id="cb2-108"><a href="#cb2-108" aria-hidden="true" tabindex="-1"></a>predict_data <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(predict_json_files, extract_predict_results)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Data loaded: 11280 predictions from 8 JSON files.</p>
<ul>
<li><strong>Models</strong>: Haiku 4.5, Sonnet 4.5, Opus 4.5</li>
<li><strong>Prompt styles</strong>: augmented, baseline</li>
<li><strong>Extended thinking</strong>: FALSE, TRUE</li>
<li><strong>VoT ray trace</strong>: FALSE, TRUE</li>
<li><strong>Configurations tested</strong>: 10</li>
<li><strong>Cells traveled range</strong>: 2–13</li>
<li><strong>Atoms affecting range</strong>: 0–3</li>
</ul>
<pre><code>
### Data Completeness Check

**Note on sample size**: Fewer than 32 predictions per configuration is expected due to ray symmetry optimization. When a ray enters at position A and exits at B (detour), the experiment skips testing the reverse direction to avoid redundancy.


::: {.cell}

```{.r .cell-code}
predictions_per_config &lt;- predict_data |&gt;
  group_by(model_name, prompt_style, enable_thinking, vot_ray_trace, config_index) |&gt;
  summarise(n_predictions = n(), .groups = "drop")

# Create matrix: rows = experimental conditions, columns = configurations
# Since all models should have same N per config, take first model's values
predictions_matrix &lt;- predictions_per_config |&gt;
  filter(model_name == first(model_name)) |&gt;
  mutate(
    condition = paste0(
      substr(prompt_style, 1, 3), "_",
      ifelse(enable_thinking, "think", "no"), "_",
      ifelse(vot_ray_trace, "vot", "no")
    )
  ) |&gt;
  select(condition, config_index, n_predictions) |&gt;
  pivot_wider(names_from = config_index, values_from = n_predictions, names_prefix = "cfg_")

kable(predictions_matrix,
      caption = "Predictions per Configuration by Experimental Condition",
      col.names = c("Condition", paste0("Config ", 0:9)))</code></pre>
<div class="cell-output-display">
<table class="caption-top table">
<caption>Predictions per Configuration by Experimental Condition</caption>
<colgroup>
<col style="width: 13%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Condition</th>
<th style="text-align: right;">Config 0</th>
<th style="text-align: right;">Config 1</th>
<th style="text-align: right;">Config 2</th>
<th style="text-align: right;">Config 3</th>
<th style="text-align: right;">Config 4</th>
<th style="text-align: right;">Config 5</th>
<th style="text-align: right;">Config 6</th>
<th style="text-align: right;">Config 7</th>
<th style="text-align: right;">Config 8</th>
<th style="text-align: right;">Config 9</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">aug_no_no</td>
<td style="text-align: right;">46</td>
<td style="text-align: right;">44</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">56</td>
<td style="text-align: right;">36</td>
<td style="text-align: right;">42</td>
<td style="text-align: right;">48</td>
<td style="text-align: right;">46</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">52</td>
</tr>
<tr class="even">
<td style="text-align: left;">aug_no_vot</td>
<td style="text-align: right;">46</td>
<td style="text-align: right;">44</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">56</td>
<td style="text-align: right;">36</td>
<td style="text-align: right;">42</td>
<td style="text-align: right;">48</td>
<td style="text-align: right;">46</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">52</td>
</tr>
<tr class="odd">
<td style="text-align: left;">aug_think_no</td>
<td style="text-align: right;">46</td>
<td style="text-align: right;">44</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">56</td>
<td style="text-align: right;">36</td>
<td style="text-align: right;">42</td>
<td style="text-align: right;">48</td>
<td style="text-align: right;">46</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">52</td>
</tr>
<tr class="even">
<td style="text-align: left;">aug_think_vot</td>
<td style="text-align: right;">46</td>
<td style="text-align: right;">44</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">56</td>
<td style="text-align: right;">36</td>
<td style="text-align: right;">42</td>
<td style="text-align: right;">48</td>
<td style="text-align: right;">46</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">52</td>
</tr>
<tr class="odd">
<td style="text-align: left;">bas_no_no</td>
<td style="text-align: right;">46</td>
<td style="text-align: right;">44</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">56</td>
<td style="text-align: right;">36</td>
<td style="text-align: right;">42</td>
<td style="text-align: right;">48</td>
<td style="text-align: right;">46</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">52</td>
</tr>
<tr class="even">
<td style="text-align: left;">bas_no_vot</td>
<td style="text-align: right;">46</td>
<td style="text-align: right;">44</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">56</td>
<td style="text-align: right;">36</td>
<td style="text-align: right;">42</td>
<td style="text-align: right;">48</td>
<td style="text-align: right;">46</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">52</td>
</tr>
<tr class="odd">
<td style="text-align: left;">bas_think_no</td>
<td style="text-align: right;">46</td>
<td style="text-align: right;">44</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">56</td>
<td style="text-align: right;">36</td>
<td style="text-align: right;">42</td>
<td style="text-align: right;">48</td>
<td style="text-align: right;">46</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">52</td>
</tr>
<tr class="even">
<td style="text-align: left;">bas_think_vot</td>
<td style="text-align: right;">46</td>
<td style="text-align: right;">44</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">56</td>
<td style="text-align: right;">36</td>
<td style="text-align: right;">42</td>
<td style="text-align: right;">48</td>
<td style="text-align: right;">46</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">52</td>
</tr>
</tbody>
</table>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check for consistent N across models within each condition</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>consistency <span class="ot">&lt;-</span> predictions_per_config <span class="sc">|&gt;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(prompt_style, enable_thinking, vot_ray_trace, config_index) <span class="sc">|&gt;</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_unique =</span> <span class="fu">n_distinct</span>(n_predictions),</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">min_n =</span> <span class="fu">min</span>(n_predictions),</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_n =</span> <span class="fu">max</span>(n_predictions),</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Check for duplicate runs (same condition run multiple times)</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>runs_per_condition <span class="ot">&lt;-</span> predict_data <span class="sc">|&gt;</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(prompt_style, enable_thinking, vot_ray_trace, model_name, config_index) <span class="sc">|&gt;</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n_runs =</span> <span class="fu">n_distinct</span>(source_file), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<p>:::</p>
<p><strong>Consistency</strong>: All models have consistent N per configuration within each condition.</p>
<p><strong>Duplicate runs</strong>: No duplicate runs detected.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary statistics by all experimental factors</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>predict_summary <span class="ot">&lt;-</span> predict_data <span class="sc">|&gt;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(model_name, prompt_style, enable_thinking, vot_ray_trace) <span class="sc">|&gt;</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_correct =</span> <span class="fu">sum</span>(correct),</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">accuracy =</span> <span class="fu">mean</span>(correct),</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">accuracy_se =</span> <span class="fu">sqrt</span>(accuracy <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> accuracy) <span class="sc">/</span> n),</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_response_time =</span> <span class="fu">mean</span>(response_time_ms, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">c</span>(n, n_correct), \(x) <span class="fu">round</span>(x, <span class="dv">3</span>)))</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(predict_summary,</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Model"</span>, <span class="st">"Prompt"</span>, <span class="st">"Thinking"</span>, <span class="st">"VoT Ray"</span>, <span class="st">"N"</span>, <span class="st">"Correct"</span>,</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"Accuracy"</span>, <span class="st">"SE"</span>, <span class="st">"Response Time (ms)"</span>),</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">caption =</span> <span class="st">"Predict Mode Performance by Experimental Condition"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Predict Mode Performance by Experimental Condition</caption>
<colgroup>
<col style="width: 13%">
<col style="width: 11%">
<col style="width: 10%">
<col style="width: 9%">
<col style="width: 4%">
<col style="width: 9%">
<col style="width: 10%">
<col style="width: 7%">
<col style="width: 22%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Model</th>
<th style="text-align: left;">Prompt</th>
<th style="text-align: left;">Thinking</th>
<th style="text-align: left;">VoT Ray</th>
<th style="text-align: right;">N</th>
<th style="text-align: right;">Correct</th>
<th style="text-align: right;">Accuracy</th>
<th style="text-align: right;">SE</th>
<th style="text-align: right;">Response Time (ms)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Haiku 4.5</td>
<td style="text-align: left;">augmented</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">470</td>
<td style="text-align: right;">352</td>
<td style="text-align: right;">0.749</td>
<td style="text-align: right;">0.020</td>
<td style="text-align: right;">10740.27</td>
</tr>
<tr class="even">
<td style="text-align: left;">Haiku 4.5</td>
<td style="text-align: left;">augmented</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">470</td>
<td style="text-align: right;">384</td>
<td style="text-align: right;">0.817</td>
<td style="text-align: right;">0.018</td>
<td style="text-align: right;">12758.47</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Haiku 4.5</td>
<td style="text-align: left;">augmented</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">470</td>
<td style="text-align: right;">426</td>
<td style="text-align: right;">0.906</td>
<td style="text-align: right;">0.013</td>
<td style="text-align: right;">20242.76</td>
</tr>
<tr class="even">
<td style="text-align: left;">Haiku 4.5</td>
<td style="text-align: left;">augmented</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">470</td>
<td style="text-align: right;">450</td>
<td style="text-align: right;">0.957</td>
<td style="text-align: right;">0.009</td>
<td style="text-align: right;">23141.35</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Haiku 4.5</td>
<td style="text-align: left;">baseline</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">470</td>
<td style="text-align: right;">270</td>
<td style="text-align: right;">0.574</td>
<td style="text-align: right;">0.023</td>
<td style="text-align: right;">11026.42</td>
</tr>
<tr class="even">
<td style="text-align: left;">Haiku 4.5</td>
<td style="text-align: left;">baseline</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">470</td>
<td style="text-align: right;">202</td>
<td style="text-align: right;">0.430</td>
<td style="text-align: right;">0.023</td>
<td style="text-align: right;">10449.00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Haiku 4.5</td>
<td style="text-align: left;">baseline</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">470</td>
<td style="text-align: right;">288</td>
<td style="text-align: right;">0.613</td>
<td style="text-align: right;">0.022</td>
<td style="text-align: right;">39523.49</td>
</tr>
<tr class="even">
<td style="text-align: left;">Haiku 4.5</td>
<td style="text-align: left;">baseline</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">470</td>
<td style="text-align: right;">366</td>
<td style="text-align: right;">0.779</td>
<td style="text-align: right;">0.019</td>
<td style="text-align: right;">66692.71</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Opus 4.5</td>
<td style="text-align: left;">augmented</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">470</td>
<td style="text-align: right;">384</td>
<td style="text-align: right;">0.817</td>
<td style="text-align: right;">0.018</td>
<td style="text-align: right;">10909.51</td>
</tr>
<tr class="even">
<td style="text-align: left;">Opus 4.5</td>
<td style="text-align: left;">augmented</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">470</td>
<td style="text-align: right;">388</td>
<td style="text-align: right;">0.826</td>
<td style="text-align: right;">0.018</td>
<td style="text-align: right;">12618.99</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Opus 4.5</td>
<td style="text-align: left;">augmented</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">470</td>
<td style="text-align: right;">440</td>
<td style="text-align: right;">0.936</td>
<td style="text-align: right;">0.011</td>
<td style="text-align: right;">20568.46</td>
</tr>
<tr class="even">
<td style="text-align: left;">Opus 4.5</td>
<td style="text-align: left;">augmented</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">470</td>
<td style="text-align: right;">440</td>
<td style="text-align: right;">0.936</td>
<td style="text-align: right;">0.011</td>
<td style="text-align: right;">23033.41</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Opus 4.5</td>
<td style="text-align: left;">baseline</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">470</td>
<td style="text-align: right;">266</td>
<td style="text-align: right;">0.566</td>
<td style="text-align: right;">0.023</td>
<td style="text-align: right;">11015.83</td>
</tr>
<tr class="even">
<td style="text-align: left;">Opus 4.5</td>
<td style="text-align: left;">baseline</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">470</td>
<td style="text-align: right;">216</td>
<td style="text-align: right;">0.460</td>
<td style="text-align: right;">0.023</td>
<td style="text-align: right;">10431.12</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Opus 4.5</td>
<td style="text-align: left;">baseline</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">470</td>
<td style="text-align: right;">298</td>
<td style="text-align: right;">0.634</td>
<td style="text-align: right;">0.022</td>
<td style="text-align: right;">40646.76</td>
</tr>
<tr class="even">
<td style="text-align: left;">Opus 4.5</td>
<td style="text-align: left;">baseline</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">470</td>
<td style="text-align: right;">368</td>
<td style="text-align: right;">0.783</td>
<td style="text-align: right;">0.019</td>
<td style="text-align: right;">69663.18</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Sonnet 4.5</td>
<td style="text-align: left;">augmented</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">470</td>
<td style="text-align: right;">366</td>
<td style="text-align: right;">0.779</td>
<td style="text-align: right;">0.019</td>
<td style="text-align: right;">10893.54</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sonnet 4.5</td>
<td style="text-align: left;">augmented</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">470</td>
<td style="text-align: right;">400</td>
<td style="text-align: right;">0.851</td>
<td style="text-align: right;">0.016</td>
<td style="text-align: right;">12927.71</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Sonnet 4.5</td>
<td style="text-align: left;">augmented</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">470</td>
<td style="text-align: right;">448</td>
<td style="text-align: right;">0.953</td>
<td style="text-align: right;">0.010</td>
<td style="text-align: right;">20636.58</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sonnet 4.5</td>
<td style="text-align: left;">augmented</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">470</td>
<td style="text-align: right;">450</td>
<td style="text-align: right;">0.957</td>
<td style="text-align: right;">0.009</td>
<td style="text-align: right;">23033.25</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Sonnet 4.5</td>
<td style="text-align: left;">baseline</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">470</td>
<td style="text-align: right;">278</td>
<td style="text-align: right;">0.591</td>
<td style="text-align: right;">0.023</td>
<td style="text-align: right;">11023.54</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sonnet 4.5</td>
<td style="text-align: left;">baseline</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">470</td>
<td style="text-align: right;">216</td>
<td style="text-align: right;">0.460</td>
<td style="text-align: right;">0.023</td>
<td style="text-align: right;">10322.60</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Sonnet 4.5</td>
<td style="text-align: left;">baseline</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">470</td>
<td style="text-align: right;">292</td>
<td style="text-align: right;">0.621</td>
<td style="text-align: right;">0.022</td>
<td style="text-align: right;">41686.14</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sonnet 4.5</td>
<td style="text-align: left;">baseline</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">470</td>
<td style="text-align: right;">370</td>
<td style="text-align: right;">0.787</td>
<td style="text-align: right;">0.019</td>
<td style="text-align: right;">68985.51</td>
</tr>
</tbody>
</table>
</div>
</div>
<section id="predict-mode-leaderboard" class="level3" data-number="4.1.1">
<h3 data-number="4.1.1" class="anchored" data-anchor-id="predict-mode-leaderboard"><span class="header-section-number">4.1.1</span> Predict Mode Leaderboard</h3>
<p>Top 10 configurations by overall accuracy. Format matches typical LLM benchmark reporting for cross-study comparison.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>leaderboard_predict <span class="ot">&lt;-</span> predict_data <span class="sc">|&gt;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">condition =</span> <span class="fu">paste0</span>(</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>      model_name, <span class="st">" | "</span>,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ifelse</span>(prompt_style <span class="sc">==</span> <span class="st">"augmented"</span>, <span class="st">"Aug"</span>, <span class="st">"Base"</span>), <span class="st">" | "</span>,</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ifelse</span>(enable_thinking, <span class="st">"Think"</span>, <span class="st">"No-Think"</span>), <span class="st">" | "</span>,</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ifelse</span>(vot_ray_trace, <span class="st">"VoT"</span>, <span class="st">"No-VoT"</span>)</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(condition, model_name, prompt_style, enable_thinking, vot_ray_trace) <span class="sc">|&gt;</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">accuracy =</span> <span class="fu">mean</span>(correct),</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">ci_lower =</span> accuracy <span class="sc">-</span> <span class="fl">1.96</span> <span class="sc">*</span> <span class="fu">sqrt</span>(accuracy <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> accuracy) <span class="sc">/</span> n),</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">ci_upper =</span> accuracy <span class="sc">+</span> <span class="fl">1.96</span> <span class="sc">*</span> <span class="fu">sqrt</span>(accuracy <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> accuracy) <span class="sc">/</span> n),</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(accuracy)) <span class="sc">|&gt;</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">rank =</span> <span class="fu">row_number</span>(),</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">accuracy_pct =</span> <span class="fu">paste0</span>(<span class="fu">round</span>(accuracy <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>), <span class="st">"%"</span>),</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">ci_95 =</span> <span class="fu">paste0</span>(<span class="st">"["</span>, <span class="fu">round</span>(ci_lower <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>), <span class="st">"%, "</span>, <span class="fu">round</span>(ci_upper <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>), <span class="st">"%]"</span>)</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(rank, condition, accuracy_pct, ci_95, n) <span class="sc">|&gt;</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(leaderboard_predict,</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Rank"</span>, <span class="st">"Configuration"</span>, <span class="st">"Accuracy"</span>, <span class="st">"95% CI"</span>, <span class="st">"N"</span>),</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>      <span class="at">caption =</span> <span class="st">"Predict Mode Leaderboard (Top 10 Configurations)"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Predict Mode Leaderboard (Top 10 Configurations)</caption>
<colgroup>
<col style="width: 6%">
<col style="width: 60%">
<col style="width: 10%">
<col style="width: 18%">
<col style="width: 4%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">Rank</th>
<th style="text-align: left;">Configuration</th>
<th style="text-align: left;">Accuracy</th>
<th style="text-align: left;">95% CI</th>
<th style="text-align: right;">N</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">Haiku 4.5 | Aug | Think | VoT</td>
<td style="text-align: left;">95.7%</td>
<td style="text-align: left;">[93.9%, 97.6%]</td>
<td style="text-align: right;">470</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">Sonnet 4.5 | Aug | Think | VoT</td>
<td style="text-align: left;">95.7%</td>
<td style="text-align: left;">[93.9%, 97.6%]</td>
<td style="text-align: right;">470</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">Sonnet 4.5 | Aug | Think | No-VoT</td>
<td style="text-align: left;">95.3%</td>
<td style="text-align: left;">[93.4%, 97.2%]</td>
<td style="text-align: right;">470</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: left;">Opus 4.5 | Aug | Think | No-VoT</td>
<td style="text-align: left;">93.6%</td>
<td style="text-align: left;">[91.4%, 95.8%]</td>
<td style="text-align: right;">470</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: left;">Opus 4.5 | Aug | Think | VoT</td>
<td style="text-align: left;">93.6%</td>
<td style="text-align: left;">[91.4%, 95.8%]</td>
<td style="text-align: right;">470</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td style="text-align: left;">Haiku 4.5 | Aug | Think | No-VoT</td>
<td style="text-align: left;">90.6%</td>
<td style="text-align: left;">[88%, 93.3%]</td>
<td style="text-align: right;">470</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7</td>
<td style="text-align: left;">Sonnet 4.5 | Aug | No-Think | VoT</td>
<td style="text-align: left;">85.1%</td>
<td style="text-align: left;">[81.9%, 88.3%]</td>
<td style="text-align: right;">470</td>
</tr>
<tr class="even">
<td style="text-align: right;">8</td>
<td style="text-align: left;">Opus 4.5 | Aug | No-Think | VoT</td>
<td style="text-align: left;">82.6%</td>
<td style="text-align: left;">[79.1%, 86%]</td>
<td style="text-align: right;">470</td>
</tr>
<tr class="odd">
<td style="text-align: right;">9</td>
<td style="text-align: left;">Haiku 4.5 | Aug | No-Think | VoT</td>
<td style="text-align: left;">81.7%</td>
<td style="text-align: left;">[78.2%, 85.2%]</td>
<td style="text-align: right;">470</td>
</tr>
<tr class="even">
<td style="text-align: right;">10</td>
<td style="text-align: left;">Opus 4.5 | Aug | No-Think | No-VoT</td>
<td style="text-align: left;">81.7%</td>
<td style="text-align: left;">[78.2%, 85.2%]</td>
<td style="text-align: right;">470</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="forest-plot-all-configurations" class="level3" data-number="4.1.2">
<h3 data-number="4.1.2" class="anchored" data-anchor-id="forest-plot-all-configurations"><span class="header-section-number">4.1.2</span> Forest Plot: All Configurations</h3>
<p>Visual comparison of all experimental factor combinations. Non-overlapping confidence intervals suggest statistically significant differences.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate accuracy and 95% CI for all configurations</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>forest_data <span class="ot">&lt;-</span> predict_data <span class="sc">|&gt;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create readable configuration labels</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">config_label =</span> <span class="fu">paste0</span>(</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>      model_name, <span class="st">" | "</span>,</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ifelse</span>(prompt_style <span class="sc">==</span> <span class="st">"augmented"</span>, <span class="st">"Aug"</span>, <span class="st">"Base"</span>), <span class="st">" | "</span>,</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ifelse</span>(enable_thinking, <span class="st">"Think"</span>, <span class="st">"No-Think"</span>), <span class="st">" | "</span>,</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ifelse</span>(vot_ray_trace, <span class="st">"VoT"</span>, <span class="st">"No-VoT"</span>)</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(config_label, model_name, prompt_style, enable_thinking, vot_ray_trace) <span class="sc">|&gt;</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">accuracy =</span> <span class="fu">mean</span>(correct),</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 95% CI for proportion using normal approximation</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">ci_lower =</span> accuracy <span class="sc">-</span> <span class="fl">1.96</span> <span class="sc">*</span> <span class="fu">sqrt</span>(accuracy <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> accuracy) <span class="sc">/</span> n),</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">ci_upper =</span> accuracy <span class="sc">+</span> <span class="fl">1.96</span> <span class="sc">*</span> <span class="fu">sqrt</span>(accuracy <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> accuracy) <span class="sc">/</span> n),</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Order by accuracy (highest first)</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(accuracy)) <span class="sc">|&gt;</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create ordered factor for plotting</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">config_label =</span> <span class="fu">factor</span>(config_label, <span class="at">levels =</span> config_label)</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Forest plot</span></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>p_forest <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(forest_data, <span class="fu">aes</span>(<span class="at">x =</span> accuracy, <span class="at">y =</span> config_label)) <span class="sc">+</span></span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> model_name), <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbarh</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> ci_lower, <span class="at">xmax =</span> ci_upper, <span class="at">color =</span> model_name),</span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>                 <span class="at">height =</span> <span class="fl">0.3</span>, <span class="at">linewidth =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fl">0.5</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"gray50"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">paste0</span>(<span class="fu">round</span>(accuracy <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>), <span class="st">"%"</span>)),</span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>            <span class="at">hjust =</span> <span class="sc">-</span><span class="fl">0.3</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Predict Mode: All Configurations Ranked by Accuracy"</span>,</span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Error bars show 95% confidence intervals. Non-overlapping CIs suggest significant differences."</span>,</span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Accuracy"</span>,</span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Configuration"</span>,</span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Model"</span></span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(</span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>),</span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> scales<span class="sc">::</span>percent,</span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.1</span>)</span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">11</span>) <span class="sc">+</span></span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">9</span>, <span class="at">family =</span> <span class="st">"mono"</span>),</span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"top"</span></span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-56"><a href="#cb7-56" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p_forest)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="blackbox_llm_study_files/figure-html/predict-forest-plot-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<p><strong>Total configurations</strong>: 24 <strong>Best performing</strong>: Haiku 4.5 | Aug | Think | VoT <strong>Accuracy</strong>: 95.7% (95% CI: [93.9%, 97.6%])</p>
</section>
<section id="factor-level-comparisons" class="level3" data-number="4.1.3">
<h3 data-number="4.1.3" class="anchored" data-anchor-id="factor-level-comparisons"><span class="header-section-number">4.1.3</span> Factor-Level Comparisons</h3>
<p>Shows accuracy by individual factors, collapsing across other dimensions (marginal effects).</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate marginal effects for each factor</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>factor_data <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Model =</span> predict_data <span class="sc">|&gt;</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(model_name) <span class="sc">|&gt;</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">accuracy =</span> <span class="fu">mean</span>(correct),</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">ci_lower =</span> accuracy <span class="sc">-</span> <span class="fl">1.96</span> <span class="sc">*</span> <span class="fu">sqrt</span>(accuracy <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> accuracy) <span class="sc">/</span> n),</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">ci_upper =</span> accuracy <span class="sc">+</span> <span class="fl">1.96</span> <span class="sc">*</span> <span class="fu">sqrt</span>(accuracy <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> accuracy) <span class="sc">/</span> n)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">factor =</span> <span class="st">"Model"</span>, <span class="at">level =</span> model_name),</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">Prompt =</span> predict_data <span class="sc">|&gt;</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(prompt_style) <span class="sc">|&gt;</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">accuracy =</span> <span class="fu">mean</span>(correct),</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">ci_lower =</span> accuracy <span class="sc">-</span> <span class="fl">1.96</span> <span class="sc">*</span> <span class="fu">sqrt</span>(accuracy <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> accuracy) <span class="sc">/</span> n),</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">ci_upper =</span> accuracy <span class="sc">+</span> <span class="fl">1.96</span> <span class="sc">*</span> <span class="fu">sqrt</span>(accuracy <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> accuracy) <span class="sc">/</span> n)</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">factor =</span> <span class="st">"Prompt"</span>, <span class="at">level =</span> prompt_style),</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">Thinking =</span> predict_data <span class="sc">|&gt;</span></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(enable_thinking) <span class="sc">|&gt;</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>      <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>      <span class="at">accuracy =</span> <span class="fu">mean</span>(correct),</span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>      <span class="at">ci_lower =</span> accuracy <span class="sc">-</span> <span class="fl">1.96</span> <span class="sc">*</span> <span class="fu">sqrt</span>(accuracy <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> accuracy) <span class="sc">/</span> n),</span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>      <span class="at">ci_upper =</span> accuracy <span class="sc">+</span> <span class="fl">1.96</span> <span class="sc">*</span> <span class="fu">sqrt</span>(accuracy <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> accuracy) <span class="sc">/</span> n)</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">factor =</span> <span class="st">"Extended Thinking"</span>, <span class="at">level =</span> <span class="fu">ifelse</span>(enable_thinking, <span class="st">"Enabled"</span>, <span class="st">"Disabled"</span>)),</span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">VoT =</span> predict_data <span class="sc">|&gt;</span></span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(vot_ray_trace) <span class="sc">|&gt;</span></span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>      <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>      <span class="at">accuracy =</span> <span class="fu">mean</span>(correct),</span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a>      <span class="at">ci_lower =</span> accuracy <span class="sc">-</span> <span class="fl">1.96</span> <span class="sc">*</span> <span class="fu">sqrt</span>(accuracy <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> accuracy) <span class="sc">/</span> n),</span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a>      <span class="at">ci_upper =</span> accuracy <span class="sc">+</span> <span class="fl">1.96</span> <span class="sc">*</span> <span class="fu">sqrt</span>(accuracy <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> accuracy) <span class="sc">/</span> n)</span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">factor =</span> <span class="st">"VoT Ray Trace"</span>, <span class="at">level =</span> <span class="fu">ifelse</span>(vot_ray_trace, <span class="st">"Enabled"</span>, <span class="st">"Disabled"</span>))</span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span></span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>() <span class="sc">|&gt;</span></span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">factor =</span> <span class="fu">factor</span>(factor, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Model"</span>, <span class="st">"Prompt"</span>, <span class="st">"Extended Thinking"</span>, <span class="st">"VoT Ray Trace"</span>)))</span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-46"><a href="#cb8-46" aria-hidden="true" tabindex="-1"></a><span class="co"># Factor comparison plot</span></span>
<span id="cb8-47"><a href="#cb8-47" aria-hidden="true" tabindex="-1"></a>p_factors <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(factor_data, <span class="fu">aes</span>(<span class="at">x =</span> accuracy, <span class="at">y =</span> level)) <span class="sc">+</span></span>
<span id="cb8-48"><a href="#cb8-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>, <span class="at">color =</span> <span class="st">"#2C3E50"</span>) <span class="sc">+</span></span>
<span id="cb8-49"><a href="#cb8-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbarh</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> ci_lower, <span class="at">xmax =</span> ci_upper),</span>
<span id="cb8-50"><a href="#cb8-50" aria-hidden="true" tabindex="-1"></a>                 <span class="at">height =</span> <span class="fl">0.2</span>, <span class="at">linewidth =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"#2C3E50"</span>) <span class="sc">+</span></span>
<span id="cb8-51"><a href="#cb8-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">paste0</span>(<span class="fu">round</span>(accuracy <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>), <span class="st">"%"</span>)),</span>
<span id="cb8-52"><a href="#cb8-52" aria-hidden="true" tabindex="-1"></a>            <span class="at">hjust =</span> <span class="sc">-</span><span class="fl">0.3</span>, <span class="at">size =</span> <span class="fl">3.5</span>) <span class="sc">+</span></span>
<span id="cb8-53"><a href="#cb8-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>factor, <span class="at">ncol =</span> <span class="dv">1</span>, <span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span></span>
<span id="cb8-54"><a href="#cb8-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb8-55"><a href="#cb8-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Main Effects: Accuracy by Individual Factors"</span>,</span>
<span id="cb8-56"><a href="#cb8-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Marginal effects averaging across all other factors"</span>,</span>
<span id="cb8-57"><a href="#cb8-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Accuracy"</span>,</span>
<span id="cb8-58"><a href="#cb8-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="cn">NULL</span></span>
<span id="cb8-59"><a href="#cb8-59" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb8-60"><a href="#cb8-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(</span>
<span id="cb8-61"><a href="#cb8-61" aria-hidden="true" tabindex="-1"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>),</span>
<span id="cb8-62"><a href="#cb8-62" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> scales<span class="sc">::</span>percent,</span>
<span id="cb8-63"><a href="#cb8-63" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.1</span>)</span>
<span id="cb8-64"><a href="#cb8-64" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb8-65"><a href="#cb8-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">12</span>) <span class="sc">+</span></span>
<span id="cb8-66"><a href="#cb8-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb8-67"><a href="#cb8-67" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb8-68"><a href="#cb8-68" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb8-69"><a href="#cb8-69" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>()</span>
<span id="cb8-70"><a href="#cb8-70" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb8-71"><a href="#cb8-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-72"><a href="#cb8-72" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p_factors)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="blackbox_llm_study_files/figure-html/predict-factor-comparisons-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Accuracy by configuration to assess difficulty variation</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>predict_by_config <span class="ot">&lt;-</span> predict_data <span class="sc">|&gt;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(config_index, model_name) <span class="sc">|&gt;</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">accuracy =</span> <span class="fu">mean</span>(correct),</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> model_name, <span class="at">values_from =</span> accuracy) <span class="sc">|&gt;</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric) <span class="sc">&amp;</span> <span class="sc">!</span>config_index, \(x) <span class="fu">round</span>(x, <span class="dv">3</span>)))</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(predict_by_config,</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">caption =</span> <span class="st">"Prediction Accuracy by Configuration and Model"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Prediction Accuracy by Configuration and Model</caption>
<thead>
<tr class="header">
<th style="text-align: right;">config_index</th>
<th style="text-align: right;">n</th>
<th style="text-align: right;">Haiku 4.5</th>
<th style="text-align: right;">Opus 4.5</th>
<th style="text-align: right;">Sonnet 4.5</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">368</td>
<td style="text-align: right;">0.636</td>
<td style="text-align: right;">0.614</td>
<td style="text-align: right;">0.652</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">352</td>
<td style="text-align: right;">0.761</td>
<td style="text-align: right;">0.733</td>
<td style="text-align: right;">0.767</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">400</td>
<td style="text-align: right;">0.740</td>
<td style="text-align: right;">0.810</td>
<td style="text-align: right;">0.770</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">448</td>
<td style="text-align: right;">0.701</td>
<td style="text-align: right;">0.692</td>
<td style="text-align: right;">0.692</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: right;">288</td>
<td style="text-align: right;">0.722</td>
<td style="text-align: right;">0.771</td>
<td style="text-align: right;">0.771</td>
</tr>
<tr class="even">
<td style="text-align: right;">5</td>
<td style="text-align: right;">336</td>
<td style="text-align: right;">0.792</td>
<td style="text-align: right;">0.827</td>
<td style="text-align: right;">0.845</td>
</tr>
<tr class="odd">
<td style="text-align: right;">6</td>
<td style="text-align: right;">384</td>
<td style="text-align: right;">0.839</td>
<td style="text-align: right;">0.833</td>
<td style="text-align: right;">0.844</td>
</tr>
<tr class="even">
<td style="text-align: right;">7</td>
<td style="text-align: right;">368</td>
<td style="text-align: right;">0.625</td>
<td style="text-align: right;">0.696</td>
<td style="text-align: right;">0.663</td>
</tr>
<tr class="odd">
<td style="text-align: right;">8</td>
<td style="text-align: right;">400</td>
<td style="text-align: right;">0.760</td>
<td style="text-align: right;">0.780</td>
<td style="text-align: right;">0.795</td>
</tr>
<tr class="even">
<td style="text-align: right;">9</td>
<td style="text-align: right;">416</td>
<td style="text-align: right;">0.712</td>
<td style="text-align: right;">0.707</td>
<td style="text-align: right;">0.721</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="anova-prediction-accuracy" class="level3" data-number="4.1.4">
<h3 data-number="4.1.4" class="anchored" data-anchor-id="anova-prediction-accuracy"><span class="header-section-number">4.1.4</span> ANOVA: Prediction Accuracy</h3>
<p>This analysis uses mixed-effects logistic regression to test whether experimental factors significantly affect prediction accuracy, while accounting for clustering within configurations and individual rays.</p>
<p><strong>Model specification</strong>: - <strong>Outcome</strong>: Correct prediction (binary: 0/1) - <strong>Fixed effects</strong>: Model, prompt style, extended thinking, VoT ray trace, and their interactions - <strong>Covariates</strong>: cells_traveled (path length), atoms_affecting (atom density) - <strong>Random effects</strong>: Nested structure with config_index (configuration-level) and ray_id nested within config (ray-level)</p>
<p><strong>Why nested random effects?</strong></p>
<ul>
<li><strong>Configuration-level (config_index)</strong>: Accounts for overall difficulty due to specific atom placements; allows generalization beyond these 10 configurations</li>
<li><strong>Ray-level (ray_id:config_index)</strong>: Accounts for individual ray difficulty; handles correlation when the same ray is tested across multiple experimental conditions</li>
<li><strong>Why nested?</strong>: ray_id “NORTH_3” represents different physical rays across configurations (different atom placements), so must be nested, not crossed</li>
</ul>
<p><strong>Covariates</strong> (cells_traveled, atoms_affecting) are <strong>NOT confounders</strong> (same rays tested across all conditions) but <strong>ARE precision variables</strong> that explain variance and improve statistical power.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert factors for ANOVA</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>predict_data <span class="ot">&lt;-</span> predict_data <span class="sc">|&gt;</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_name =</span> <span class="fu">factor</span>(model_name, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Haiku 4.5"</span>, <span class="st">"Sonnet 4.5"</span>, <span class="st">"Opus 4.5"</span>)),</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">prompt_style =</span> <span class="fu">factor</span>(prompt_style, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"baseline"</span>, <span class="st">"augmented"</span>)),</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">enable_thinking =</span> <span class="fu">factor</span>(enable_thinking, <span class="at">levels =</span> <span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">TRUE</span>)),</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">vot_ray_trace =</span> <span class="fu">factor</span>(vot_ray_trace, <span class="at">levels =</span> <span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">TRUE</span>)),</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">config_index =</span> <span class="fu">factor</span>(config_index),</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create unique ray identifier (nested within config)</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">ray_id =</span> <span class="fu">paste</span>(<span class="fu">toupper</span>(ray_entry<span class="sc">$</span>side), ray_entry<span class="sc">$</span>pos, <span class="at">sep =</span> <span class="st">"_"</span>)</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Build model formula dynamically based on available factor levels</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>has_model_var <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(predict_data<span class="sc">$</span>model_name)) <span class="sc">&gt;</span> <span class="dv">1</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>has_prompt_var <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(predict_data<span class="sc">$</span>prompt_style)) <span class="sc">&gt;</span> <span class="dv">1</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>has_thinking_var <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(predict_data<span class="sc">$</span>enable_thinking)) <span class="sc">&gt;</span> <span class="dv">1</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>has_vot_var <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(predict_data<span class="sc">$</span>vot_ray_trace)) <span class="sc">&gt;</span> <span class="dv">1</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Build formula components</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>formula_parts <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (has_model_var) formula_parts <span class="ot">&lt;-</span> <span class="fu">c</span>(formula_parts, <span class="st">"model_name"</span>)</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (has_prompt_var) formula_parts <span class="ot">&lt;-</span> <span class="fu">c</span>(formula_parts, <span class="st">"prompt_style"</span>)</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (has_thinking_var) formula_parts <span class="ot">&lt;-</span> <span class="fu">c</span>(formula_parts, <span class="st">"enable_thinking"</span>)</span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Add interactions only if all three main effects are present</span></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (has_model_var <span class="sc">&amp;&amp;</span> has_prompt_var <span class="sc">&amp;&amp;</span> has_thinking_var) {</span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>  main_formula <span class="ot">&lt;-</span> <span class="st">"model_name * prompt_style * enable_thinking"</span></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>  main_formula <span class="ot">&lt;-</span> <span class="fu">paste</span>(formula_parts, <span class="at">collapse =</span> <span class="st">" + "</span>)</span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Add VoT if it varies</span></span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (has_vot_var) {</span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a>  full_formula <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"correct ~ "</span>, main_formula, <span class="st">" + vot_ray_trace + cells_traveled + atoms_affecting + (1 | config_index/ray_id)"</span>)</span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a>  full_formula <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"correct ~ "</span>, main_formula, <span class="st">" + cells_traveled + atoms_affecting + (1 | config_index/ray_id)"</span>)</span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a>model_predict <span class="ot">&lt;-</span> <span class="fu">glmer</span>(<span class="fu">as.formula</span>(full_formula),</span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a>                       <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>),</span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a>                       <span class="at">data =</span> predict_data,</span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a>                       <span class="at">control =</span> <span class="fu">glmerControl</span>(<span class="at">optimizer =</span> <span class="st">"bobyqa"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p><strong>Model formula</strong>: correct ~ model_name * prompt_style * enable_thinking + vot_ray_trace + cells_traveled + atoms_affecting + (1 | config_index/ray_id)</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Deviance Table (Type III Wald chisquare tests)

Response: correct
                                           Chisq Df Pr(&gt;Chisq)    
(Intercept)                              39.9101  1  2.659e-10 ***
model_name                                1.1597  2  0.5599818    
prompt_style                             73.8679  1  &lt; 2.2e-16 ***
enable_thinking                          86.0499  1  &lt; 2.2e-16 ***
vot_ray_trace                            14.2558  1  0.0001596 ***
cells_traveled                          381.1024  1  &lt; 2.2e-16 ***
atoms_affecting                         140.1087  1  &lt; 2.2e-16 ***
model_name:prompt_style                   2.5874  2  0.2742513    
model_name:enable_thinking                0.4069  2  0.8158956    
prompt_style:enable_thinking              5.2810  1  0.0215594 *  
model_name:prompt_style:enable_thinking   1.4111  2  0.4938409    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<section id="odds-ratios-with-95-confidence-intervals" class="level4" data-number="4.1.4.1">
<h4 data-number="4.1.4.1" class="anchored" data-anchor-id="odds-ratios-with-95-confidence-intervals"><span class="header-section-number">4.1.4.1</span> Odds Ratios with 95% Confidence Intervals</h4>
<p><strong>Interpretation</strong>: OR &gt; 1 means the factor increases odds of correct prediction; OR &lt; 1 means it decreases odds. These are conditional odds ratios (controlling for random effects).</p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Odds Ratios for Prediction Accuracy (Fixed Effects). * indicates p &lt; 0.05.</caption>
<colgroup>
<col style="width: 56%">
<col style="width: 9%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 7%">
<col style="width: 3%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Term</th>
<th style="text-align: right;">Odds Ratio</th>
<th style="text-align: right;">95% CI Lower</th>
<th style="text-align: right;">95% CI Upper</th>
<th style="text-align: left;">p-value</th>
<th style="text-align: left;">Sig</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">model_nameSonnet 4.5</td>
<td style="text-align: right;">1.123</td>
<td style="text-align: right;">0.909</td>
<td style="text-align: right;">1.386</td>
<td style="text-align: left;">0.2815</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">model_nameOpus 4.5</td>
<td style="text-align: right;">1.059</td>
<td style="text-align: right;">0.858</td>
<td style="text-align: right;">1.308</td>
<td style="text-align: left;">0.5907</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">prompt_styleaugmented</td>
<td style="text-align: right;">2.680</td>
<td style="text-align: right;">2.140</td>
<td style="text-align: right;">3.355</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: left;">*</td>
</tr>
<tr class="even">
<td style="text-align: left;">enable_thinkingTRUE</td>
<td style="text-align: right;">2.932</td>
<td style="text-align: right;">2.336</td>
<td style="text-align: right;">3.680</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: left;">*</td>
</tr>
<tr class="odd">
<td style="text-align: left;">vot_ray_traceTRUE</td>
<td style="text-align: right;">1.223</td>
<td style="text-align: right;">1.102</td>
<td style="text-align: right;">1.358</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: left;">*</td>
</tr>
<tr class="even">
<td style="text-align: left;">cells_traveled</td>
<td style="text-align: right;">0.816</td>
<td style="text-align: right;">0.800</td>
<td style="text-align: right;">0.833</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: left;">*</td>
</tr>
<tr class="odd">
<td style="text-align: left;">atoms_affecting</td>
<td style="text-align: right;">0.616</td>
<td style="text-align: right;">0.569</td>
<td style="text-align: right;">0.668</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: left;">*</td>
</tr>
<tr class="even">
<td style="text-align: left;">model_nameSonnet 4.5:prompt_styleaugmented</td>
<td style="text-align: right;">1.200</td>
<td style="text-align: right;">0.868</td>
<td style="text-align: right;">1.659</td>
<td style="text-align: left;">0.2699</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">model_nameOpus 4.5:prompt_styleaugmented</td>
<td style="text-align: right;">1.294</td>
<td style="text-align: right;">0.935</td>
<td style="text-align: right;">1.789</td>
<td style="text-align: left;">0.1197</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">model_nameSonnet 4.5:enable_thinkingTRUE</td>
<td style="text-align: right;">0.948</td>
<td style="text-align: right;">0.686</td>
<td style="text-align: right;">1.308</td>
<td style="text-align: left;">0.7431</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">model_nameOpus 4.5:enable_thinkingTRUE</td>
<td style="text-align: right;">1.053</td>
<td style="text-align: right;">0.762</td>
<td style="text-align: right;">1.455</td>
<td style="text-align: left;">0.7531</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">prompt_styleaugmented:enable_thinkingTRUE</td>
<td style="text-align: right;">1.576</td>
<td style="text-align: right;">1.069</td>
<td style="text-align: right;">2.324</td>
<td style="text-align: left;">0.0216</td>
<td style="text-align: left;">*</td>
</tr>
<tr class="odd">
<td style="text-align: left;">model_nameSonnet 4.5:prompt_styleaugmented:enable_thinkingTRUE</td>
<td style="text-align: right;">1.214</td>
<td style="text-align: right;">0.680</td>
<td style="text-align: right;">2.167</td>
<td style="text-align: left;">0.5121</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">model_nameOpus 4.5:prompt_styleaugmented:enable_thinkingTRUE</td>
<td style="text-align: right;">0.846</td>
<td style="text-align: right;">0.481</td>
<td style="text-align: right;">1.489</td>
<td style="text-align: left;">0.5627</td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="random-effects-variance-components" class="level4" data-number="4.1.4.2">
<h4 data-number="4.1.4.2" class="anchored" data-anchor-id="random-effects-variance-components"><span class="header-section-number">4.1.4.2</span> Random Effects Variance Components</h4>
<p><strong>Configuration-level random effects</strong> (config_index): - Accounts for overall difficulty due to specific atom placements - Generalizes inference beyond these 10 configurations - Captures configuration-specific effects (e.g., dense vs sparse atom patterns)</p>
<p><strong>Ray-level random effects</strong> (ray_id:config_index): - Accounts for individual ray difficulty within each configuration - Handles correlation: Same ray tested across multiple conditions - Allows each ray to have its own baseline difficulty - Essential when same rays appear in multiple experimental conditions</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code> Groups              Name        Std.Dev.
 ray_id:config_index (Intercept) 0.64862 
 config_index        (Intercept) 0.83955 </code></pre>
</div>
</div>
<p><strong>Intraclass Correlation Coefficient (ICC)</strong>: 0.255 — Proportion of variance due to clustering at both configuration and ray-within-config levels.</p>
<p><strong>Model Fit</strong> (Pseudo R², Nakagawa &amp; Schielzeth): - <strong>Marginal R²</strong> (fixed effects only): 0.227 - <strong>Conditional R²</strong> (fixed + random effects): 0.424</p>
</section>
<section id="cramérs-v-effect-size-for-categorical-associations" class="level4" data-number="4.1.4.3">
<h4 data-number="4.1.4.3" class="anchored" data-anchor-id="cramérs-v-effect-size-for-categorical-associations"><span class="header-section-number">4.1.4.3</span> Cramér’s V (Effect Size for Categorical Associations)</h4>
<p>Interpretation guidelines: 0.10=small, 0.30=medium, 0.50=large</p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Association Strength with Prediction Accuracy</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Factor</th>
<th style="text-align: right;">Cramér’s V</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Model</td>
<td style="text-align: right;">0.016</td>
</tr>
<tr class="even">
<td style="text-align: left;">Prompt Style</td>
<td style="text-align: right;">0.303</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Extended Thinking</td>
<td style="text-align: right;">0.185</td>
</tr>
<tr class="even">
<td style="text-align: left;">VoT Ray Trace</td>
<td style="text-align: right;">0.027</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="regression-coefficients-for-main-effects" class="level4" data-number="4.1.4.4">
<h4 data-number="4.1.4.4" class="anchored" data-anchor-id="regression-coefficients-for-main-effects"><span class="header-section-number">4.1.4.4</span> Regression Coefficients for Main Effects</h4>
<p>Key findings from mixed-effects logistic regression (fixed effects only).</p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Regression Coefficients for Main Effects (Fixed Effects)</caption>
<colgroup>
<col style="width: 27%">
<col style="width: 16%">
<col style="width: 7%">
<col style="width: 19%">
<col style="width: 19%">
<col style="width: 9%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Term</th>
<th style="text-align: right;">β (log-odds)</th>
<th style="text-align: right;">OR</th>
<th style="text-align: right;">OR 95% CI Lower</th>
<th style="text-align: right;">OR 95% CI Upper</th>
<th style="text-align: left;">p-value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">model_nameSonnet 4.5</td>
<td style="text-align: right;">0.116</td>
<td style="text-align: right;">1.123</td>
<td style="text-align: right;">0.909</td>
<td style="text-align: right;">1.386</td>
<td style="text-align: left;">0.282</td>
</tr>
<tr class="even">
<td style="text-align: left;">model_nameOpus 4.5</td>
<td style="text-align: right;">0.058</td>
<td style="text-align: right;">1.059</td>
<td style="text-align: right;">0.858</td>
<td style="text-align: right;">1.308</td>
<td style="text-align: left;">0.591</td>
</tr>
<tr class="odd">
<td style="text-align: left;">prompt_styleaugmented</td>
<td style="text-align: right;">0.986</td>
<td style="text-align: right;">2.680</td>
<td style="text-align: right;">2.140</td>
<td style="text-align: right;">3.355</td>
<td style="text-align: left;">&lt;0.001</td>
</tr>
<tr class="even">
<td style="text-align: left;">enable_thinkingTRUE</td>
<td style="text-align: right;">1.076</td>
<td style="text-align: right;">2.932</td>
<td style="text-align: right;">2.336</td>
<td style="text-align: right;">3.680</td>
<td style="text-align: left;">&lt;0.001</td>
</tr>
<tr class="odd">
<td style="text-align: left;">vot_ray_traceTRUE</td>
<td style="text-align: right;">0.201</td>
<td style="text-align: right;">1.223</td>
<td style="text-align: right;">1.102</td>
<td style="text-align: right;">1.358</td>
<td style="text-align: left;">&lt;0.001</td>
</tr>
<tr class="even">
<td style="text-align: left;">cells_traveled</td>
<td style="text-align: right;">-0.203</td>
<td style="text-align: right;">0.816</td>
<td style="text-align: right;">0.800</td>
<td style="text-align: right;">0.833</td>
<td style="text-align: left;">&lt;0.001</td>
</tr>
<tr class="odd">
<td style="text-align: left;">atoms_affecting</td>
<td style="text-align: right;">-0.484</td>
<td style="text-align: right;">0.616</td>
<td style="text-align: right;">0.569</td>
<td style="text-align: right;">0.668</td>
<td style="text-align: left;">&lt;0.001</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</section>
<section id="effect-modification-by-path-complexity" class="level3" data-number="4.1.5">
<h3 data-number="4.1.5" class="anchored" data-anchor-id="effect-modification-by-path-complexity"><span class="header-section-number">4.1.5</span> Effect Modification by Path Complexity</h3>
<p>Does path complexity (measured as total cells traveled: entry + internal + exit) moderate treatment effects? If treatment effects are constant across spatial complexity levels, limitations lie in inferential machinery rather than spatial processing. If effects are moderated by complexity, spatial reasoning contributes to observed failures.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Only run if we have variation in factors and valid cells_traveled data</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>run_effect_mod <span class="ot">&lt;-</span> has_model_var <span class="sc">||</span> has_prompt_var <span class="sc">||</span> has_thinking_var</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (run_effect_mod) {</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Build interaction formula</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  interaction_parts <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (has_model_var) interaction_parts <span class="ot">&lt;-</span> <span class="fu">c</span>(interaction_parts, <span class="st">"model_name * cells_traveled"</span>)</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (has_prompt_var) interaction_parts <span class="ot">&lt;-</span> <span class="fu">c</span>(interaction_parts, <span class="st">"prompt_style * cells_traveled"</span>)</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (has_thinking_var) interaction_parts <span class="ot">&lt;-</span> <span class="fu">c</span>(interaction_parts, <span class="st">"enable_thinking * cells_traveled"</span>)</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add nested random effects</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>  pred_mod_formula <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"correct ~ "</span>, <span class="fu">paste</span>(interaction_parts, <span class="at">collapse =</span> <span class="st">" + "</span>), <span class="st">" + (1 | config_index/ray_id)"</span>)</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>  model_predict_mod <span class="ot">&lt;-</span> <span class="fu">glmer</span>(<span class="fu">as.formula</span>(pred_mod_formula),</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>                             <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>),</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>                             <span class="at">data =</span> predict_data,</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>                             <span class="at">control =</span> <span class="fu">glmerControl</span>(<span class="at">optimizer =</span> <span class="st">"bobyqa"</span>))</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p><strong>Model formula</strong>: correct ~ model_name * cells_traveled + prompt_style * cells_traveled + enable_thinking * cells_traveled + (1 | config_index/ray_id)</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Deviance Table (Type III Wald chisquare tests)

Response: correct
                                  Chisq Df Pr(&gt;Chisq)    
(Intercept)                     24.8907  1  6.068e-07 ***
model_name                       2.6703  2   0.263120    
cells_traveled                 147.0175  1  &lt; 2.2e-16 ***
prompt_style                    32.4483  1  1.224e-08 ***
enable_thinking                  6.6848  1   0.009724 ** 
model_name:cells_traveled        0.4922  2   0.781839    
cells_traveled:prompt_style      8.2773  1   0.004014 ** 
cells_traveled:enable_thinking  34.4661  1  4.337e-09 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<p><strong>Interpretation of interactions</strong>: - <strong>No interaction</strong>: Treatment effect is constant across simple and complex paths - <strong>Positive interaction</strong>: Treatment effect increases with path complexity - <strong>Negative interaction</strong>: Treatment effect decreases with path complexity</p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Path Complexity Interaction Effects</caption>
<colgroup>
<col style="width: 38%">
<col style="width: 13%">
<col style="width: 6%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 8%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Interaction Term</th>
<th style="text-align: right;">β (log-odds)</th>
<th style="text-align: right;">OR</th>
<th style="text-align: right;">OR 95% CI Lower</th>
<th style="text-align: right;">OR 95% CI Upper</th>
<th style="text-align: left;">p-value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">model_nameSonnet 4.5:cells_traveled</td>
<td style="text-align: right;">-0.015</td>
<td style="text-align: right;">0.985</td>
<td style="text-align: right;">0.940</td>
<td style="text-align: right;">1.032</td>
<td style="text-align: left;">0.51826</td>
</tr>
<tr class="even">
<td style="text-align: left;">model_nameOpus 4.5:cells_traveled</td>
<td style="text-align: right;">-0.002</td>
<td style="text-align: right;">0.998</td>
<td style="text-align: right;">0.953</td>
<td style="text-align: right;">1.046</td>
<td style="text-align: left;">0.94219</td>
</tr>
<tr class="odd">
<td style="text-align: left;">cells_traveled:prompt_styleaugmented</td>
<td style="text-align: right;">0.058</td>
<td style="text-align: right;">1.060</td>
<td style="text-align: right;">1.019</td>
<td style="text-align: right;">1.103</td>
<td style="text-align: left;">0.00401</td>
</tr>
<tr class="even">
<td style="text-align: left;">cells_traveled:enable_thinkingTRUE</td>
<td style="text-align: right;">0.118</td>
<td style="text-align: right;">1.125</td>
<td style="text-align: right;">1.082</td>
<td style="text-align: right;">1.170</td>
<td style="text-align: left;">&lt; 0.001</td>
</tr>
</tbody>
</table>
</div>
</div>
<p><strong>Path Complexity Distribution</strong> (cells traveled):</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Statistic</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Min</td>
<td>2</td>
</tr>
<tr class="even">
<td>Q1</td>
<td>4</td>
</tr>
<tr class="odd">
<td>Median</td>
<td>6</td>
</tr>
<tr class="even">
<td>Q3</td>
<td>9</td>
</tr>
<tr class="odd">
<td>Max</td>
<td>13</td>
</tr>
<tr class="even">
<td>Mean</td>
<td>6.49</td>
</tr>
<tr class="odd">
<td>SD</td>
<td>2.9</td>
</tr>
</tbody>
</table>
</section>
<section id="effect-modification-by-atom-density" class="level3" data-number="4.1.6">
<h3 data-number="4.1.6" class="anchored" data-anchor-id="effect-modification-by-atom-density"><span class="header-section-number">4.1.6</span> Effect Modification by Atom Density</h3>
<p>Does atom density (number of atoms adjacent to ray path) moderate treatment effects?</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>run_effect_mod_atoms <span class="ot">&lt;-</span> has_model_var <span class="sc">||</span> has_prompt_var <span class="sc">||</span> has_thinking_var</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (run_effect_mod_atoms) {</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Build interaction formula</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  interaction_parts <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (has_model_var) interaction_parts <span class="ot">&lt;-</span> <span class="fu">c</span>(interaction_parts, <span class="st">"model_name * atoms_affecting"</span>)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (has_prompt_var) interaction_parts <span class="ot">&lt;-</span> <span class="fu">c</span>(interaction_parts, <span class="st">"prompt_style * atoms_affecting"</span>)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (has_thinking_var) interaction_parts <span class="ot">&lt;-</span> <span class="fu">c</span>(interaction_parts, <span class="st">"enable_thinking * atoms_affecting"</span>)</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add nested random effects</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>  pred_mod_formula_atoms <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"correct ~ "</span>, <span class="fu">paste</span>(interaction_parts, <span class="at">collapse =</span> <span class="st">" + "</span>), <span class="st">" + (1 | config_index/ray_id)"</span>)</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>  model_predict_mod_atoms <span class="ot">&lt;-</span> <span class="fu">glmer</span>(<span class="fu">as.formula</span>(pred_mod_formula_atoms),</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>),</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">data =</span> predict_data,</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">control =</span> <span class="fu">glmerControl</span>(<span class="at">optimizer =</span> <span class="st">"bobyqa"</span>))</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p><strong>Model formula</strong>: correct ~ model_name * atoms_affecting + prompt_style * atoms_affecting + enable_thinking * atoms_affecting + (1 | config_index/ray_id)</p>
<p>Mixed-effects logistic regression tests whether treatment effects vary with atom density.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Deviance Table (Type III Wald chisquare tests)

Response: correct
                                   Chisq Df Pr(&gt;Chisq)    
(Intercept)                       1.8883  1    0.16939    
model_name                        0.3114  2    0.85582    
atoms_affecting                   4.6401  1    0.03123 *  
prompt_style                    710.2122  1  &lt; 2.2e-16 ***
enable_thinking                  45.9063  1  1.240e-11 ***
model_name:atoms_affecting        1.7506  2    0.41673    
atoms_affecting:prompt_style    154.0699  1  &lt; 2.2e-16 ***
atoms_affecting:enable_thinking  37.5996  1  8.686e-10 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<p><strong>Interpretation of interactions</strong>: - <strong>No interaction</strong>: Treatment effect is constant across low and high atom density - <strong>Positive interaction</strong>: Treatment effect increases with more atoms affecting path - <strong>Negative interaction</strong>: Treatment effect decreases with more atoms affecting path</p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Atom Density Interaction Effects</caption>
<colgroup>
<col style="width: 39%">
<col style="width: 13%">
<col style="width: 6%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 8%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Interaction Term</th>
<th style="text-align: right;">β (log-odds)</th>
<th style="text-align: right;">OR</th>
<th style="text-align: right;">OR 95% CI Lower</th>
<th style="text-align: right;">OR 95% CI Upper</th>
<th style="text-align: left;">p-value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">model_nameSonnet 4.5:atoms_affecting</td>
<td style="text-align: right;">0.109</td>
<td style="text-align: right;">1.115</td>
<td style="text-align: right;">0.949</td>
<td style="text-align: right;">1.311</td>
<td style="text-align: left;">0.187</td>
</tr>
<tr class="even">
<td style="text-align: left;">model_nameOpus 4.5:atoms_affecting</td>
<td style="text-align: right;">0.046</td>
<td style="text-align: right;">1.047</td>
<td style="text-align: right;">0.892</td>
<td style="text-align: right;">1.230</td>
<td style="text-align: left;">0.574</td>
</tr>
<tr class="odd">
<td style="text-align: left;">atoms_affecting:prompt_styleaugmented</td>
<td style="text-align: right;">-0.907</td>
<td style="text-align: right;">0.404</td>
<td style="text-align: right;">0.350</td>
<td style="text-align: right;">0.466</td>
<td style="text-align: left;">&lt;0.001</td>
</tr>
<tr class="even">
<td style="text-align: left;">atoms_affecting:enable_thinkingTRUE</td>
<td style="text-align: right;">0.432</td>
<td style="text-align: right;">1.540</td>
<td style="text-align: right;">1.342</td>
<td style="text-align: right;">1.768</td>
<td style="text-align: left;">&lt;0.001</td>
</tr>
</tbody>
</table>
</div>
</div>
<p><strong>Atom Density Distribution</strong>:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Statistic</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Min</td>
<td>0</td>
</tr>
<tr class="even">
<td>Q1</td>
<td>1</td>
</tr>
<tr class="odd">
<td>Median</td>
<td>1</td>
</tr>
<tr class="even">
<td>Q3</td>
<td>1</td>
</tr>
<tr class="odd">
<td>Max</td>
<td>3</td>
</tr>
<tr class="even">
<td>Mean</td>
<td>0.97</td>
</tr>
<tr class="odd">
<td>SD</td>
<td>0.71</td>
</tr>
</tbody>
</table>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Accuracy by model and condition</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>p1_pred <span class="ot">&lt;-</span> predict_data <span class="sc">|&gt;</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(model_name, prompt_style, enable_thinking) <span class="sc">|&gt;</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">accuracy =</span> <span class="fu">mean</span>(correct),</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">se =</span> <span class="fu">sqrt</span>(accuracy <span class="sc">*</span> (<span class="dv">1</span><span class="sc">-</span>accuracy) <span class="sc">/</span> <span class="fu">n</span>()),</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">|&gt;</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> model_name, <span class="at">y =</span> accuracy, <span class="at">fill =</span> enable_thinking)) <span class="sc">+</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="fl">0.8</span>), <span class="at">width =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> accuracy <span class="sc">-</span> se, <span class="at">ymax =</span> accuracy <span class="sc">+</span> se),</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>                <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="fl">0.8</span>), <span class="at">width =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>prompt_style) <span class="sc">+</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Predict Mode: Accuracy by Model, Thinking, and Prompt Style"</span>,</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Model"</span>, <span class="at">y =</span> <span class="st">"Accuracy"</span>, <span class="at">fill =</span> <span class="st">"Extended</span><span class="sc">\n</span><span class="st">Thinking"</span>) <span class="sc">+</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">labels =</span> scales<span class="sc">::</span>percent) <span class="sc">+</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p1_pred)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="blackbox_llm_study_files/figure-html/predict-visualizations-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Accuracy by configuration (difficulty analysis)</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>p2_pred <span class="ot">&lt;-</span> predict_data <span class="sc">|&gt;</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(config_index, model_name) <span class="sc">|&gt;</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">accuracy =</span> <span class="fu">mean</span>(correct), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">|&gt;</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> config_index, <span class="at">y =</span> accuracy, <span class="at">color =</span> model_name, <span class="at">group =</span> model_name)) <span class="sc">+</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">linewidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Prediction Accuracy Across Configurations"</span>,</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Variation indicates configuration difficulty differences"</span>,</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Configuration Index"</span>, <span class="at">y =</span> <span class="st">"Accuracy"</span>, <span class="at">color =</span> <span class="st">"Model"</span>) <span class="sc">+</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">labels =</span> scales<span class="sc">::</span>percent) <span class="sc">+</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p2_pred)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="blackbox_llm_study_files/figure-html/predict-visualizations-2.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># VoT Ray Trace effect</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>p3_pred <span class="ot">&lt;-</span> predict_data <span class="sc">|&gt;</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(model_name, vot_ray_trace) <span class="sc">|&gt;</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">accuracy =</span> <span class="fu">mean</span>(correct),</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">se =</span> <span class="fu">sqrt</span>(accuracy <span class="sc">*</span> (<span class="dv">1</span><span class="sc">-</span>accuracy) <span class="sc">/</span> <span class="fu">n</span>()),</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">|&gt;</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> model_name, <span class="at">y =</span> accuracy, <span class="at">fill =</span> vot_ray_trace)) <span class="sc">+</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="fl">0.8</span>), <span class="at">width =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> accuracy <span class="sc">-</span> se, <span class="at">ymax =</span> accuracy <span class="sc">+</span> se),</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>                <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="fl">0.8</span>), <span class="at">width =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Effect of VoT Ray Trace Visualization"</span>,</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Model"</span>, <span class="at">y =</span> <span class="st">"Accuracy"</span>, <span class="at">fill =</span> <span class="st">"VoT Ray</span><span class="sc">\n</span><span class="st">Trace"</span>) <span class="sc">+</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">labels =</span> scales<span class="sc">::</span>percent) <span class="sc">+</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p3_pred)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="blackbox_llm_study_files/figure-html/predict-visualizations-3.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Path complexity vs accuracy</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>p4_pred <span class="ot">&lt;-</span> predict_data <span class="sc">|&gt;</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(cells_traveled)) <span class="sc">|&gt;</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(cells_traveled, model_name) <span class="sc">|&gt;</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">accuracy =</span> <span class="fu">mean</span>(correct),</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">|&gt;</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> cells_traveled, <span class="at">y =</span> accuracy, <span class="at">color =</span> model_name)) <span class="sc">+</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">size =</span> n), <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"loess"</span>, <span class="at">se =</span> <span class="cn">TRUE</span>, <span class="at">linewidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Performance vs Path Complexity"</span>,</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Does accuracy decline as rays travel through more cells?"</span>,</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Cells Traveled (Entry + Internal + Exit)"</span>,</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Accuracy"</span>,</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">"Model"</span>,</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">size =</span> <span class="st">"N"</span>) <span class="sc">+</span></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">labels =</span> scales<span class="sc">::</span>percent) <span class="sc">+</span></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p4_pred)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="blackbox_llm_study_files/figure-html/predict-visualizations-4.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="ray-path-complexity-analysis" class="level3" data-number="4.1.7">
<h3 data-number="4.1.7" class="anchored" data-anchor-id="ray-path-complexity-analysis"><span class="header-section-number">4.1.7</span> Ray Path Complexity Analysis</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Correlation between complexity measures</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>complexity_cor <span class="ot">&lt;-</span> <span class="fu">cor</span>(predict_data<span class="sc">$</span>cells_traveled, predict_data<span class="sc">$</span>atoms_affecting,</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">use =</span> <span class="st">"complete.obs"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p><strong>Correlation</strong> between cells_traveled and atoms_affecting: <strong>-0.213</strong></p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="blackbox_llm_study_files/figure-html/predict-complexity-plots-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="blackbox_llm_study_files/figure-html/predict-complexity-plots-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="blackbox_llm_study_files/figure-html/predict-complexity-plots-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Analyze error patterns by comparing predicted vs actual</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co"># This helps identify systematic errors (e.g., absorption vs deflection confusion)</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co"># First, extract the type of result from predicted and actual</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>predict_errors <span class="ot">&lt;-</span> predict_data <span class="sc">|&gt;</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>correct) <span class="sc">|&gt;</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">predicted_type =</span> <span class="fu">case_when</span>(</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"absorbed|HIT"</span>, predicted, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>) <span class="sc">~</span> <span class="st">"absorbed"</span>,</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"reflected|REFLECTION"</span>, predicted, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>) <span class="sc">~</span> <span class="st">"reflected"</span>,</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"detour"</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">actual_type =</span> <span class="fu">case_when</span>(</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"absorbed|HIT"</span>, actual, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>) <span class="sc">~</span> <span class="st">"absorbed"</span>,</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>      <span class="fu">grepl</span>(<span class="st">"reflected|REFLECTION"</span>, actual, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>) <span class="sc">~</span> <span class="st">"reflected"</span>,</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"detour"</span></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Error confusion matrix</span></span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>error_matrix <span class="ot">&lt;-</span> predict_errors <span class="sc">|&gt;</span></span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(actual_type, predicted_type) <span class="sc">|&gt;</span></span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> predicted_type, <span class="at">values_from =</span> n, <span class="at">values_fill =</span> <span class="dv">0</span>)</span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(error_matrix, <span class="at">caption =</span> <span class="st">"Prediction Errors: Actual vs Predicted Outcome Type (Rows = Actual, Columns = Predicted)"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Prediction Errors: Actual vs Predicted Outcome Type (Rows = Actual, Columns = Predicted)</caption>
<thead>
<tr class="header">
<th style="text-align: left;">actual_type</th>
<th style="text-align: right;">detour</th>
<th style="text-align: right;">reflected</th>
<th style="text-align: right;">absorbed</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">absorbed</td>
<td style="text-align: right;">596</td>
<td style="text-align: right;">30</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">detour</td>
<td style="text-align: right;">1238</td>
<td style="text-align: right;">22</td>
<td style="text-align: right;">280</td>
</tr>
<tr class="odd">
<td style="text-align: left;">reflected</td>
<td style="text-align: right;">524</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">232</td>
</tr>
</tbody>
</table>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Error rates by model</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>error_by_model <span class="ot">&lt;-</span> predict_errors <span class="sc">|&gt;</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(model_name, actual_type, predicted_type) <span class="sc">|&gt;</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(model_name) <span class="sc">|&gt;</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prop =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n)) <span class="sc">|&gt;</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>error_by_model <span class="sc">|&gt;</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(model_name) <span class="sc">|&gt;</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(n, <span class="at">n =</span> <span class="dv">3</span>) <span class="sc">|&gt;</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">error_pattern =</span> <span class="fu">paste</span>(actual_type, <span class="st">"-&gt;"</span>, predicted_type)) <span class="sc">|&gt;</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(model_name, error_pattern, n, prop) <span class="sc">|&gt;</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prop =</span> <span class="fu">round</span>(prop, <span class="dv">3</span>)) <span class="sc">|&gt;</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Model"</span>, <span class="st">"Error Pattern (Actual → Predicted)"</span>, <span class="st">"Count"</span>, <span class="st">"Proportion"</span>),</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">caption =</span> <span class="st">"Most Common Error Types by Model (Top 3 per Model)"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Most Common Error Types by Model (Top 3 per Model)</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Model</th>
<th style="text-align: left;">Error Pattern (Actual → Predicted)</th>
<th style="text-align: right;">Count</th>
<th style="text-align: right;">Proportion</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Haiku 4.5</td>
<td style="text-align: left;">detour -&gt; detour</td>
<td style="text-align: right;">458</td>
<td style="text-align: right;">0.448</td>
</tr>
<tr class="even">
<td style="text-align: left;">Haiku 4.5</td>
<td style="text-align: left;">absorbed -&gt; detour</td>
<td style="text-align: right;">214</td>
<td style="text-align: right;">0.209</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Haiku 4.5</td>
<td style="text-align: left;">reflected -&gt; detour</td>
<td style="text-align: right;">178</td>
<td style="text-align: right;">0.174</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sonnet 4.5</td>
<td style="text-align: left;">detour -&gt; detour</td>
<td style="text-align: right;">406</td>
<td style="text-align: right;">0.432</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Sonnet 4.5</td>
<td style="text-align: left;">absorbed -&gt; detour</td>
<td style="text-align: right;">180</td>
<td style="text-align: right;">0.191</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sonnet 4.5</td>
<td style="text-align: left;">reflected -&gt; detour</td>
<td style="text-align: right;">162</td>
<td style="text-align: right;">0.172</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Opus 4.5</td>
<td style="text-align: left;">detour -&gt; detour</td>
<td style="text-align: right;">374</td>
<td style="text-align: right;">0.390</td>
</tr>
<tr class="even">
<td style="text-align: left;">Opus 4.5</td>
<td style="text-align: left;">absorbed -&gt; detour</td>
<td style="text-align: right;">202</td>
<td style="text-align: right;">0.210</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Opus 4.5</td>
<td style="text-align: left;">reflected -&gt; detour</td>
<td style="text-align: right;">184</td>
<td style="text-align: right;">0.192</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</section>
<section id="play-mode-results" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="play-mode-results"><span class="header-section-number">4.2</span> Play Mode Results</h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load all Play mode experiment JSON files from Experiment 1/Play/</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>play_json_files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">path =</span> <span class="st">"Experiment 1/Play"</span>,</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">.json$"</span>,</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">full.names =</span> <span class="cn">TRUE</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to extract results from a single JSON file</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>extract_play_results <span class="ot">&lt;-</span> <span class="cf">function</span>(json_file) {</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(json_file, <span class="at">simplifyDataFrame =</span> <span class="cn">FALSE</span>)</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract results array</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>  results <span class="ot">&lt;-</span> data<span class="sc">$</span>results</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Convert each result to a tibble row</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_dfr</span>(results, <span class="cf">function</span>(r) {</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate mean complexity measures for each ray fired</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>    ray_complexity <span class="ot">&lt;-</span> <span class="fu">lapply</span>(r<span class="sc">$</span>raySequence, <span class="cf">function</span>(ray) {</span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(ray<span class="sc">$</span>action) <span class="sc">&amp;&amp;</span> ray<span class="sc">$</span>action <span class="sc">==</span> <span class="st">"fire"</span> <span class="sc">&amp;&amp;</span></span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>          <span class="sc">!</span><span class="fu">is.null</span>(ray<span class="sc">$</span>rayResult) <span class="sc">&amp;&amp;</span> <span class="sc">!</span><span class="fu">is.null</span>(ray<span class="sc">$</span>rayResult<span class="sc">$</span>path)) {</span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>        <span class="fu">list</span>(</span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>          <span class="at">atoms =</span> <span class="fu">count_atoms_affecting</span>(ray<span class="sc">$</span>rayResult<span class="sc">$</span>path, r<span class="sc">$</span>atomConfig),</span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a>          <span class="at">cells =</span> <span class="fu">count_ray_cells</span>(ray<span class="sc">$</span>rayResult)</span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a>      } <span class="cf">else</span> {</span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a>        <span class="fu">list</span>(<span class="at">atoms =</span> <span class="cn">NA_real_</span>, <span class="at">cells =</span> <span class="cn">NA_real_</span>)</span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true" tabindex="-1"></a>    mean_atoms <span class="ot">&lt;-</span> <span class="fu">mean</span>(<span class="fu">sapply</span>(ray_complexity, <span class="cf">function</span>(x) x<span class="sc">$</span>atoms), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb24-31"><a href="#cb24-31" aria-hidden="true" tabindex="-1"></a>    mean_cells <span class="ot">&lt;-</span> <span class="fu">mean</span>(<span class="fu">sapply</span>(ray_complexity, <span class="cf">function</span>(x) x<span class="sc">$</span>cells), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb24-32"><a href="#cb24-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">is.nan</span>(mean_atoms)) mean_atoms <span class="ot">&lt;-</span> <span class="cn">NA_real_</span></span>
<span id="cb24-33"><a href="#cb24-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">is.nan</span>(mean_cells)) mean_cells <span class="ot">&lt;-</span> <span class="cn">NA_real_</span></span>
<span id="cb24-34"><a href="#cb24-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-35"><a href="#cb24-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tibble</span>(</span>
<span id="cb24-36"><a href="#cb24-36" aria-hidden="true" tabindex="-1"></a>      <span class="at">experiment_id =</span> r<span class="sc">$</span>experimentId,</span>
<span id="cb24-37"><a href="#cb24-37" aria-hidden="true" tabindex="-1"></a>      <span class="at">start_time =</span> r<span class="sc">$</span>startTime,</span>
<span id="cb24-38"><a href="#cb24-38" aria-hidden="true" tabindex="-1"></a>      <span class="at">end_time =</span> r<span class="sc">$</span>endTime,</span>
<span id="cb24-39"><a href="#cb24-39" aria-hidden="true" tabindex="-1"></a>      <span class="at">model =</span> r<span class="sc">$</span>model,</span>
<span id="cb24-40"><a href="#cb24-40" aria-hidden="true" tabindex="-1"></a>      <span class="at">model_name =</span> r<span class="sc">$</span>modelName,</span>
<span id="cb24-41"><a href="#cb24-41" aria-hidden="true" tabindex="-1"></a>      <span class="at">prompt_style =</span> r<span class="sc">$</span>promptStyle,</span>
<span id="cb24-42"><a href="#cb24-42" aria-hidden="true" tabindex="-1"></a>      <span class="at">prompt_condition =</span> r<span class="sc">$</span>promptCondition,</span>
<span id="cb24-43"><a href="#cb24-43" aria-hidden="true" tabindex="-1"></a>      <span class="at">mode =</span> r<span class="sc">$</span>mode,</span>
<span id="cb24-44"><a href="#cb24-44" aria-hidden="true" tabindex="-1"></a>      <span class="at">config_index =</span> r<span class="sc">$</span>configIndex,</span>
<span id="cb24-45"><a href="#cb24-45" aria-hidden="true" tabindex="-1"></a>      <span class="at">atom_config =</span> <span class="fu">list</span>(r<span class="sc">$</span>atomConfig),</span>
<span id="cb24-46"><a href="#cb24-46" aria-hidden="true" tabindex="-1"></a>      <span class="at">include_visualization =</span> r<span class="sc">$</span>includeVisualization,</span>
<span id="cb24-47"><a href="#cb24-47" aria-hidden="true" tabindex="-1"></a>      <span class="at">allow_hypotheses =</span> r<span class="sc">$</span>allowHypotheses,</span>
<span id="cb24-48"><a href="#cb24-48" aria-hidden="true" tabindex="-1"></a>      <span class="at">enable_thinking =</span> r<span class="sc">$</span>enableThinking,</span>
<span id="cb24-49"><a href="#cb24-49" aria-hidden="true" tabindex="-1"></a>      <span class="at">thinking_budget =</span> r<span class="sc">$</span>thinkingBudget,</span>
<span id="cb24-50"><a href="#cb24-50" aria-hidden="true" tabindex="-1"></a>      <span class="at">vot_grid_state =</span> r<span class="sc">$</span>votGridState,</span>
<span id="cb24-51"><a href="#cb24-51" aria-hidden="true" tabindex="-1"></a>      <span class="at">vot_ray_trace =</span> r<span class="sc">$</span>votRayTrace,</span>
<span id="cb24-52"><a href="#cb24-52" aria-hidden="true" tabindex="-1"></a>      <span class="at">vot_hypothesis =</span> r<span class="sc">$</span>votHypothesis,</span>
<span id="cb24-53"><a href="#cb24-53" aria-hidden="true" tabindex="-1"></a>      <span class="at">rays_used =</span> r<span class="sc">$</span>raysUsed,</span>
<span id="cb24-54"><a href="#cb24-54" aria-hidden="true" tabindex="-1"></a>      <span class="at">atoms_correct =</span> r<span class="sc">$</span>atomsCorrect,</span>
<span id="cb24-55"><a href="#cb24-55" aria-hidden="true" tabindex="-1"></a>      <span class="at">atoms_missed =</span> r<span class="sc">$</span>atomsMissed,</span>
<span id="cb24-56"><a href="#cb24-56" aria-hidden="true" tabindex="-1"></a>      <span class="at">score =</span> r<span class="sc">$</span>score,</span>
<span id="cb24-57"><a href="#cb24-57" aria-hidden="true" tabindex="-1"></a>      <span class="at">invalid_moves =</span> r<span class="sc">$</span>invalidMoves,</span>
<span id="cb24-58"><a href="#cb24-58" aria-hidden="true" tabindex="-1"></a>      <span class="at">hypothesis_actions =</span> r<span class="sc">$</span>hypothesisActions,</span>
<span id="cb24-59"><a href="#cb24-59" aria-hidden="true" tabindex="-1"></a>      <span class="at">total_api_calls =</span> r<span class="sc">$</span>totalApiCalls,</span>
<span id="cb24-60"><a href="#cb24-60" aria-hidden="true" tabindex="-1"></a>      <span class="at">total_input_tokens =</span> r<span class="sc">$</span>totalInputTokens,</span>
<span id="cb24-61"><a href="#cb24-61" aria-hidden="true" tabindex="-1"></a>      <span class="at">total_output_tokens =</span> r<span class="sc">$</span>totalOutputTokens,</span>
<span id="cb24-62"><a href="#cb24-62" aria-hidden="true" tabindex="-1"></a>      <span class="at">total_response_time_ms =</span> r<span class="sc">$</span>totalResponseTimeMs,</span>
<span id="cb24-63"><a href="#cb24-63" aria-hidden="true" tabindex="-1"></a>      <span class="at">mean_atoms_per_ray =</span> mean_atoms,</span>
<span id="cb24-64"><a href="#cb24-64" aria-hidden="true" tabindex="-1"></a>      <span class="at">mean_cells_per_ray =</span> mean_cells,</span>
<span id="cb24-65"><a href="#cb24-65" aria-hidden="true" tabindex="-1"></a>      <span class="at">source_file =</span> <span class="fu">basename</span>(json_file)</span>
<span id="cb24-66"><a href="#cb24-66" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb24-67"><a href="#cb24-67" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb24-68"><a href="#cb24-68" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb24-69"><a href="#cb24-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-70"><a href="#cb24-70" aria-hidden="true" tabindex="-1"></a><span class="co"># Load all results into a single long-format tibble</span></span>
<span id="cb24-71"><a href="#cb24-71" aria-hidden="true" tabindex="-1"></a>play_data <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(play_json_files, extract_play_results)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Data loaded: 480 experiment results from 16 JSON files.</p>
<ul>
<li><strong>Models</strong>: Haiku 4.5, Sonnet 4.5, Opus 4.5</li>
<li><strong>Prompt styles</strong>: augmented, baseline</li>
<li><strong>Configurations tested</strong>: 10</li>
<li><strong>Mean atoms per ray range</strong>: 0–2</li>
<li><strong>Mean cells per ray range</strong>: 2–10</li>
</ul>
<pre><code>

::: {.cell}

```{.r .cell-code}
# Summary statistics by model, prompt, and thinking
play_summary &lt;- play_data |&gt;
  group_by(model_name, prompt_style, enable_thinking) |&gt;
  summarise(
    n = n(),
    atoms_correct_mean = mean(atoms_correct),
    atoms_correct_sd = sd(atoms_correct),
    score_mean = mean(score),
    score_sd = sd(score),
    mean_atoms_ray = mean(mean_atoms_per_ray, na.rm = TRUE),
    rays_used_mean = mean(rays_used),
    .groups = "drop"
  ) |&gt;
  mutate(across(where(is.numeric) &amp; !n, \(x) round(x, 2)))

kable(play_summary,
      col.names = c("Model", "Prompt", "Thinking", "N",
                    "Atoms Correct (M)", "Atoms Correct (SD)",
                    "Score (M)", "Score (SD)",
                    "Atoms/Ray", "Rays Used"))</code></pre>
<div class="cell-output-display">
<table class="caption-top table">
<colgroup>
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 8%">
<col style="width: 2%">
<col style="width: 16%">
<col style="width: 17%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
<col style="width: 9%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Model</th>
<th style="text-align: left;">Prompt</th>
<th style="text-align: left;">Thinking</th>
<th style="text-align: right;">N</th>
<th style="text-align: right;">Atoms Correct (M)</th>
<th style="text-align: right;">Atoms Correct (SD)</th>
<th style="text-align: right;">Score (M)</th>
<th style="text-align: right;">Score (SD)</th>
<th style="text-align: right;">Atoms/Ray</th>
<th style="text-align: right;">Rays Used</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Haiku 4.5</td>
<td style="text-align: left;">augmented</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">0.88</td>
<td style="text-align: right;">1.20</td>
<td style="text-align: right;">31.52</td>
<td style="text-align: right;">8.20</td>
<td style="text-align: right;">1.02</td>
<td style="text-align: right;">11.03</td>
</tr>
<tr class="even">
<td style="text-align: left;">Haiku 4.5</td>
<td style="text-align: left;">augmented</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">1.77</td>
<td style="text-align: right;">1.44</td>
<td style="text-align: right;">26.40</td>
<td style="text-align: right;">10.17</td>
<td style="text-align: right;">0.97</td>
<td style="text-align: right;">10.95</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Haiku 4.5</td>
<td style="text-align: left;">baseline</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">0.82</td>
<td style="text-align: right;">1.32</td>
<td style="text-align: right;">26.80</td>
<td style="text-align: right;">6.72</td>
<td style="text-align: right;">1.12</td>
<td style="text-align: right;">7.90</td>
</tr>
<tr class="even">
<td style="text-align: left;">Haiku 4.5</td>
<td style="text-align: left;">baseline</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">0.75</td>
<td style="text-align: right;">1.17</td>
<td style="text-align: right;">29.82</td>
<td style="text-align: right;">6.84</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">9.50</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Opus 4.5</td>
<td style="text-align: left;">augmented</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">1.18</td>
<td style="text-align: right;">1.30</td>
<td style="text-align: right;">29.62</td>
<td style="text-align: right;">8.96</td>
<td style="text-align: right;">1.03</td>
<td style="text-align: right;">10.88</td>
</tr>
<tr class="even">
<td style="text-align: left;">Opus 4.5</td>
<td style="text-align: left;">augmented</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">1.80</td>
<td style="text-align: right;">1.40</td>
<td style="text-align: right;">25.88</td>
<td style="text-align: right;">9.77</td>
<td style="text-align: right;">1.04</td>
<td style="text-align: right;">10.72</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Opus 4.5</td>
<td style="text-align: left;">baseline</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">0.92</td>
<td style="text-align: right;">1.19</td>
<td style="text-align: right;">28.20</td>
<td style="text-align: right;">6.43</td>
<td style="text-align: right;">1.05</td>
<td style="text-align: right;">8.95</td>
</tr>
<tr class="even">
<td style="text-align: left;">Opus 4.5</td>
<td style="text-align: left;">baseline</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">0.92</td>
<td style="text-align: right;">1.29</td>
<td style="text-align: right;">28.35</td>
<td style="text-align: right;">7.50</td>
<td style="text-align: right;">0.96</td>
<td style="text-align: right;">9.00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Sonnet 4.5</td>
<td style="text-align: left;">augmented</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">1.23</td>
<td style="text-align: right;">1.31</td>
<td style="text-align: right;">30.92</td>
<td style="text-align: right;">10.06</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">11.72</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sonnet 4.5</td>
<td style="text-align: left;">augmented</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">1.57</td>
<td style="text-align: right;">1.30</td>
<td style="text-align: right;">27.68</td>
<td style="text-align: right;">8.97</td>
<td style="text-align: right;">0.98</td>
<td style="text-align: right;">10.97</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Sonnet 4.5</td>
<td style="text-align: left;">baseline</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">0.98</td>
<td style="text-align: right;">1.35</td>
<td style="text-align: right;">27.48</td>
<td style="text-align: right;">7.59</td>
<td style="text-align: right;">1.04</td>
<td style="text-align: right;">8.90</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sonnet 4.5</td>
<td style="text-align: left;">baseline</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">1.15</td>
<td style="text-align: right;">28.00</td>
<td style="text-align: right;">8.00</td>
<td style="text-align: right;">0.97</td>
<td style="text-align: right;">9.03</td>
</tr>
</tbody>
</table>
</div>
<p>:::</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary by VoT factors</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>play_summary_vot <span class="ot">&lt;-</span> play_data <span class="sc">|&gt;</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(vot_grid_state, vot_ray_trace, vot_hypothesis) <span class="sc">|&gt;</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">atoms_correct_mean =</span> <span class="fu">mean</span>(atoms_correct),</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">atoms_correct_sd =</span> <span class="fu">sd</span>(atoms_correct),</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">score_mean =</span> <span class="fu">mean</span>(score),</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">score_sd =</span> <span class="fu">sd</span>(score),</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_atoms_ray =</span> <span class="fu">mean</span>(mean_atoms_per_ray, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric) <span class="sc">&amp;</span> <span class="sc">!</span>n, \(x) <span class="fu">round</span>(x, <span class="dv">2</span>)))</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(play_summary_vot,</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"VoT Grid"</span>, <span class="st">"VoT Ray"</span>, <span class="st">"VoT Hyp"</span>, <span class="st">"N"</span>,</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"Atoms Correct (M)"</span>, <span class="st">"Atoms Correct (SD)"</span>,</span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"Score (M)"</span>, <span class="st">"Score (SD)"</span>, <span class="st">"Atoms/Ray"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 9%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 4%">
<col style="width: 18%">
<col style="width: 19%">
<col style="width: 10%">
<col style="width: 11%">
<col style="width: 10%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">VoT Grid</th>
<th style="text-align: left;">VoT Ray</th>
<th style="text-align: left;">VoT Hyp</th>
<th style="text-align: right;">N</th>
<th style="text-align: right;">Atoms Correct (M)</th>
<th style="text-align: right;">Atoms Correct (SD)</th>
<th style="text-align: right;">Score (M)</th>
<th style="text-align: right;">Score (SD)</th>
<th style="text-align: right;">Atoms/Ray</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">120</td>
<td style="text-align: right;">1.16</td>
<td style="text-align: right;">1.34</td>
<td style="text-align: right;">28.00</td>
<td style="text-align: right;">8.02</td>
<td style="text-align: right;">1.01</td>
</tr>
<tr class="even">
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">120</td>
<td style="text-align: right;">1.17</td>
<td style="text-align: right;">1.29</td>
<td style="text-align: right;">28.66</td>
<td style="text-align: right;">8.35</td>
<td style="text-align: right;">1.03</td>
</tr>
<tr class="odd">
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">120</td>
<td style="text-align: right;">1.13</td>
<td style="text-align: right;">1.35</td>
<td style="text-align: right;">27.83</td>
<td style="text-align: right;">8.13</td>
<td style="text-align: right;">1.01</td>
</tr>
<tr class="even">
<td style="text-align: left;">TRUE</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">120</td>
<td style="text-align: right;">1.13</td>
<td style="text-align: right;">1.32</td>
<td style="text-align: right;">29.07</td>
<td style="text-align: right;">9.24</td>
<td style="text-align: right;">1.00</td>
</tr>
</tbody>
</table>
</div>
</div>
<section id="play-mode-leaderboard" class="level3" data-number="4.2.1">
<h3 data-number="4.2.1" class="anchored" data-anchor-id="play-mode-leaderboard"><span class="header-section-number">4.2.1</span> Play Mode Leaderboard</h3>
<p>Top 10 configurations by atoms correct. Format matches typical LLM benchmark reporting for cross-study comparison.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>leaderboard_play <span class="ot">&lt;-</span> play_data <span class="sc">|&gt;</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">condition =</span> <span class="fu">paste0</span>(</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>      model_name, <span class="st">" | "</span>,</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ifelse</span>(prompt_style <span class="sc">==</span> <span class="st">"augmented"</span>, <span class="st">"Aug"</span>, <span class="st">"Base"</span>), <span class="st">" | "</span>,</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ifelse</span>(enable_thinking, <span class="st">"Think"</span>, <span class="st">"No-Think"</span>)</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(condition, model_name, prompt_style, enable_thinking) <span class="sc">|&gt;</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">atoms_correct_mean =</span> <span class="fu">mean</span>(atoms_correct),</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">atoms_correct_se =</span> <span class="fu">sd</span>(atoms_correct) <span class="sc">/</span> <span class="fu">sqrt</span>(n),</span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">score_mean =</span> <span class="fu">mean</span>(score),</span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">perfect_games =</span> <span class="fu">sum</span>(atoms_correct <span class="sc">==</span> <span class="dv">4</span>),</span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(atoms_correct_mean), score_mean) <span class="sc">|&gt;</span></span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">rank =</span> <span class="fu">row_number</span>(),</span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">atoms_ci =</span> <span class="fu">paste0</span>(<span class="fu">round</span>(atoms_correct_mean, <span class="dv">2</span>), <span class="st">" ± "</span>, <span class="fu">round</span>(atoms_correct_se, <span class="dv">2</span>)),</span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">perfect_pct =</span> <span class="fu">paste0</span>(<span class="fu">round</span>(perfect_games <span class="sc">/</span> n <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>), <span class="st">"%"</span>)</span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(rank, condition, atoms_ci, score_mean, perfect_pct, n) <span class="sc">|&gt;</span></span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(leaderboard_play,</span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Rank"</span>, <span class="st">"Configuration"</span>, <span class="st">"Atoms Correct (M ± SE)"</span>, <span class="st">"Score (M)"</span>, <span class="st">"Perfect Games"</span>, <span class="st">"N"</span>),</span>
<span id="cb27-29"><a href="#cb27-29" aria-hidden="true" tabindex="-1"></a>      <span class="at">caption =</span> <span class="st">"Play Mode Leaderboard (Top 10 Configurations)"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Play Mode Leaderboard (Top 10 Configurations)</caption>
<colgroup>
<col style="width: 5%">
<col style="width: 41%">
<col style="width: 24%">
<col style="width: 10%">
<col style="width: 14%">
<col style="width: 3%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">Rank</th>
<th style="text-align: left;">Configuration</th>
<th style="text-align: left;">Atoms Correct (M ± SE)</th>
<th style="text-align: right;">Score (M)</th>
<th style="text-align: left;">Perfect Games</th>
<th style="text-align: right;">N</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">Opus 4.5 | Aug | Think</td>
<td style="text-align: left;">1.8 ± 0.22</td>
<td style="text-align: right;">25.875</td>
<td style="text-align: left;">15%</td>
<td style="text-align: right;">40</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">Haiku 4.5 | Aug | Think</td>
<td style="text-align: left;">1.77 ± 0.23</td>
<td style="text-align: right;">26.400</td>
<td style="text-align: left;">22.5%</td>
<td style="text-align: right;">40</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">Sonnet 4.5 | Aug | Think</td>
<td style="text-align: left;">1.57 ± 0.21</td>
<td style="text-align: right;">27.675</td>
<td style="text-align: left;">10%</td>
<td style="text-align: right;">40</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: left;">Sonnet 4.5 | Aug | No-Think</td>
<td style="text-align: left;">1.23 ± 0.21</td>
<td style="text-align: right;">30.925</td>
<td style="text-align: left;">12.5%</td>
<td style="text-align: right;">40</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: left;">Opus 4.5 | Aug | No-Think</td>
<td style="text-align: left;">1.18 ± 0.21</td>
<td style="text-align: right;">29.625</td>
<td style="text-align: left;">12.5%</td>
<td style="text-align: right;">40</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td style="text-align: left;">Sonnet 4.5 | Base | No-Think</td>
<td style="text-align: left;">0.98 ± 0.21</td>
<td style="text-align: right;">27.475</td>
<td style="text-align: left;">10%</td>
<td style="text-align: right;">40</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7</td>
<td style="text-align: left;">Sonnet 4.5 | Base | Think</td>
<td style="text-align: left;">0.95 ± 0.18</td>
<td style="text-align: right;">28.000</td>
<td style="text-align: left;">2.5%</td>
<td style="text-align: right;">40</td>
</tr>
<tr class="even">
<td style="text-align: right;">8</td>
<td style="text-align: left;">Opus 4.5 | Base | No-Think</td>
<td style="text-align: left;">0.92 ± 0.19</td>
<td style="text-align: right;">28.200</td>
<td style="text-align: left;">5%</td>
<td style="text-align: right;">40</td>
</tr>
<tr class="odd">
<td style="text-align: right;">9</td>
<td style="text-align: left;">Opus 4.5 | Base | Think</td>
<td style="text-align: left;">0.92 ± 0.2</td>
<td style="text-align: right;">28.350</td>
<td style="text-align: left;">7.5%</td>
<td style="text-align: right;">40</td>
</tr>
<tr class="even">
<td style="text-align: right;">10</td>
<td style="text-align: left;">Haiku 4.5 | Aug | No-Think</td>
<td style="text-align: left;">0.88 ± 0.19</td>
<td style="text-align: right;">31.525</td>
<td style="text-align: left;">7.5%</td>
<td style="text-align: right;">40</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="anova-play-mode-performance" class="level3" data-number="4.2.2">
<h3 data-number="4.2.2" class="anchored" data-anchor-id="anova-play-mode-performance"><span class="header-section-number">4.2.2</span> ANOVA: Play Mode Performance</h3>
<p>Full factorial ANOVA using mixed-effects models with configuration-level random effects. Covariates (mean_atoms_per_ray, mean_cells_per_ray) capture ray difficulty.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert factors</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>play_data <span class="ot">&lt;-</span> play_data <span class="sc">|&gt;</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">model_name =</span> <span class="fu">factor</span>(model_name, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Haiku 4.5"</span>, <span class="st">"Sonnet 4.5"</span>, <span class="st">"Opus 4.5"</span>)),</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">prompt_style =</span> <span class="fu">factor</span>(prompt_style, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"baseline"</span>, <span class="st">"augmented"</span>)),</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">enable_thinking =</span> <span class="fu">factor</span>(enable_thinking, <span class="at">levels =</span> <span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">TRUE</span>)),</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">vot_grid_state =</span> <span class="fu">factor</span>(vot_grid_state, <span class="at">levels =</span> <span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">TRUE</span>)),</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">vot_ray_trace =</span> <span class="fu">factor</span>(vot_ray_trace, <span class="at">levels =</span> <span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">TRUE</span>)),</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">vot_hypothesis =</span> <span class="fu">factor</span>(vot_hypothesis, <span class="at">levels =</span> <span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">TRUE</span>))</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Build model formula dynamically</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>has_model_var <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(play_data<span class="sc">$</span>model_name)) <span class="sc">&gt;</span> <span class="dv">1</span></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>has_prompt_var <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(play_data<span class="sc">$</span>prompt_style)) <span class="sc">&gt;</span> <span class="dv">1</span></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>has_thinking_var <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(play_data<span class="sc">$</span>enable_thinking)) <span class="sc">&gt;</span> <span class="dv">1</span></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>has_vot_grid <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(play_data<span class="sc">$</span>vot_grid_state)) <span class="sc">&gt;</span> <span class="dv">1</span></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>has_vot_ray <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(play_data<span class="sc">$</span>vot_ray_trace)) <span class="sc">&gt;</span> <span class="dv">1</span></span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>has_vot_hyp <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(play_data<span class="sc">$</span>vot_hypothesis)) <span class="sc">&gt;</span> <span class="dv">1</span></span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Build main formula</span></span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a>formula_parts <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (has_model_var) formula_parts <span class="ot">&lt;-</span> <span class="fu">c</span>(formula_parts, <span class="st">"model_name"</span>)</span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (has_prompt_var) formula_parts <span class="ot">&lt;-</span> <span class="fu">c</span>(formula_parts, <span class="st">"prompt_style"</span>)</span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (has_thinking_var) formula_parts <span class="ot">&lt;-</span> <span class="fu">c</span>(formula_parts, <span class="st">"enable_thinking"</span>)</span>
<span id="cb28-25"><a href="#cb28-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-26"><a href="#cb28-26" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (has_model_var <span class="sc">&amp;&amp;</span> has_prompt_var <span class="sc">&amp;&amp;</span> has_thinking_var) {</span>
<span id="cb28-27"><a href="#cb28-27" aria-hidden="true" tabindex="-1"></a>  main_formula <span class="ot">&lt;-</span> <span class="st">"model_name * prompt_style * enable_thinking"</span></span>
<span id="cb28-28"><a href="#cb28-28" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb28-29"><a href="#cb28-29" aria-hidden="true" tabindex="-1"></a>  main_formula <span class="ot">&lt;-</span> <span class="fu">paste</span>(formula_parts, <span class="at">collapse =</span> <span class="st">" + "</span>)</span>
<span id="cb28-30"><a href="#cb28-30" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb28-31"><a href="#cb28-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-32"><a href="#cb28-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Add VoT factors</span></span>
<span id="cb28-33"><a href="#cb28-33" aria-hidden="true" tabindex="-1"></a>vot_parts <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb28-34"><a href="#cb28-34" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (has_vot_grid) vot_parts <span class="ot">&lt;-</span> <span class="fu">c</span>(vot_parts, <span class="st">"vot_grid_state"</span>)</span>
<span id="cb28-35"><a href="#cb28-35" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (has_vot_ray) vot_parts <span class="ot">&lt;-</span> <span class="fu">c</span>(vot_parts, <span class="st">"vot_ray_trace"</span>)</span>
<span id="cb28-36"><a href="#cb28-36" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (has_vot_hyp) vot_parts <span class="ot">&lt;-</span> <span class="fu">c</span>(vot_parts, <span class="st">"vot_hypothesis"</span>)</span>
<span id="cb28-37"><a href="#cb28-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-38"><a href="#cb28-38" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">length</span>(vot_parts) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb28-39"><a href="#cb28-39" aria-hidden="true" tabindex="-1"></a>  atoms_formula <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"atoms_correct ~ "</span>, main_formula, <span class="st">" + "</span>,</span>
<span id="cb28-40"><a href="#cb28-40" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">paste</span>(vot_parts, <span class="at">collapse =</span> <span class="st">" + "</span>),</span>
<span id="cb28-41"><a href="#cb28-41" aria-hidden="true" tabindex="-1"></a>                          <span class="st">" + mean_cells_per_ray + mean_atoms_per_ray + (1 | config_index)"</span>)</span>
<span id="cb28-42"><a href="#cb28-42" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb28-43"><a href="#cb28-43" aria-hidden="true" tabindex="-1"></a>  atoms_formula <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"atoms_correct ~ "</span>, main_formula,</span>
<span id="cb28-44"><a href="#cb28-44" aria-hidden="true" tabindex="-1"></a>                          <span class="st">" + mean_cells_per_ray + mean_atoms_per_ray + (1 | config_index)"</span>)</span>
<span id="cb28-45"><a href="#cb28-45" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb28-46"><a href="#cb28-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-47"><a href="#cb28-47" aria-hidden="true" tabindex="-1"></a>model_atoms <span class="ot">&lt;-</span> <span class="fu">lmer</span>(<span class="fu">as.formula</span>(atoms_formula), <span class="at">data =</span> play_data)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<section id="model-1-atoms-correct-0-4" class="level4" data-number="4.2.2.1">
<h4 data-number="4.2.2.1" class="anchored" data-anchor-id="model-1-atoms-correct-0-4"><span class="header-section-number">4.2.2.1</span> Model 1: Atoms Correct (0-4)</h4>
<p>Testing which factors affect the number of atoms correctly identified.</p>
<p><strong>Model formula</strong>: atoms_correct ~ model_name * prompt_style * enable_thinking + vot_grid_state + vot_ray_trace + vot_hypothesis + mean_cells_per_ray + mean_atoms_per_ray + (1 | config_index)</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Deviance Table (Type III Wald chisquare tests)

Response: atoms_correct
                                          Chisq Df Pr(&gt;Chisq)    
(Intercept)                             27.2631  1  1.776e-07 ***
model_name                               0.3670  2  0.8323348    
prompt_style                             0.0036  1  0.9520407    
enable_thinking                          0.8654  1  0.3522327    
vot_grid_state                           0.0599  1  0.8065953    
vot_ray_trace                            0.0614  1  0.8042212    
vot_hypothesis                           0.0005  1  0.9822117    
mean_cells_per_ray                      14.2036  1  0.0001641 ***
mean_atoms_per_ray                      10.0086  1  0.0015581 ** 
model_name:prompt_style                  1.4129  2  0.4933897    
model_name:enable_thinking               0.3365  2  0.8451256    
prompt_style:enable_thinking            15.3121  1  9.113e-05 ***
model_name:prompt_style:enable_thinking  3.9425  2  0.1392848    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code> Groups       Name        Std.Dev.
 config_index (Intercept) 0.86425 
 Residual                 0.79650 </code></pre>
</div>
</div>
<p><strong>Random Effects</strong> — Configuration (config_index) variance accounts for config-level difficulty and allows generalization beyond these 10 configurations.</p>
<p><strong>ICC</strong>: 0.541 — Proportion of variance due to configuration clustering</p>
<p><strong>Model Fit</strong>: - <strong>Marginal R²</strong> (fixed effects only): 0.123 - <strong>Conditional R²</strong> (fixed + random effects): 0.597</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Model 2: Score (main effects with config random effects)</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">length</span>(vot_parts) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  score_formula <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"score ~ "</span>, main_formula, <span class="st">" + "</span>,</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">paste</span>(vot_parts, <span class="at">collapse =</span> <span class="st">" + "</span>),</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>                          <span class="st">" + mean_cells_per_ray + mean_atoms_per_ray + (1 | config_index)"</span>)</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>  score_formula <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"score ~ "</span>, main_formula,</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>                          <span class="st">" + mean_cells_per_ray + mean_atoms_per_ray + (1 | config_index)"</span>)</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>model_score <span class="ot">&lt;-</span> <span class="fu">lmer</span>(<span class="fu">as.formula</span>(score_formula), <span class="at">data =</span> play_data)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
<section id="model-2-score-lower-is-better" class="level4" data-number="4.2.2.2">
<h4 data-number="4.2.2.2" class="anchored" data-anchor-id="model-2-score-lower-is-better"><span class="header-section-number">4.2.2.2</span> Model 2: Score (Lower is Better)</h4>
<p>Testing which factors affect game score.</p>
<p><strong>Model formula</strong>: score ~ model_name * prompt_style * enable_thinking + vot_grid_state + vot_ray_trace + vot_hypothesis + mean_cells_per_ray + mean_atoms_per_ray + (1 | config_index)</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Deviance Table (Type III Wald chisquare tests)

Response: score
                                          Chisq Df Pr(&gt;Chisq)    
(Intercept)                             23.5213  1  1.235e-06 ***
model_name                               0.3128  2    0.85524    
prompt_style                            11.5430  1    0.00068 ***
enable_thinking                          5.5337  1    0.01865 *  
vot_grid_state                           1.9582  1    0.16171    
vot_ray_trace                            0.0620  1    0.80331    
vot_hypothesis                           1.9525  1    0.16231    
mean_cells_per_ray                      55.5404  1  9.156e-14 ***
mean_atoms_per_ray                       4.3600  1    0.03679 *  
model_name:prompt_style                  2.0350  2    0.36150    
model_name:enable_thinking               4.0974  2    0.12890    
prompt_style:enable_thinking            19.1000  1  1.240e-05 ***
model_name:prompt_style:enable_thinking  5.8130  2    0.05467 .  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code> Groups       Name        Std.Dev.
 config_index (Intercept) 6.4130  
 Residual                 5.3934  </code></pre>
</div>
</div>
<p><strong>ICC</strong>: 0.586</p>
<p><strong>Model Fit</strong>: - <strong>Marginal R²</strong>: 0.104 - <strong>Conditional R²</strong>: 0.629</p>
<pre><code>
### Effect Modification by Ray Complexity (Play Mode)

Does ray complexity (mean atoms per ray) moderate treatment effects?


::: {.cell}

```{.r .cell-code}
run_play_effect_mod &lt;- has_model_var || has_prompt_var || has_thinking_var

if (run_play_effect_mod) {
  # Build interaction formula with random effect
  interaction_parts &lt;- c()
  if (has_model_var) interaction_parts &lt;- c(interaction_parts, "model_name * mean_atoms_per_ray")
  if (has_prompt_var) interaction_parts &lt;- c(interaction_parts, "prompt_style * mean_atoms_per_ray")
  if (has_thinking_var) interaction_parts &lt;- c(interaction_parts, "enable_thinking * mean_atoms_per_ray")

  atoms_mod_formula &lt;- paste0("atoms_correct ~ ",
                              paste(interaction_parts, collapse = " + "),
                              " + (1 | config_index)")
  score_mod_formula &lt;- paste0("score ~ ",
                              paste(interaction_parts, collapse = " + "),
                              " + (1 | config_index)")

  model_atoms_mod &lt;- lmer(as.formula(atoms_mod_formula), data = play_data)
  model_score_mod &lt;- lmer(as.formula(score_mod_formula), data = play_data)
}</code></pre>
<p>:::</p>
<p><strong>Atoms Correct Model</strong>: atoms_correct ~ model_name * mean_atoms_per_ray + prompt_style * mean_atoms_per_ray + enable_thinking * mean_atoms_per_ray + (1 | config_index)</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Deviance Table (Type III Wald chisquare tests)

Response: atoms_correct
                                    Chisq Df Pr(&gt;Chisq)   
(Intercept)                        5.1668  1   0.023022 * 
model_name                         0.4739  2   0.789024   
mean_atoms_per_ray                 1.2987  1   0.254447   
prompt_style                       8.8511  1   0.002929 **
enable_thinking                    1.4040  1   0.236057   
model_name:mean_atoms_per_ray      0.9369  2   0.625956   
mean_atoms_per_ray:prompt_style    1.3581  1   0.243861   
mean_atoms_per_ray:enable_thinking 0.0355  1   0.850581   
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<p><strong>Score Model</strong>: score ~ model_name * mean_atoms_per_ray + prompt_style * mean_atoms_per_ray + enable_thinking * mean_atoms_per_ray + (1 | config_index)</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Deviance Table (Type III Wald chisquare tests)

Response: score
                                      Chisq Df Pr(&gt;Chisq)    
(Intercept)                        134.4055  1  &lt; 2.2e-16 ***
model_name                           0.9796  2  0.6127337    
mean_atoms_per_ray                  17.1909  1  3.381e-05 ***
prompt_style                        11.0847  1  0.0008704 ***
enable_thinking                      0.6117  1  0.4341481    
model_name:mean_atoms_per_ray        1.0161  2  0.6016530    
mean_atoms_per_ray:prompt_style     13.9388  1  0.0001889 ***
mean_atoms_per_ray:enable_thinking   0.0267  1  0.8701434    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
</section>
</section>
<section id="regression-analysis-play-mode" class="level3" data-number="4.2.3">
<h3 data-number="4.2.3" class="anchored" data-anchor-id="regression-analysis-play-mode"><span class="header-section-number">4.2.3</span> Regression Analysis: Play Mode</h3>
<p>Regression complements ANOVA by providing interpretable effect magnitudes. Coefficients show the expected change in outcome per unit change in predictor.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Build formula with factors that have variation</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>regression_parts <span class="ot">&lt;-</span> formula_parts  <span class="co"># From earlier: model_name, prompt_style, enable_thinking</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (has_vot_grid) regression_parts <span class="ot">&lt;-</span> <span class="fu">c</span>(regression_parts, <span class="st">"vot_grid_state"</span>)</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (has_vot_ray) regression_parts <span class="ot">&lt;-</span> <span class="fu">c</span>(regression_parts, <span class="st">"vot_ray_trace"</span>)</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (has_vot_hyp) regression_parts <span class="ot">&lt;-</span> <span class="fu">c</span>(regression_parts, <span class="st">"vot_hypothesis"</span>)</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>regression_parts <span class="ot">&lt;-</span> <span class="fu">c</span>(regression_parts, <span class="st">"mean_atoms_per_ray"</span>, <span class="st">"mean_cells_per_ray"</span>)</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>atoms_reg_formula <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"atoms_correct ~ "</span>, <span class="fu">paste</span>(regression_parts, <span class="at">collapse =</span> <span class="st">" + "</span>),</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>                            <span class="st">" + (1 | config_index)"</span>)</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>lmer_atoms <span class="ot">&lt;-</span> <span class="fu">lmer</span>(<span class="fu">as.formula</span>(atoms_reg_formula), <span class="at">data =</span> play_data)</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Tidy summary (fixed effects only)</span></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>atoms_reg_summary <span class="ot">&lt;-</span> <span class="fu">tidy</span>(lmer_atoms, <span class="at">effects =</span> <span class="st">"fixed"</span>, <span class="at">conf.int =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(estimate, conf.low, conf.high, statistic), <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">3</span>)),</span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>         <span class="at">p.value =</span> <span class="fu">format.pval</span>(p.value, <span class="at">digits =</span> <span class="dv">3</span>, <span class="at">eps =</span> <span class="fl">0.001</span>)) <span class="sc">|&gt;</span></span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(term, estimate, std.error, statistic, p.value, conf.low, conf.high)</span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(atoms_reg_summary,</span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Term"</span>, <span class="st">"β (Coefficient)"</span>, <span class="st">"SE"</span>, <span class="st">"t-statistic"</span>, <span class="st">"p-value"</span>, <span class="st">"95% CI Lower"</span>, <span class="st">"95% CI Upper"</span>),</span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a>      <span class="at">caption =</span> <span class="st">"Regression Coefficients: Atoms Correct (Fixed Effects)"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Regression Coefficients: Atoms Correct (Fixed Effects)</caption>
<colgroup>
<col style="width: 23%">
<col style="width: 17%">
<col style="width: 10%">
<col style="width: 12%">
<col style="width: 8%">
<col style="width: 13%">
<col style="width: 13%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Term</th>
<th style="text-align: right;">β (Coefficient)</th>
<th style="text-align: right;">SE</th>
<th style="text-align: right;">t-statistic</th>
<th style="text-align: left;">p-value</th>
<th style="text-align: right;">95% CI Lower</th>
<th style="text-align: right;">95% CI Upper</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">2.361</td>
<td style="text-align: right;">0.4790025</td>
<td style="text-align: right;">4.930</td>
<td style="text-align: left;">&lt; 0.001</td>
<td style="text-align: right;">1.404</td>
<td style="text-align: right;">3.319</td>
</tr>
<tr class="even">
<td style="text-align: left;">model_nameSonnet 4.5</td>
<td style="text-align: right;">0.135</td>
<td style="text-align: right;">0.0911824</td>
<td style="text-align: right;">1.481</td>
<td style="text-align: left;">0.13916</td>
<td style="text-align: right;">-0.044</td>
<td style="text-align: right;">0.314</td>
</tr>
<tr class="odd">
<td style="text-align: left;">model_nameOpus 4.5</td>
<td style="text-align: right;">0.164</td>
<td style="text-align: right;">0.0908236</td>
<td style="text-align: right;">1.802</td>
<td style="text-align: left;">0.07227</td>
<td style="text-align: right;">-0.015</td>
<td style="text-align: right;">0.342</td>
</tr>
<tr class="even">
<td style="text-align: left;">prompt_styleaugmented</td>
<td style="text-align: right;">0.494</td>
<td style="text-align: right;">0.0742062</td>
<td style="text-align: right;">6.656</td>
<td style="text-align: left;">&lt; 0.001</td>
<td style="text-align: right;">0.348</td>
<td style="text-align: right;">0.640</td>
</tr>
<tr class="odd">
<td style="text-align: left;">enable_thinkingTRUE</td>
<td style="text-align: right;">0.236</td>
<td style="text-align: right;">0.0754796</td>
<td style="text-align: right;">3.122</td>
<td style="text-align: left;">0.00191</td>
<td style="text-align: right;">0.087</td>
<td style="text-align: right;">0.384</td>
</tr>
<tr class="even">
<td style="text-align: left;">vot_grid_stateTRUE</td>
<td style="text-align: right;">-0.024</td>
<td style="text-align: right;">0.1047820</td>
<td style="text-align: right;">-0.230</td>
<td style="text-align: left;">0.81816</td>
<td style="text-align: right;">-0.230</td>
<td style="text-align: right;">0.182</td>
</tr>
<tr class="odd">
<td style="text-align: left;">vot_ray_traceTRUE</td>
<td style="text-align: right;">-0.025</td>
<td style="text-align: right;">0.1047642</td>
<td style="text-align: right;">-0.242</td>
<td style="text-align: left;">0.80867</td>
<td style="text-align: right;">-0.231</td>
<td style="text-align: right;">0.180</td>
</tr>
<tr class="even">
<td style="text-align: left;">vot_hypothesisTRUE</td>
<td style="text-align: right;">-0.005</td>
<td style="text-align: right;">0.1049183</td>
<td style="text-align: right;">-0.050</td>
<td style="text-align: left;">0.95976</td>
<td style="text-align: right;">-0.211</td>
<td style="text-align: right;">0.201</td>
</tr>
<tr class="odd">
<td style="text-align: left;">mean_atoms_per_ray</td>
<td style="text-align: right;">-0.575</td>
<td style="text-align: right;">0.2067574</td>
<td style="text-align: right;">-2.782</td>
<td style="text-align: left;">0.00562</td>
<td style="text-align: right;">-0.981</td>
<td style="text-align: right;">-0.169</td>
</tr>
<tr class="even">
<td style="text-align: left;">mean_cells_per_ray</td>
<td style="text-align: right;">-0.174</td>
<td style="text-align: right;">0.0425068</td>
<td style="text-align: right;">-4.101</td>
<td style="text-align: left;">&lt; 0.001</td>
<td style="text-align: right;">-0.258</td>
<td style="text-align: right;">-0.091</td>
</tr>
</tbody>
</table>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>r2_atoms_reg <span class="ot">&lt;-</span> performance<span class="sc">::</span><span class="fu">r2_nakagawa</span>(lmer_atoms)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Model for Score</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>score_reg_formula <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"score ~ "</span>, <span class="fu">paste</span>(regression_parts, <span class="at">collapse =</span> <span class="st">" + "</span>),</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>                            <span class="st">" + (1 | config_index)"</span>)</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>lmer_score <span class="ot">&lt;-</span> <span class="fu">lmer</span>(<span class="fu">as.formula</span>(score_reg_formula), <span class="at">data =</span> play_data)</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>score_reg_summary <span class="ot">&lt;-</span> <span class="fu">tidy</span>(lmer_score, <span class="at">effects =</span> <span class="st">"fixed"</span>, <span class="at">conf.int =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(estimate, conf.low, conf.high, statistic), <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">3</span>)),</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">p.value =</span> <span class="fu">format.pval</span>(p.value, <span class="at">digits =</span> <span class="dv">3</span>, <span class="at">eps =</span> <span class="fl">0.001</span>)) <span class="sc">|&gt;</span></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(term, estimate, std.error, statistic, p.value, conf.low, conf.high)</span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(score_reg_summary,</span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Term"</span>, <span class="st">"β (Coefficient)"</span>, <span class="st">"SE"</span>, <span class="st">"t-statistic"</span>, <span class="st">"p-value"</span>, <span class="st">"95% CI Lower"</span>, <span class="st">"95% CI Upper"</span>),</span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">caption =</span> <span class="st">"Regression Coefficients: Score (Fixed Effects)"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Regression Coefficients: Score (Fixed Effects)</caption>
<colgroup>
<col style="width: 23%">
<col style="width: 17%">
<col style="width: 10%">
<col style="width: 12%">
<col style="width: 8%">
<col style="width: 13%">
<col style="width: 13%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Term</th>
<th style="text-align: right;">β (Coefficient)</th>
<th style="text-align: right;">SE</th>
<th style="text-align: right;">t-statistic</th>
<th style="text-align: left;">p-value</th>
<th style="text-align: right;">95% CI Lower</th>
<th style="text-align: right;">95% CI Upper</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">18.409</td>
<td style="text-align: right;">3.3575784</td>
<td style="text-align: right;">5.483</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: right;">11.673</td>
<td style="text-align: right;">25.144</td>
</tr>
<tr class="even">
<td style="text-align: left;">model_nameSonnet 4.5</td>
<td style="text-align: right;">-0.619</td>
<td style="text-align: right;">0.6173580</td>
<td style="text-align: right;">-1.003</td>
<td style="text-align: left;">0.3165</td>
<td style="text-align: right;">-1.832</td>
<td style="text-align: right;">0.594</td>
</tr>
<tr class="odd">
<td style="text-align: left;">model_nameOpus 4.5</td>
<td style="text-align: right;">-0.869</td>
<td style="text-align: right;">0.6149246</td>
<td style="text-align: right;">-1.413</td>
<td style="text-align: left;">0.1585</td>
<td style="text-align: right;">-2.077</td>
<td style="text-align: right;">0.340</td>
</tr>
<tr class="even">
<td style="text-align: left;">prompt_styleaugmented</td>
<td style="text-align: right;">0.633</td>
<td style="text-align: right;">0.5024199</td>
<td style="text-align: right;">1.260</td>
<td style="text-align: left;">0.2082</td>
<td style="text-align: right;">-0.354</td>
<td style="text-align: right;">1.621</td>
</tr>
<tr class="odd">
<td style="text-align: left;">enable_thinkingTRUE</td>
<td style="text-align: right;">-1.230</td>
<td style="text-align: right;">0.5110886</td>
<td style="text-align: right;">-2.407</td>
<td style="text-align: left;">0.0165</td>
<td style="text-align: right;">-2.235</td>
<td style="text-align: right;">-0.226</td>
</tr>
<tr class="even">
<td style="text-align: left;">vot_grid_stateTRUE</td>
<td style="text-align: right;">0.967</td>
<td style="text-align: right;">0.7094300</td>
<td style="text-align: right;">1.363</td>
<td style="text-align: left;">0.1736</td>
<td style="text-align: right;">-0.427</td>
<td style="text-align: right;">2.361</td>
</tr>
<tr class="odd">
<td style="text-align: left;">vot_ray_traceTRUE</td>
<td style="text-align: right;">-0.174</td>
<td style="text-align: right;">0.7093091</td>
<td style="text-align: right;">-0.246</td>
<td style="text-align: left;">0.8061</td>
<td style="text-align: right;">-1.568</td>
<td style="text-align: right;">1.220</td>
</tr>
<tr class="even">
<td style="text-align: left;">vot_hypothesisTRUE</td>
<td style="text-align: right;">0.995</td>
<td style="text-align: right;">0.7103532</td>
<td style="text-align: right;">1.401</td>
<td style="text-align: left;">0.1619</td>
<td style="text-align: right;">-0.401</td>
<td style="text-align: right;">2.391</td>
</tr>
<tr class="odd">
<td style="text-align: left;">mean_atoms_per_ray</td>
<td style="text-align: right;">-3.464</td>
<td style="text-align: right;">1.4037725</td>
<td style="text-align: right;">-2.467</td>
<td style="text-align: left;">0.0140</td>
<td style="text-align: right;">-6.222</td>
<td style="text-align: right;">-0.705</td>
</tr>
<tr class="even">
<td style="text-align: left;">mean_cells_per_ray</td>
<td style="text-align: right;">2.233</td>
<td style="text-align: right;">0.2880145</td>
<td style="text-align: right;">7.752</td>
<td style="text-align: left;">&lt;0.001</td>
<td style="text-align: right;">1.667</td>
<td style="text-align: right;">2.799</td>
</tr>
</tbody>
</table>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>r2_score_reg <span class="ot">&lt;-</span> performance<span class="sc">::</span><span class="fu">r2_nakagawa</span>(lmer_score)</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Standardized coefficients for comparison</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>std_coef_atoms <span class="ot">&lt;-</span> <span class="fu">standardize_parameters</span>(lmer_atoms, <span class="at">method =</span> <span class="st">"refit"</span>)</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>std_coef_score <span class="ot">&lt;-</span> <span class="fu">standardize_parameters</span>(lmer_score, <span class="at">method =</span> <span class="st">"refit"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p><strong>Model Fit — Atoms Correct</strong>: - Marginal R²: 0.099 - Conditional R²: 0.584</p>
<p><strong>Model Fit — Score</strong>: - Marginal R²: 0.085 - Conditional R²: 0.62</p>
<section id="standardized-coefficients-beta-weights" class="level4" data-number="4.2.3.1">
<h4 data-number="4.2.3.1" class="anchored" data-anchor-id="standardized-coefficients-beta-weights"><span class="header-section-number">4.2.3.1</span> Standardized Coefficients (Beta Weights)</h4>
<p>Allows comparison of relative importance across fixed effects (based on fixed effects only).</p>
<p><strong>Atoms Correct (Top 10)</strong>:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># Standardization method: refit

Parameter                | Std. Coef. |         95% CI
------------------------------------------------------
prompt style [augmented] |       0.37 | [ 0.26,  0.48]
enable thinking [TRUE]   |       0.18 | [ 0.07,  0.29]
mean cells per ray       |      -0.13 | [-0.20, -0.07]
mean atoms per ray       |      -0.13 | [-0.22, -0.04]
model name [Opus 4.5]    |       0.12 | [-0.01,  0.26]
model name [Sonnet 4.5]  |       0.10 | [-0.03,  0.24]
vot ray trace [TRUE]     |      -0.02 | [-0.17,  0.14]
vot grid state [TRUE]    |      -0.02 | [-0.17,  0.14]
vot hypothesis [TRUE]    |  -4.01e-03 | [-0.16,  0.15]</code></pre>
</div>
</div>
<p><strong>Score (Top 10)</strong>:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># Standardization method: refit

Parameter                | Std. Coef. |         95% CI
------------------------------------------------------
mean cells per ray       |       0.27 | [ 0.20,  0.34]
enable thinking [TRUE]   |      -0.15 | [-0.26, -0.03]
mean atoms per ray       |      -0.12 | [-0.22, -0.02]
vot hypothesis [TRUE]    |       0.12 | [-0.05,  0.28]
vot grid state [TRUE]    |       0.11 | [-0.05,  0.28]
model name [Opus 4.5]    |      -0.10 | [-0.25,  0.04]
prompt style [augmented] |       0.08 | [-0.04,  0.19]
model name [Sonnet 4.5]  |      -0.07 | [-0.22,  0.07]
vot ray trace [TRUE]     |      -0.02 | [-0.19,  0.14]</code></pre>
</div>
</div>
</section>
</section>
<section id="interpretation-why-configuration-random-effects" class="level3" data-number="4.2.4">
<h3 data-number="4.2.4" class="anchored" data-anchor-id="interpretation-why-configuration-random-effects"><span class="header-section-number">4.2.4</span> Interpretation: Why Configuration Random Effects?</h3>
<p><strong>Play mode data structure</strong>: - Unit of analysis: Entire games (one game per config × condition) - LLM chooses which rays to fire (endogenous ray selection) - Different conditions may fire different rays - Multiple games per configuration (clustering)</p>
<p><strong>Why config-level random effects?</strong></p>
<ol type="1">
<li>Games within same config share atom placement</li>
<li>Some configs are inherently harder/easier (random variation)</li>
<li>Generalizes inference beyond these 10 specific configurations</li>
<li>Accounts for correlation among games within same config</li>
</ol>
<p><strong>Why NOT ray-level random effects (unlike Predict mode)?</strong></p>
<ol type="1">
<li>Rays are not predetermined—LLM chooses them</li>
<li>Different conditions may fire different rays</li>
<li>Ray selection is part of the strategy (endogenous)</li>
<li>No repeated measures at individual ray level</li>
</ol>
<p><strong>Covariates</strong> (mean_cells_per_ray, mean_atoms_per_ray): - <strong>NOT confounders</strong>: Ray choice is endogenous to experimental condition - <strong>ARE precision variables</strong>: Describe difficulty of rays LLM chose to fire - <strong>Improve model fit</strong>: Explain variance, increase power</p>
<p><strong>Impact of ignoring config-level clustering</strong>: - Underestimates standard errors - Inflates Type I error (false positives) - Invalid inference (cannot generalize beyond these 10 configs)</p>
<pre><code>

::: {.cell}

```{.r .cell-code}
# Atoms correct by model and thinking
p1 &lt;- ggplot(play_data, aes(x = model_name, y = atoms_correct, fill = enable_thinking)) +
  geom_boxplot() +
  facet_wrap(~prompt_style) +
  labs(title = "Atoms Correct by Model, Thinking, and Prompt Style",
       x = "Model", y = "Atoms Correct (0-4)", fill = "Thinking") +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
print(p1)</code></pre>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="blackbox_llm_study_files/figure-html/play-visualizations-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Score distribution</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(play_data, <span class="fu">aes</span>(<span class="at">x =</span> model_name, <span class="at">y =</span> score, <span class="at">fill =</span> enable_thinking)) <span class="sc">+</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>prompt_style) <span class="sc">+</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Score by Model, Thinking, and Prompt Style"</span>,</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Model"</span>, <span class="at">y =</span> <span class="st">"Score (lower is better)"</span>, <span class="at">fill =</span> <span class="st">"Thinking"</span>) <span class="sc">+</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p2)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="blackbox_llm_study_files/figure-html/play-visualizations-2.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mean atoms per ray relationship with performance</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>p3 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(play_data, <span class="fu">aes</span>(<span class="at">x =</span> mean_atoms_per_ray, <span class="at">y =</span> atoms_correct, <span class="at">color =</span> model_name)) <span class="sc">+</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Performance vs Ray Complexity"</span>,</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Mean Atoms Affecting Each Ray"</span>, <span class="at">y =</span> <span class="st">"Atoms Correct"</span>,</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">"Model"</span>) <span class="sc">+</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p3)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="blackbox_llm_study_files/figure-html/play-visualizations-3.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Interaction plot: Prompt Style × Thinking</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>p4 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(play_data, <span class="fu">aes</span>(<span class="at">x =</span> prompt_style, <span class="at">y =</span> atoms_correct,</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>                            <span class="at">color =</span> enable_thinking, <span class="at">group =</span> enable_thinking)) <span class="sc">+</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun =</span> mean, <span class="at">geom =</span> <span class="st">"point"</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun =</span> mean, <span class="at">geom =</span> <span class="st">"line"</span>, <span class="at">linewidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun.data =</span> mean_se, <span class="at">geom =</span> <span class="st">"errorbar"</span>, <span class="at">width =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Prompt Style × Thinking Interaction"</span>,</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Prompt Style"</span>, <span class="at">y =</span> <span class="st">"Atoms Correct (mean ± SE)"</span>,</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">"Thinking"</span>) <span class="sc">+</span></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p4)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="blackbox_llm_study_files/figure-html/play-visualizations-4.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
<p>:::</p>
</section>
</section>
<section id="error-analysis" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="error-analysis"><span class="header-section-number">4.3</span> Error Analysis</h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Placeholder for error taxonomy</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Will categorize errors from extended thinking traces</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="co"># error_categories &lt;- c(</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="co">#   "Constraint tracking failure",</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a><span class="co">#   "Spatial reasoning error",</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a><span class="co">#   "Non-parsimonious hypothesis",</span></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a><span class="co">#   "Failure to update on evidence",</span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a><span class="co">#   "Experiment design inefficiency"</span></span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a><span class="co"># )</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>[Error analysis to be added after data collection]</p>
</section>
</section>
<section id="discussion" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Discussion</h1>
<section id="summary-of-findings" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="summary-of-findings"><span class="header-section-number">5.1</span> Summary of Findings</h2>
<p>[To be completed after data collection]</p>
</section>
<section id="relation-to-literature" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="relation-to-literature"><span class="header-section-number">5.2</span> Relation to Literature</h2>
<section id="constraint-satisfaction" class="level3" data-number="5.2.1">
<h3 data-number="5.2.1" class="anchored" data-anchor-id="constraint-satisfaction"><span class="header-section-number">5.2.1</span> Constraint Satisfaction</h3>
<p>[Discuss how results relate to ZebraLogic, GenCP findings]</p>
</section>
<section id="spatial-reasoning" class="level3" data-number="5.2.2">
<h3 data-number="5.2.2" class="anchored" data-anchor-id="spatial-reasoning"><span class="header-section-number">5.2.2</span> Spatial Reasoning</h3>
<p>[Discuss how results relate to PLUGH, spatial reasoning benchmarks]</p>
</section>
<section id="world-models" class="level3" data-number="5.2.3">
<h3 data-number="5.2.3" class="anchored" data-anchor-id="world-models"><span class="header-section-number">5.2.3</span> World Models</h3>
<p>[Discuss how results relate to pulley system, text world simulator findings]</p>
</section>
<section id="abductive-reasoning" class="level3" data-number="5.2.4">
<h3 data-number="5.2.4" class="anchored" data-anchor-id="abductive-reasoning"><span class="header-section-number">5.2.4</span> Abductive Reasoning</h3>
<p>[Discuss how results relate to Occam’s Razor, hypothesis generation findings]</p>
</section>
</section>
<section id="implications" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="implications"><span class="header-section-number">5.3</span> Implications</h2>
<section id="for-llm-deployment-in-diagnostic-domains" class="level3" data-number="5.3.1">
<h3 data-number="5.3.1" class="anchored" data-anchor-id="for-llm-deployment-in-diagnostic-domains"><span class="header-section-number">5.3.1</span> For LLM Deployment in Diagnostic Domains</h3>
<p>[Discuss implications for medical diagnosis, fault detection, and other diagnostic tasks]</p>
</section>
<section id="for-llm-modulo-architectures" class="level3" data-number="5.3.2">
<h3 data-number="5.3.2" class="anchored" data-anchor-id="for-llm-modulo-architectures"><span class="header-section-number">5.3.2</span> For LLM-Modulo Architectures</h3>
<p>[Discuss whether tool augmentation addresses the limitations]</p>
</section>
<section id="for-benchmark-development" class="level3" data-number="5.3.3">
<h3 data-number="5.3.3" class="anchored" data-anchor-id="for-benchmark-development"><span class="header-section-number">5.3.3</span> For Benchmark Development</h3>
<p>[Discuss Black Box as a diagnostic tool for reasoning assessment]</p>
</section>
</section>
<section id="limitations" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="limitations"><span class="header-section-number">5.4</span> Limitations</h2>
<ol type="1">
<li><strong>Single game domain</strong>: Results may not generalize to all reasoning tasks</li>
<li><strong>Prompt sensitivity</strong>: Different prompt formulations might yield different results</li>
<li><strong>Model versions</strong>: Rapid model updates may change performance characteristics</li>
<li><strong>Sample size</strong>: [Discuss statistical power]</li>
</ol>
</section>
<section id="future-directions" class="level2" data-number="5.5">
<h2 data-number="5.5" class="anchored" data-anchor-id="future-directions"><span class="header-section-number">5.5</span> Future Directions</h2>
<ol type="1">
<li><strong>Extended model comparison</strong>: GPT-4, Gemini, open-source models</li>
<li><strong>Tool augmentation study</strong>: Provide ray-tracing verification tool</li>
<li><strong>Difficulty manipulation</strong>: Vary grid size, atom count, atom arrangement</li>
<li><strong>Human baseline</strong>: Compare LLM performance to human players</li>
<li><strong>Fine-tuning study</strong>: Following the approach of <span class="citation" data-cites="wang2025mastermind">Y. Wang et al. (<a href="#ref-wang2025mastermind" role="doc-biblioref">2025</a>)</span>, who demonstrated substantial reasoning improvements through game-specific training on Doudizhu and Go, test whether task-specific training on Black Box traces improves performance. Of particular interest is whether such training would generalize to novel atom configurations (in-distribution transfer) and to other spatial reasoning tasks (out-of-distribution transfer), or whether improvements would be limited to memorized patterns—the “catastrophic forgetting” phenomenon observed in their work when game training interfered with unrelated reasoning tasks</li>
</ol>
</section>
</section>
<section id="conclusion" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Conclusion</h1>
<p>[To be completed after data collection]</p>
</section>
<section id="references" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> References</h1>
</section>




<div id="quarto-appendix" class="default"><section id="appendix-a-prompt-texts" class="level1 appendix" data-number="8"><h2 class="anchored quarto-appendix-heading"><span class="header-section-number">8</span> Appendix A: Prompt Texts</h2><div class="quarto-appendix-contents">

<section id="baseline-play-prompt" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="baseline-play-prompt"><span class="header-section-number">8.1</span> Baseline Play Prompt</h2>
<pre><code>You are playing Black Box, a game of hide and seek played on an 8 by 8 grid.

Your opponent has hidden 4 balls within this box. By shooting rays into the
box and observing where they emerge, it is possible to deduce the positions
of the hidden balls.

GRID: 8x8, rows 1-8 (top to bottom), columns 1-8 (left to right).
RAYS: Fire from edge positions - NORTH/SOUTH use columns 1-8, EAST/WEST use rows 1-8.

There are three possible outcomes for each ray you send into the box:

DETOUR: The ray is deflected and emerges somewhere other than where you sent
it in. Detours are denoted by matching pairs of numbers.

REFLECTION (R): The ray is reflected and emerges in the same place it was sent in.

HIT (H): The ray strikes a ball directly and is absorbed.

[ASCII diagram examples showing deflection, reflection, and hit patterns...]

SCORING:
Your goal is to minimize your score. Lower is better.
- Each ray entry point costs 1 point
- Each ray exit point costs 1 point (detours cost 2 total, reflections cost 1)
- Each missed atom costs 5 points

RULES:
- You cannot fire from positions already used as entry or exit points.
- Maximum 20 rays.

Respond with JSON only:
{"action": "fire", "side": "north|south|east|west", "position": 1-8, "reasoning": "..."}
{"action": "guess", "atoms": [[row,col], [row,col], [row,col], [row,col]], "reasoning": "..."}</code></pre>
</section>
<section id="baseline-predict-prompt" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="baseline-predict-prompt"><span class="header-section-number">8.2</span> Baseline Predict Prompt</h2>
<pre><code>Predict where a ray will exit in Black Box.

GRID: 8x8, rows 1-8 (top to bottom), columns 1-8 (left to right).
EDGES: NORTH/SOUTH use columns 1-8, EAST/WEST use rows 1-8.

As a ray approaches a ball it is deflected ninety degrees. Rays can be
deflected multiple times.

[ASCII diagram examples showing deflection, reflection, and hit patterns...]

Respond with JSON only:
{"exit_side": "north|south|east|west", "exit_position": 1-8, "reasoning": "..."}
OR for absorption: {"absorbed": true, "reasoning": "..."}
OR for reflection: {"reflected": true, "reasoning": "..."}</code></pre>
</section>
<section id="augmented-prompt" class="level2" data-number="8.3">
<h2 data-number="8.3" class="anchored" data-anchor-id="augmented-prompt"><span class="header-section-number">8.3</span> Augmented Prompt</h2>
<p>[Full augmented prompt text to be included]</p>
</section>
<section id="hypothesis-enabled-play-prompt-extension" class="level2" data-number="8.4">
<h2 data-number="8.4" class="anchored" data-anchor-id="hypothesis-enabled-play-prompt-extension"><span class="header-section-number">8.4</span> Hypothesis-Enabled Play Prompt Extension</h2>
<p>When hypotheses are enabled, the response format is extended:</p>
<pre><code>Respond with JSON only:
{"action": "fire", "side": "north|south|east|west", "position": 1-8, "reasoning": "..."}
{"action": "mark", "row": 1-8, "col": 1-8, "reasoning": "..."} - mark suspected atom
{"action": "unmark", "row": 1-8, "col": 1-8, "reasoning": "..."} - remove marked position
{"action": "check", "reasoning": "..."} - submit answer (requires exactly 4 marked positions)</code></pre>
</section>
</div></section><section id="appendix-b-sample-game-traces" class="level1 appendix" data-number="9"><h2 class="anchored quarto-appendix-heading"><span class="header-section-number">9</span> Appendix B: Sample Game Traces</h2><div class="quarto-appendix-contents">

<p>[Representative game traces showing LLM reasoning]</p>
</div></section><section id="appendix-c-error-taxonomy" class="level1 appendix" data-number="10"><h2 class="anchored quarto-appendix-heading"><span class="header-section-number">10</span> Appendix C: Error Taxonomy</h2><div class="quarto-appendix-contents">

<p>[Detailed coding scheme for error analysis]</p>

</div></section><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-autobench2025" class="csl-entry" role="listitem">
Authors, Various. 2025a. <span>“Auto-Bench: An Automated Benchmark for Scientific Discovery in LLMs.”</span> <em>arXiv Preprint arXiv:2502.15224</em>. <a href="https://arxiv.org/abs/2502.15224">https://arxiv.org/abs/2502.15224</a>.
</div>
<div id="ref-puzzleplex2025" class="csl-entry" role="listitem">
———. 2025b. <span>“PuzzlePlex: A Benchmark to Evaluate the Reasoning and Planning of Large Language Models on Puzzles.”</span> In <em>International Conference on Learning Representations (ICLR)</em>.
</div>
<div id="ref-bonlarron2024gencp" class="csl-entry" role="listitem">
Bonlarron, Alexandre, Jean-Charles Régin, and Elisabetta De Maria. 2024. <span>“Combining Constraint Programming Reasoning with Large Language Model Predictions.”</span> In <em>Proceedings of the 30th International Conference on Principles and Practice of Constraint Programming (CP 2024)</em>, 307:25. LIPIcs. Schloss Dagstuhl. <a href="https://doi.org/10.4230/LIPIcs.CP.2024.25">https://doi.org/10.4230/LIPIcs.CP.2024.25</a>.
</div>
<div id="ref-bos2024spatial" class="csl-entry" role="listitem">
Bos, Nathan. 2024. <span>“Language Models and Spatial Reasoning: What’s Good, What Is Still Terrible, and What Is Improving.”</span> <em>Towards Data Science</em>. <a href="https://medium.com/data-science/language-models-and-spatial-reasoning">https://medium.com/data-science/language-models-and-spatial-reasoning</a>.
</div>
<div id="ref-chen2024spatial" class="csl-entry" role="listitem">
Chen, Fangru et al. 2024. <span>“An Empirical Analysis on Spatial Reasoning Capabilities of Large Multimodal Models,”</span> 1195.
</div>
<div id="ref-freuder2024conversational" class="csl-entry" role="listitem">
Freuder, Eugene C. 2024. <span>“Conversational Modeling for Constraint Satisfaction.”</span> <em>Proceedings of the AAAI Conference on Artificial Intelligence</em> 38 (20): 22592–97. <a href="https://doi.org/10.1609/aaai.v38i20.30225">https://doi.org/10.1609/aaai.v38i20.30225</a>.
</div>
<div id="ref-giadikiaroglou2024puzzlesurvey" class="csl-entry" role="listitem">
Giadikiaroglou, Panagiotis, Maria Lymperaiou, Giorgos Filandrianos, and Giorgos Stamou. 2024. <span>“Puzzle Solving Using Reasoning of Large Language Models: A Survey.”</span> <em>arXiv Preprint arXiv:2402.11291</em>. <a href="https://arxiv.org/abs/2402.11291">https://arxiv.org/abs/2402.11291</a>.
</div>
<div id="ref-gui2024logicgame" class="csl-entry" role="listitem">
Gui, Jiayi, Yiming Liu, Jiale Cheng, Xiaotao Gu, Xiao Liu, Hongning Wang, Yuxiao Dong, Jie Tang, and Minlie Huang. 2024. <span>“LogicGame: Benchmarking Rule-Based Reasoning Abilities of Large Language Models.”</span> <em>arXiv Preprint arXiv:2408.15778</em>. <a href="https://arxiv.org/abs/2408.15778">https://arxiv.org/abs/2408.15778</a>.
</div>
<div id="ref-harig2025worldmodels" class="csl-entry" role="listitem">
Harig, Tobin et al. 2025. <span>“LLM World Models Are Mental: Output Layer Evidence of Brittle World Model Use in LLM Mechanical Reasoning.”</span> <em>arXiv Preprint arXiv:2507.15521</em>.
</div>
<div id="ref-kambhampati2024llmmodulo" class="csl-entry" role="listitem">
Kambhampati, Subbarao et al. 2024. <span>“LLMs Can’t Plan, but Can Help Planning in LLM-Modulo Frameworks.”</span> <em>arXiv Preprint arXiv:2402.01817</em>.
</div>
<div id="ref-lin2024zebralogic" class="csl-entry" role="listitem">
Lin, Bill Yuchen et al. 2024. <span>“ZebraLogic: Benchmarking the Logical Reasoning Ability of Language Models.”</span> <em>Hugging Face Blog</em>. <a href="https://huggingface.co/blog/yuchenlin/zebra-logic">https://huggingface.co/blog/yuchenlin/zebra-logic</a>.
</div>
<div id="ref-liu2024incomplete" class="csl-entry" role="listitem">
Liu, Emmy, Graham Neubig, and Jacob Andreas. 2024. <span>“An Incomplete Loop: Deductive, Inductive, and Abductive Learning in Large Language Models.”</span> <em>arXiv Preprint arXiv:2404.03028</em>.
</div>
<div id="ref-michailidis2024constraint" class="csl-entry" role="listitem">
Michailidis, Kostis, Dimosthenis Tsouros, and Tias Guns. 2024. <span>“Constraint Modelling with LLMs Using in-Context Learning.”</span> In <em>Proceedings of the 30th International Conference on Principles and Practice of Constraint Programming (CP 2024)</em>, 307:20. LIPIcs. Schloss Dagstuhl. <a href="https://doi.org/10.4230/LIPIcs.CP.2024.20">https://doi.org/10.4230/LIPIcs.CP.2024.20</a>.
</div>
<div id="ref-omar2025zebras" class="csl-entry" role="listitem">
Omar, Mahmud, Reem Agbareia, Alon Gorenshtein, Alexander W Charney, Benjamin S Glicksberg, Girish N Nadkarni, and Eyal Klang. 2025. <span>“Large Language Models Chase Zebras: Salient Cues Overrule Base Rates in Clinical Diagnosis.”</span> <em>SSRN Preprint</em>.
</div>
<div id="ref-paglieri2024balrog" class="csl-entry" role="listitem">
Paglieri, Davide, Bartłomiej Cupiał, Samuel Coward, Ulyana Piterbarg, Maciej Wolczyk, Akbir Khan, Eduardo Pignatelli, et al. 2024. <span>“BALROG: Benchmarking Agentic LLM and VLM Reasoning on Games.”</span> <em>arXiv Preprint arXiv:2411.13543</em>. <a href="https://arxiv.org/abs/2411.13543">https://arxiv.org/abs/2411.13543</a>.
</div>
<div id="ref-quan2025stark" class="csl-entry" role="listitem">
Quan, Yida et al. 2025. <span>“Benchmarking Spatiotemporal Reasoning in LLMs and Reasoning Models: Capabilities and Challenges.”</span> <em>arXiv Preprint arXiv:2505.11618</em>.
</div>
<div id="ref-rodriguez2025analogical" class="csl-entry" role="listitem">
Rodriguez, Pablo et al. 2025. <span>“Analogical Mappings of Facts and Counterfactuals in the Human Mind and Peirce’s Abduction: Limitations in LLMs.”</span> <em>Cognitive Systems Research</em>. <a href="https://doi.org/10.1016/j.cogsys.2025.101389">https://doi.org/10.1016/j.cogsys.2025.101389</a>.
</div>
<div id="ref-shojaee2025illusion" class="csl-entry" role="listitem">
Shojaee, Parshin, Iman Mirzadeh, Keivan Alizadeh, Maxwell Horton, Samy Bengio, and Mehrdad Farajtabar. 2025. <span>“The Illusion of Thinking: Understanding the Strengths and Limitations of Reasoning Models via the Lens of Problem Complexity.”</span> <em>arXiv Preprint arXiv:2506.06941</em>.
</div>
<div id="ref-tikhonov2024plugh" class="csl-entry" role="listitem">
Tikhonov, Alexey et al. 2024. <span>“PLUGH: A Benchmark for Spatial Understanding and Reasoning in Large Language Models.”</span> In <em>arXiv Preprint</em>. <a href="https://arxiv.org/abs/2408.04648">https://arxiv.org/abs/2408.04648</a>.
</div>
<div id="ref-valmeekam2023planning" class="csl-entry" role="listitem">
Valmeekam, Karthik, Matthew Marquez, Alberto Olmo, Sarath Sreedharan, and Subbarao Kambhampati. 2023. <span>“On the Planning Abilities of Large Language Models: A Critical Investigation.”</span> <em>Advances in Neural Information Processing Systems</em> 36.
</div>
<div id="ref-wang2025crosswordbench" class="csl-entry" role="listitem">
Wang, Jixuan et al. 2025. <span>“CrossWordBench: Evaluating the Reasoning Capabilities of LLMs and LVLMs with Controllable Puzzle Generation.”</span> <em>arXiv Preprint arXiv:2510.13271</em>. <a href="https://arxiv.org/abs/2510.13271">https://arxiv.org/abs/2510.13271</a>.
</div>
<div id="ref-wang2024bytesized" class="csl-entry" role="listitem">
Wang, Ruoyao, Graham Todd, Xingdi Yuan, et al. 2024. <span>“Can Language Models Serve as Text-Based World Simulators?”</span> In <em>Proceedings of the 62nd Annual Meeting of the Association for Computational Linguistics</em>.
</div>
<div id="ref-wang2025mastermind" class="csl-entry" role="listitem">
Wang, Yifan, Xinnan Li, Yifei Niu, Shimin Hu, et al. 2025. <span>“Empowering LLMs in Decision Games Through Algorithmic Data Synthesis.”</span> <em>arXiv Preprint arXiv:2503.13980</em>. <a href="https://arxiv.org/abs/2503.13980">https://arxiv.org/abs/2503.13980</a>.
</div>
<div id="ref-wang2025occam" class="csl-entry" role="listitem">
Wang, Zonglin et al. 2025. <span>“Language Models Do Not Follow Occam’s Razor: A Benchmark for Inductive and Abductive Reasoning.”</span> <em>arXiv Preprint arXiv:2509.03345</em>.
</div>
<div id="ref-wen2025context" class="csl-entry" role="listitem">
Wen, Andrew, Qiuhao Lu, Yu-Neng Chuang, et al. 2025. <span>“Context Matching Is Not Reasoning When Performing Generalized Clinical Evaluation of Generative Language Models.”</span> <em>Npj Digital Medicine</em>. <a href="https://doi.org/10.1038/s41746-025-02253-2">https://doi.org/10.1038/s41746-025-02253-2</a>.
</div>
<div id="ref-blackbox1978" class="csl-entry" role="listitem">
Wikipedia contributors. 2024. <span>“Black Box (Game).”</span> <a href="https://en.wikipedia.org/wiki/Black_Box_(game)" class="uri">https://en.wikipedia.org/wiki/Black_Box_(game)</a>.
</div>
<div id="ref-yang2025survey" class="csl-entry" role="listitem">
Yang, Yunfan et al. 2025. <span>“From Reasoning to Learning: A Survey on Hypothesis Discovery and Rule Learning with Large Language Models.”</span> <em>arXiv Preprint arXiv:2505.21935</em>.
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>